/*! For license information please see main.ddc5a70a.js.LICENSE.txt */
!function(){var e={4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},693:function(e,t,n){var r=n(9713);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach((function(t){r(e,t,n[t])}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},9591:function(e,t,n){var r=n(8).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=f;var d={};function p(){}function v(){}function y(){}var m={};l(m,u,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(T([])));k&&k!==n&&a.call(k,u)&&(m=k);var w=y.prototype=p.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(i,o,u,s){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,s)}),(function(e){n("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=y,l(w,"constructor",y),l(y,"constructor",v),v.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},b(_.prototype),l(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new _(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(w),l(w,c,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){var r=n(9591)();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},6867:function(e,t,n){"use strict";n.d(t,{$:function(){return ae},A:function(){return L},B:function(){return m},C:function(){return F},D:function(){return w},E:function(){return c},F:function(){return j},G:function(){return H},H:function(){return R},I:function(){return Y},J:function(){return V},K:function(){return $},L:function(){return ue},M:function(){return le},N:function(){return ie},O:function(){return he},P:function(){return O},Q:function(){return A},R:function(){return M},S:function(){return B},T:function(){return D},U:function(){return me},V:function(){return ne},W:function(){return Q},X:function(){return J},Y:function(){return X},Z:function(){return ee},_:function(){return te},a:function(){return U},a0:function(){return oe},a1:function(){return se},a2:function(){return ce},a3:function(){return fe},a4:function(){return de},a5:function(){return pe},a6:function(){return ve},a7:function(){return ye},b:function(){return q},d:function(){return z},e:function(){return P},f:function(){return W},g:function(){return K},h:function(){return G},i:function(){return g},j:function(){return I},k:function(){return u},l:function(){return E},m:function(){return k},n:function(){return N},o:function(){return d},p:function(){return l},q:function(){return y},r:function(){return h},s:function(){return x},t:function(){return s},u:function(){return f},v:function(){return S},y:function(){return _},z:function(){return b}});var r=n(7408),i=n(7462),a=n(5609);var o=function(e,t){var n;void 0===t&&(t=!0);var i=new Promise((function(r){n=setTimeout(r,e,t)}));return i[r.n1]=function(){clearTimeout(n)},i},u=function(e){return function(){return e}}(!0),s=function(){};var c=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var l=function(e,t){(0,i.Z)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))},f=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))};function h(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function d(e){var t=!1;return function(){t||(t=!0,e())}}var p=function(e){throw e},v=function(e){return{value:e,done:!0}};function y(e,t,n){void 0===t&&(t=p),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:v,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function m(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var g=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},k=function(e){return Array.apply(null,new Array(e))},w=function(e){return function(t){return e(Object.defineProperty(t,r.Nm,{value:!0}))}},b=function(e){return e===r.EO},_=function(e){return e===r.Wd},x=function(e){return b(e)||_(e)};function E(e,t){var n=Object.keys(e),r=n.length;var i,o=0,u=(0,a.IX)(e)?k(r):{},c={};return n.forEach((function(e){var n=function(n,a){i||(a||x(n)?(t.cancel(),t(n,a)):(u[e]=n,++o===r&&(i=!0,t(u))))};n.cancel=s,c[e]=n})),t.cancel=function(){i||(i=!0,n.forEach((function(e){return c[e].cancel()})))},c}function I(e){return{name:e.name||"anonymous",location:S(e)}}function S(e){return e[r.b_]}var T={isEmpty:u,put:s,take:s};function C(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},u=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},s=function(){for(var e=[];r;)e.push(u());return e};return{isEmpty:function(){return 0==r},put:function(u){var c;if(r<e)o(u);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=u,a=i=(i+1)%e;break;case 4:c=2*e,n=s(),r=n.length,i=n.length,a=0,n.length=c,e=c,o(u)}},take:u,flush:s}}var N=function(){return T},A=function(e){return C(e,3)},P=function(e){return C(e,4)},R=Object.freeze({__proto__:null,none:N,fixed:function(e){return C(e,1)},dropping:function(e){return C(e,2)},sliding:A,expanding:P}),D="TAKE",O="PUT",L="ALL",M="RACE",F="CALL",U="CPS",j="FORK",V="JOIN",q="CANCEL",B="SELECT",z="ACTION_CHANNEL",W="CANCELLED",K="FLUSH",H="GET_CONTEXT",G="SET_CONTEXT",Q=Object.freeze({__proto__:null,TAKE:D,PUT:O,ALL:L,RACE:M,CALL:F,CPS:U,FORK:j,JOIN:V,CANCEL:q,SELECT:B,ACTION_CHANNEL:z,CANCELLED:W,FLUSH:K,GET_CONTEXT:H,SET_CONTEXT:G}),Z=function(e,t){var n;return(n={})[r.IO]=!0,n.combinator=!1,n.type=e,n.payload=t,n},Y=function(e){return Z(j,(0,i.Z)({},e.payload,{detached:!0}))};function $(e,t){return void 0===e&&(e="*"),(0,a.uj)(e)?Z(D,{pattern:e}):(0,a.Om)(e)&&(0,a.d5)(t)&&(0,a.uj)(t)?Z(D,{channel:e,pattern:t}):(0,a.CE)(e)?Z(D,{channel:e}):void 0}var J=function(){var e=$.apply(void 0,arguments);return e.payload.maybe=!0,e};function X(e,t){return(0,a.sR)(t)&&(t=e,e=void 0),Z(O,{channel:e,action:t})}var ee=function(){var e=X.apply(void 0,arguments);return e.payload.resolve=!0,e};function te(e){var t=Z(L,e);return t.combinator=!0,t}function ne(e){var t=Z(M,e);return t.combinator=!0,t}function re(e,t){var n,r=null;return(0,a.Yl)(e)?n=e:((0,a.IX)(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&(0,a.Z_)(n)&&(0,a.Yl)(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z(F,re(e,n))}function ae(e,t,n){void 0===n&&(n=[]);return Z(F,re([e,t],n))}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z(U,re(e,n))}function ue(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z(j,re(e,n))}function se(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Y(ue.apply(void 0,[e].concat(n)))}function ce(e){return Z(V,e)}function le(e){return void 0===e&&(e=r.sC),Z(q,e)}function fe(e){void 0===e&&(e=c);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z(B,{selector:e,args:n})}function he(e,t){return Z(z,{pattern:e,buffer:t})}function de(){return Z(W,{})}function pe(e){return Z(K,e)}function ve(e){return Z(H,e)}function ye(e){return Z(G,e)}var me=ie.bind(null,o)},5609:function(e,t,n){"use strict";n.d(t,{CE:function(){return h},IX:function(){return s},MC:function(){return c},NA:function(){return p},Om:function(){return v},Yl:function(){return o},Z_:function(){return u},d5:function(){return a},eR:function(){return d},hZ:function(){return l},sR:function(){return i},uj:function(){return f}});var r=n(7408),i=function(e){return null===e||void 0===e},a=function(e){return null!==e&&void 0!==e},o=function(e){return"function"===typeof e},u=function(e){return"string"===typeof e},s=Array.isArray,c=function(e){return e&&o(e.then)},l=function(e){return e&&o(e.next)&&o(e.throw)},f=function e(t){return t&&(u(t)||p(t)||o(t)||s(t)&&t.every(e))},h=function(e){return e&&o(e.take)&&o(e.close)},d=function(e){return o(e)&&e.hasOwnProperty("toString")},p=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},v=function(e){return h(e)&&e[r.AS]}},7408:function(e,t,n){"use strict";n.d(t,{AS:function(){return s},Cs:function(){return f},EO:function(){return d},IO:function(){return o},Nm:function(){return c},Wd:function(){return h},b_:function(){return p},n1:function(){return i},sC:function(){return l},sZ:function(){return a},uq:function(){return u}});var r=function(e){return"@@redux-saga/"+e},i=r("CANCEL_PROMISE"),a=r("CHANNEL_END"),o=r("IO"),u=r("MATCH"),s=r("MULTICAST"),c=r("SAGA_ACTION"),l=r("SELF_CANCELLATION"),f=r("TASK"),h=r("TASK_CANCEL"),d=r("TERMINATE"),p=r("LOCATION")},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},2110:function(e,t,n){"use strict";var r=n(7441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},2176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},3573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}return(0,a.default)(r)};var r,i=n(6054),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},6054:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var u=i||"<<anonymous>>",s=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+s+"` was not specified in `"+u+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),f=6;f<c;f++)l[f-6]=arguments[f];return e.apply(void 0,[n,r,u,a,s].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case I:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Ie(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,Et,It,St=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(jt),Rt.forEach(jt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==At&&qt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Zt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Zt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Zt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function In(){return En}var Sn=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Zn(e){if(G(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}Jn=Xn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Zn(Gn)){var t=[];Kn(t,Gn,e,be(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Gn)}function ar(e,t){if("click"===e)return Zn(t)}function or(e,t){if("input"===e||"change"===e)return Zn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Er={};function Ir(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=be(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(Wn(u))if($n)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(m=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Xt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Zr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Xr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Ii(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ii(Ni),Ii(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),Si(Ci,e)):Ii(Ni),Si(Ni,n)}var Ui=null,ji=!1,Vi=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Xe,Bi),i}finally{kt=t,Vi=!1}}return null}var zi=w.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ki=Ei(null),Hi=null,Gi=null,Qi=null;function Zi(){Qi=Gi=Hi=null}function Yi(e){var t=Ki.current;Ii(Ki),e._currentValue=t}function $i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ji(e,t){Hi=e,Qi=Gi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Xi(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Gi){if(null===Hi)throw Error(a(308));Gi=e,Hi.dependencies={lanes:0,firstContext:e}}else Gi=Gi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ds|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$s(),i=Js(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Xs(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$s(),i=Js(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Xs(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$s(),r=Js(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Xs(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Xi(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ya(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Xi(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ma=[],ga=0,ka=null,wa=0,ba=[],_a=0,xa=null,Ea=1,Ia="";function Sa(e,t){ma[ga++]=wa,ma[ga++]=ka,ka=e,wa=t}function Ta(e,t,n){ba[_a++]=Ea,ba[_a++]=Ia,ba[_a++]=xa,xa=e;var r=Ea;e=Ia;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ea=1<<32-ot(t)+i|n<<i|r,Ia=a+e}else Ea=1<<a|n<<i|r,Ia=e}function Ca(e){null!==e.return&&(Sa(e,1),Ta(e,1,0))}function Na(e){for(;e===ka;)ka=ma[--ga],ma[ga]=null,wa=ma[--ga],ma[ga]=null;for(;e===xa;)xa=ba[--_a],ba[_a]=null,Ia=ba[--_a],ba[_a]=null,Ea=ba[--_a],ba[_a]=null}var Aa=null,Pa=null,Ra=!1,Da=null;function Oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Pa=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Pa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Ea,overflow:Ia}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Pa=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Ra){var t=Pa;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Aa;t&&La(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Ra=!1,Aa=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Ra=!1,Aa=e}}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function ja(e){if(e!==Aa)return!1;if(!Ra)return Ua(e),Ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Pa)){if(Ma(e)){for(e=Pa;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pa=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pa=null}}else Pa=Aa?ci(e.stateNode.nextSibling):null;return!0}function Va(){Pa=Aa=null,Ra=!1}function qa(e){null===Da?Da=[e]:Da.push(e)}function Ba(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Wa(a)===t.type)?((r=i(t,n.props)).ref=Ba(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ba(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ba(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Oc(t,e.mode,n,null)).return=e,t;za(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);za(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),Ra&&Sa(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Ra&&Sa(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),Ra&&Sa(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),Ra&&Sa(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return Ra&&Sa(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Ra&&Sa(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ba(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Dc(o.type,o.key,o.props,null,r.mode,s)).ref=Ba(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ha=Ka(!0),Ga=Ka(!1),Qa={},Za=Ei(Qa),Ya=Ei(Qa),$a=Ei(Qa);function Ja(e){if(e===Qa)throw Error(a(174));return e}function Xa(e,t){switch(Si($a,t),Si(Ya,e),Si(Za,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Si(Za,t)}function eo(){Ii(Za),Ii(Ya),Ii($a)}function to(e){Ja($a.current);var t=Ja(Za.current),n=se(t,e.type);t!==n&&(Si(Ya,e),Si(Za,n))}function no(e){Ya.current===e&&(Ii(Za),Ii(Ya))}var ro=Ei(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=w.ReactCurrentDispatcher,so=w.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,yo=0,mo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function wo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,yo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function bo(){var e=0!==yo;return yo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function xo(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function Eo(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,lo.lanes|=f,Ds|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Ds|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Co(e,t){var n=lo,r=xo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,jo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Oo(9,Ao.bind(null,n,r,i,t),void 0,null),null===Ss)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Xs(e,1,-1)}function Po(e,t,n){return n((function(){Ro(t)&&Xs(e,1,-1)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Do(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=$o.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return xo().memoizedState}function Mo(e,t,n,r){var i=_o();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function Uo(e,t){return Mo(8390656,8,e,t)}function jo(e,t){return Fo(2048,8,e,t)}function Vo(e,t){return Fo(4,2,e,t)}function qo(e,t){return Fo(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,Bo.bind(null,t,e),n)}function Wo(){}function Ko(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Ds|=n,e.baseState=!0),t)}function Qo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{kt=n,so.transition=r}}function Zo(){return xo().memoizedState}function Yo(e,t,n){var r=Js(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e)?Xo(t,n):(eu(e,t,n),null!==(e=Xs(e,r,n=$s()))&&tu(e,t,r))}function $o(e,t,n){var r=Js(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Xo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Xs(e,r,n=$s()))&&tu(e,t,r)}}function Jo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Xo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nu={readContext:Xi,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ru={readContext:Xi,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Xi,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Do,useDebugValue:Wo,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Qo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=_o();if(Ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ss)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Ss.identifierPrefix;if(Ra){var n=Ia;t=":"+t+"R"+(n=(Ea&~(1<<32-ot(Ea)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Xi,useCallback:Ko,useContext:Xi,useEffect:jo,useImperativeHandle:zo,useInsertionEffect:Vo,useLayoutEffect:qo,useMemo:Ho,useReducer:Io,useRef:Lo,useState:function(){return Io(Eo)},useDebugValue:Wo,useDeferredValue:function(e){return Go(xo(),fo.memoizedState,e)},useTransition:function(){return[Io(Eo)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Zo,unstable_isNewReconciler:!1},au={readContext:Xi,useCallback:Ko,useContext:Xi,useEffect:jo,useImperativeHandle:zo,useInsertionEffect:Vo,useLayoutEffect:qo,useMemo:Ho,useReducer:So,useRef:Lo,useState:function(){return So(Eo)},useDebugValue:Wo,useDeferredValue:function(e){var t=xo();return null===fo?t.memoizedState=e:Go(t,fo.memoizedState,e)},useTransition:function(){return[So(Eo)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Zo,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qs||(qs=!0,Bs=r),uu(0,t)},n}function du(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===zs?zs=new Set([this]):zs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function mu(e,t){if(!Ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ku(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(t),null;case 1:case 17:return Ri(t.type)&&Di(),gu(t),null;case 3:return r=t.stateNode,eo(),Ii(Ni),Ii(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ja(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Da&&(ac(Da),Da=null))),gu(t),null;case 5:no(t);var i=Ja($a.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gu(t),null}if(e=Ja(Za.current),ja(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":H(r),X(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,su(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=Z(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),X(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja($a.current),Ja(Za.current),ja(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return gu(t),null;case 13:if(Ii(ro),r=t.memoizedState,Ra&&null!==Pa&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Pa;r;)r=ci(r.nextSibling);return Va(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=ja(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else Va(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gu(t),null}return null!==Da&&(ac(Da),Da=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?ja(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Ps&&(Ps=3):pc())),null!==t.updateQueue&&(t.flags|=4),gu(t),null);case 4:return eo(),null===e&&Br(t.stateNode.containerInfo),gu(t),null;case 10:return Yi(t.type._context),gu(t),null;case 19:if(Ii(ro),null===(o=t.memoizedState))return gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)mu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,mu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>js&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),mu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Ra)return gu(t),null}else 2*$e()-o.renderingStartTime>js&&1073741824!==n&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ro.current,Si(ro,r?1&n|2:1&n),t):(gu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ns)&&(gu(t),6&t.subtreeFlags&&(t.flags|=8192)):gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ja(Za.current);var a,o=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var wu=w.ReactCurrentOwner,bu=!1;function _u(e,t,n,r){t.child=null===e?Ga(t,null,n,r):Ha(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ji(t,i),r=wo(e,t,n,r,a,i),n=bo(),null===e||bu?(Ra&&n&&Ca(t),t.flags|=1,_u(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Eu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Cu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(As,Ns),Ns|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(As,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(As,Ns),Ns|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(As,Ns),Ns|=r;return _u(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),Ji(t,i),n=wo(e,t,n,r,a,i),r=bo(),null===e||bu?(Ra&&r&&Ca(t),t.flags|=1,_u(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Nu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ji(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ya(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Xi(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,sa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||ta?("function"===typeof l&&(fa(t,n,l,r),s=t.memoizedState),(u=ta||da(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Wi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Xi(s):s=Pi(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&va(t,o,r,s),ta=!1,h=t.memoizedState,o.state=h,sa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,wu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ha(t,e.child,null,a),t.child=Ha(t,null,u,a)):_u(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Xa(e,t.containerInfo)}function Ru(e,t,n,r,i){return Va(),qa(i),t.flags|=256,_u(e,t,n,r),t.child}var Du={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Mu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Lc(o,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ou(n),t.memoizedState=Du,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Vu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(u=Oc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ha(t,e.child,null,n),t.child.memoizedState=Ou(n),t.memoizedState=Du,u);if(0===(1&t.mode))t=Vu(e,t,n,null);else if("$!"===r.data)t=Vu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),bu||i){if(null!==(i=Ss)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Xs(e,i,-1))}pc(),t=Vu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Pa=ci(r.nextSibling),Aa=t,Ra=!0,Da=null,null!==n&&(ba[_a++]=Ea,ba[_a++]=Ia,ba[_a++]=xa,Ea=n.id,Ia=n.overflow,xa=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=ju(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=ju(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){var i=e.child;return e=i.sibling,n=Rc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function ju(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Rc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Rc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Vu(e,t,n,r){return null!==r&&qa(r),Ha(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),$i(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_u(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qu(e,n,t);else if(19===e.tag)qu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ds|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){switch(Na(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ii(Ni),Ii(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ii(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Va()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ro),null;case 4:return eo(),null;case 10:return Yi(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Hu=!1,Gu=!1,Qu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function Yu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function $u(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Ju=!1;function Xu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&$u(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Gu||Yu(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Gu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&$u(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Gu&&(Yu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){xc(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Gu=(r=Gu)||null!==n.memoizedState,cs(e,t,n),Gu=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qu),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ps(e),4&r){try{Xu(3,e,e.return),es(3,e)}catch(v){xc(e,e.return,v)}try{Xu(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:hs(t,e),ps(e),512&r&&null!==n&&Yu(n,n.return);break;case 5:if(hs(t,e),ps(e),512&r&&null!==n&&Yu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(hs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){xc(e,e.return,v)}}break;case 3:if(hs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:hs(t,e),ps(e);break;case 13:hs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Us=$e()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Gu=(f=Gu)||l,hs(t,e),Gu=f):hs(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){xc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Zu=e,e=e.child;null!==e;){for(l=Zu=e;null!==Zu;){switch(h=(f=Zu).child,f.tag){case 0:case 11:case 14:case 15:Xu(4,f,f.return);break;case 1:if(Yu(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xc(d,p,v)}}break;case 5:Yu(f,f.return);break;case 22:if(null!==f.memoizedState){gs(l);continue}}null!==h?(h.return=f,Zu=h):gs(l)}e=e.sibling}}break;case 19:hs(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){xc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Zu=e,ys(e,t,n)}function ys(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Hu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Gu;u=Hu;var c=Gu;if(Hu=o,(Gu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,Zu=s):ks(i);for(;null!==a;)Zu=a,ys(a,t,n),a=a.sibling;Zu=i,Hu=u,Gu=c}ms(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ms(e)}}function ms(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Gu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Gu||512&t.flags&&ts(t)}catch(d){xc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function gs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function ks(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){xc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){xc(t,i,s)}}var a=t.return;try{ts(t)}catch(s){xc(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){xc(t,o,s)}}}catch(s){xc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var ws,bs=Math.ceil,_s=w.ReactCurrentDispatcher,xs=w.ReactCurrentOwner,Es=w.ReactCurrentBatchConfig,Is=0,Ss=null,Ts=null,Cs=0,Ns=0,As=Ei(0),Ps=0,Rs=null,Ds=0,Os=0,Ls=0,Ms=null,Fs=null,Us=0,js=1/0,Vs=null,qs=!1,Bs=null,zs=null,Ws=!1,Ks=null,Hs=0,Gs=0,Qs=null,Zs=-1,Ys=0;function $s(){return 0!==(6&Is)?$e():-1!==Zs?Zs:Zs=$e()}function Js(e){return 0===(1&e.mode)?1:0!==(2&Is)&&0!==Cs?Cs&-Cs:null!==zi.transition?(0===Ys&&(Ys=vt()),Ys):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function Xs(e,t,n){if(50<Gs)throw Gs=0,Qs=null,Error(a(185));var r=ec(e,t);return null===r?null:(mt(r,t,n),0!==(2&Is)&&r===Ss||(r===Ss&&(0===(2&Is)&&(Os|=t),4===Ps&&oc(r,Cs)),nc(r,n),1===t&&0===Is&&0===(1&e.mode)&&(js=$e()+500,ji&&Bi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Ss||null!==ea)&&0!==(1&e.mode)&&0===(2&Is)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ss?Cs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,qi(e)}(uc.bind(null,e)):qi(uc.bind(null,e)),oi((function(){0===Is&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Zs=-1,Ys=0,0!==(6&Is))throw Error(a(327));var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ss?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Is;Is|=2;var o=dc();for(Ss===e&&Cs===t||(Vs=null,js=$e()+500,fc(e,t));;)try{mc();break}catch(s){hc(e,s)}Zi(),_s.current=o,Is=i,null!==Ts?t=0:(Ss=null,Cs=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Rs,fc(e,0),oc(e,r),nc(e,$e()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Rs,fc(e,0),oc(e,r),nc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Fs,Vs);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Us+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){$s(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Fs,Vs),t);break}wc(e,Fs,Vs);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bs(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Fs,Vs),r);break}wc(e,Fs,Vs);break;default:throw Error(a(329))}}}return nc(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ms;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ls,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Is))throw Error(a(327));bc();var t=ht(e,0);if(0===(1&t))return nc(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rs,fc(e,0),oc(e,t),nc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Fs,Vs),nc(e,$e()),null}function sc(e,t){var n=Is;Is|=1;try{return e(t)}finally{0===(Is=n)&&(js=$e()+500,ji&&Bi())}}function cc(e){null!==Ks&&0===Ks.tag&&0===(6&Is)&&bc();var t=Is;Is|=1;var n=Es.transition,r=kt;try{if(Es.transition=null,kt=1,e)return e()}finally{kt=r,Es.transition=n,0===(6&(Is=t))&&Bi()}}function lc(){Ns=As.current,Ii(As)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:eo(),Ii(Ni),Ii(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ii(ro);break;case 10:Yi(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Ss=e,Ts=e=Rc(e.current,null),Cs=Ns=t,Ps=0,Rs=null,Ls=Os=Ds=0,Fs=Ms=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Ts;try{if(Zi(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,yo=0,xs.current=null,null===n||null===n.return){Ps=1,Rs=t,Ts=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,yu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Ra&&1&s.mode){var m=vu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),yu(m,u,s,0,t),qa(c);break e}}o=c,4!==Ps&&(Ps=2),null===Ms?Ms=[o]:Ms.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,hu(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===zs||!zs.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(s,o,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(w){t=w,Ts===n&&null!==n&&(Ts=n=n.return);continue}break}}function dc(){var e=_s.current;return _s.current=nu,null===e?nu:e}function pc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Ss||0===(268435455&Ds)&&0===(268435455&Os)||oc(Ss,Cs)}function vc(e,t){var n=Is;Is|=2;var r=dc();for(Ss===e&&Cs===t||(Vs=null,fc(e,t));;)try{yc();break}catch(i){hc(e,i)}if(Zi(),Is=n,_s.current=r,null!==Ts)throw Error(a(261));return Ss=null,Cs=0,Ps}function yc(){for(;null!==Ts;)gc(Ts)}function mc(){for(;null!==Ts&&!Ze();)gc(Ts)}function gc(e){var t=ws(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?kc(e):Ts=t,xs.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ku(n,t,Ns)))return void(Ts=n)}else{if(null!==(n=Ku(n,t)))return n.flags&=32767,void(Ts=n);if(null===e)return Ps=6,void(Ts=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ts=t);Ts=t=e}while(null!==t);0===Ps&&(Ps=5)}function wc(e,t,n){var r=kt,i=Es.transition;try{Es.transition=null,kt=1,function(e,t,n,r){do{bc()}while(null!==Ks);if(0!==(6&Is))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ss&&(Ts=Ss=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Cc(tt,(function(){return bc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Es.transition,Es.transition=null;var u=kt;kt=1;var s=Is;Is|=4,xs.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Wi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;if(1===w.nodeType)w.textContent="";else if(9===w.nodeType){var b=w.body;null!=b&&(b.textContent="")}break;default:throw Error(a(163))}}catch(_){xc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=Ju,Ju=!1}(e,n),ds(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),Ye(),Is=s,kt=u,Es.transition=o}else e.current=n;if(Ws&&(Ws=!1,Ks=e,Hs=i),0===(o=e.pendingLanes)&&(zs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(qs)throw qs=!1,e=Bs,Bs=null,e;0!==(1&Hs)&&0!==e.tag&&bc(),0!==(1&(o=e.pendingLanes))?e===Qs?Gs++:(Gs=0,Qs=e):Gs=0,Bi()}(e,t,n,r)}finally{Es.transition=i,kt=r}return null}function bc(){if(null!==Ks){var e=wt(Hs),t=Es.transition,n=kt;try{if(Es.transition=null,kt=16>e?16:e,null===Ks)var r=!1;else{if(e=Ks,Ks=null,Hs=0,0!==(6&Is))throw Error(a(331));var i=Is;for(Is|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:Xu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(ns(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:Xu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var w=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Zu=w;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(_){xc(s,s.return,_)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(Is=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Es.transition=t}}return!1}function _c(e,t,n){aa(e,t=hu(0,t=ou(n,t),1)),t=$s(),null!==(e=ec(e,1))&&(mt(e,1,t),nc(e,t))}function xc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zs||!zs.has(r))){aa(t,e=du(t,e=ou(n,e),1)),e=$s(),null!==(t=ec(t,1))&&(mt(t,1,e),nc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=$s(),e.pingedLanes|=e.suspendedLanes&n,Ss===e&&(Cs&n)===n&&(4===Ps||3===Ps&&(130023424&Cs)===Cs&&500>$e()-Us?fc(e,0):Ls|=n),nc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=$s();null!==(e=ec(e,t))&&(mt(e,t,n),nc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Cc(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Oc(n.children,i,o,t);case E:u=8,i|=8;break;case I:return(e=Ac(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=ia(r=$s(),i=Js(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,mt(e,i,r),nc(e,r),e}function zc(e,t,n,r){var i=t.current,a=$s(),o=Js(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Xs(i,o,a))&&oa(e,i,o),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}ws=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Pu(t),Va();break;case 5:to(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(Ki,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Si(ro,1&ro.current),null!==(e=Wu(e,t,n))?e.sibling:null);Si(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,Ra&&0!==(1048576&t.flags)&&Ta(t,wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Pi(t,Ci.current);Ji(t,n),i=wo(null,t,r,e,i,n);var o=bo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ya(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,Ra&&o&&Ca(t),_u(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=Wi(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Eu(null,t,r,Wi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:e:{if(Pu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Ru(e,t,r,n,i=Error(a(424)));break e}for(Pa=ci(t.stateNode.containerInfo.firstChild),Aa=t,Ra=!0,Da=null,n=Ga(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Va(),r===i){t=Wu(e,t,n);break e}_u(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),_u(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Mu(e,t,n);case 4:return Xa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ha(t,null,r,n):_u(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return _u(e,t,t.pendingProps,n),t.child;case 8:case 12:return _u(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(Ki,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),$i(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),$i(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}_u(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ji(t,n),r=r(i=Xi(i)),t.flags|=1,_u(e,t,r,n),t.child;case 14:return i=Wi(r=t.type,t.pendingProps),Eu(e,t,r,i=Wi(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ji(t,n),pa(t,r,i),ya(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Xc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),cc((function(){zc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Zc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Zc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){zc(null,e,null,null)})),t[pi]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,$e()),0===(6&Is)&&(js=$e()+500,Bi()))}break;case 13:var r=$s();cc((function(){return Xs(e,1,r)})),Hc(e,1)}},_t=function(e){13===e.tag&&(Xs(e,134217728,$s()),Hc(e,134217728))},xt=function(e){if(13===e.tag){var t=$s(),n=Js(e);Xs(e,n,t),Hc(e,n)}},Et=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[ki,wi,bi,Se,Te,sc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return Xc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return Xc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Xc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Xc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},7441:function(e,t,n){"use strict";e.exports=n(1372)},8459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},6900:function(e,t,n){"use strict";n(8459)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.1.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},5484:function(e,t,n){"use strict";var r=n(7781).qC;t.Uo="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?r:r.apply(null,arguments)},"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__},8106:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){0};t.default=n},8952:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7757)),a=n(5792),o=n(7780),u=i.default.mark(C),s=i.default.mark(N),c=i.default.mark(A),l=i.default.mark(P),f=i.default.mark(R),h=i.default.mark(D),d=i.default.mark(O),p=i.default.mark(L),v=i.default.mark(M),y=i.default.mark(F),m=i.default.mark(U),g=i.default.mark(j),k=i.default.mark(V),w=i.default.mark(q),b=i.default.mark(B),_=i.default.mark(z),x=i.default.mark(W),E=i.default.mark(K),I=i.default.mark(H),S=i.default.mark(G),T=i.default.mark(Q);function C(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.applyActionCode],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),u,this)}function N(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.confirmPasswordReset],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),s,this)}function A(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.createUserWithEmailAndPassword],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),c,this)}function P(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.app.auth(),t.next=3,(0,o.call)([e.currentUser,e.currentUser.delete]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),l,this)}function R(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.linkWithPopup],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),f,this)}function D(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.linkWithRedirect],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),h,this)}function O(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.sendEmailVerification],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),d,this)}function L(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.sendPasswordResetEmail],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),p,this)}function M(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInAndRetrieveDataWithCredential],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),v,this)}function F(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.app.auth(),t.next=3,(0,o.call)([e,e.signInAnonymously]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),y,this)}function U(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInWithCredential],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),m,this)}function j(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInWithCustomToken],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),g,this)}function V(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.signInWithEmailAndPassword],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),k,this)}function q(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.signInWithPhoneNumber],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),w,this)}function B(e){var t,n,r;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.app.auth(),i.next=3,(0,o.call)([t,t.signInWithPopup],e);case 3:return n=i.sent,r=n.credential,i.abrupt("return",r);case 6:case"end":return i.stop()}}),b,this)}function z(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInWithRedirect],e);case 3:case"end":return n.stop()}}),_,this)}function W(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.app.auth(),t.next=3,(0,o.call)([e,e.signOut]);case 3:case"end":return t.stop()}}),x,this)}function K(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.unlink],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),E,this)}function H(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.updateEmail],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),I,this)}function G(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.updatePassword],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),S,this)}function Q(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.updateProfile],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),T,this)}var Z={applyActionCode:C,channel:function(){if(this._authChannel)return this._authChannel;var e=this.app.auth(),t=(0,a.eventChannel)((function(t){return e.onAuthStateChanged((function(e){return t({user:e})}),(function(e){return t({error:e})}))}));return this._authChannel=t,t},confirmPasswordReset:N,createUserWithEmailAndPassword:A,deleteProfile:P,linkWithPopup:R,linkWithRedirect:D,sendEmailVerification:O,sendPasswordResetEmail:L,signInAndRetrieveDataWithCredential:M,signInAnonymously:F,signInWithCredential:U,signInWithCustomToken:j,signInWithEmailAndPassword:V,signInWithPhoneNumber:q,signInWithPopup:B,signInWithRedirect:z,signOut:W,unlink:K,updateEmail:H,updatePassword:G,updateProfile:Q};t.default=Z},5966:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getRef=void 0;var i=r(n(693)),a=r(n(7757)),o=n(5792),u=n(7780),s=n(2133),c=a.default.mark(y),l=a.default.mark(m),f=a.default.mark(g),h=a.default.mark(k),d=a.default.mark(w),p=a.default.mark(_),v=function(e,t){return"string"===typeof t?e.app.database().ref(t):t};function y(e){var t,n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=v(this,e),r.next=3,(0,u.call)([t,t.once],"value");case 3:return n=r.sent,r.abrupt("return",n.val());case 5:case"end":return r.stop()}}),c,this)}function m(e,t){var n,r;return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=v(this,e),i.next=3,(0,u.call)([n,n.push],t);case 3:return r=i.sent,i.abrupt("return",r.key);case 5:case"end":return i.stop()}}),l,this)}function g(e,t){var n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=v(this,e),r.next=3,(0,u.call)([n,n.set],t);case 3:case"end":return r.stop()}}),f,this)}function k(e,t){var n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=v(this,e),r.next=3,(0,u.call)([n,n.update],t);case 3:case"end":return r.stop()}}),h,this)}function w(e){var t;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=v(this,e),n.next=3,(0,u.call)([t,t.remove]);case 3:case"end":return n.stop()}}),d,this)}t.getRef=v;var b=function(e){return e.value};function _(e,t,n){var r;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,u.call)(this.database.channel,e,n);case 2:return r=a.sent,a.next=5,(0,u.fork)(s.syncChannel,r,(0,i.default)({transform:b},t));case 5:case"end":return a.stop()}}),p,this)}var x={read:y,create:m,update:g,patch:k,delete:w,channel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.buffers.none(),r=v(this,e),i=(0,o.eventChannel)((function(e){var n=r.on(t,(function(t){return e({snapshot:t,value:t.val()})}));return function(){return r.off(t,n)}}),n);return i},sync:_};t.default=x},9282:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getDocumentRef=t.getCollectionRef=void 0;var i=r(n(7757)),a=n(5792),o=n(7780),u=r(n(8106)),s=n(2133),c=i.default.mark(k),l=i.default.mark(w),f=i.default.mark(b),h=i.default.mark(_),d=i.default.mark(x),p=i.default.mark(E),v=i.default.mark(I),y=i.default.mark(S),m=function(e,t){return(0,u.default)(!!e.app.firestore,"Firestore isn't installed. Did you forget to `import '@firebase/firestore'`? See https://redux-saga-firebase.js.org/ for more information."),"string"===typeof t?e.app.firestore().collection(t):t};t.getCollectionRef=m;var g=function(e,t){return(0,u.default)(!!e.app.firestore,"Firestore isn't installed. Did you forget to `import '@firebase/firestore'`? See https://redux-saga-firebase.js.org/ for more information."),"string"===typeof t?e.app.firestore().doc(t):t};function k(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=m(this,e),r.next=3,(0,o.call)([n,n.add],t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),c,this)}function w(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=g(this,e),n.next=3,(0,o.call)([t,t.delete]);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),l,this)}function b(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=m(this,e),n.next=3,(0,o.call)([t,t.get]);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),f,this)}function _(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=g(this,e),n.next=3,(0,o.call)([t,t.get]);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),h,this)}function x(e,t,n){var r;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=g(this,e),i.next=3,(0,o.call)([r,r.set],t,n);case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}}),d,this)}function E(e){var t,n,r,a,u=arguments;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(t=g(this,e),n=u.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=u[a];return i.next=4,o.call.apply(void 0,[[t,t.update]].concat(r));case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}}),p,this)}function I(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.call)(this.firestore.channel,e,"collection",void 0,t.snapshotListenOptions);case 2:return n=r.sent,r.next=5,(0,o.fork)(s.syncChannel,n,t);case 5:case"end":return r.stop()}}),v,this)}function S(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.call)(this.firestore.channel,e,"document",void 0,t.snapshotListenOptions);case 2:return n=r.sent,r.next=5,(0,o.fork)(s.syncChannel,n,t);case 5:case"end":return r.stop()}}),y,this)}t.getDocumentRef=g;var T={addDocument:k,channel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collection",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.buffers.none(),r=arguments.length>3?arguments[3]:void 0,i="collection"===t?m(this,e):g(this,e),o=(0,a.eventChannel)((function(e){return r?i.onSnapshot(r,e):i.onSnapshot(e)}),n);return o},deleteDocument:w,getCollection:b,getDocument:_,setDocument:x,syncCollection:I,syncDocument:S,updateDocument:E};t.default=T},8622:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionURL=u,t.default=void 0;var i=r(n(7757)),a=n(7780),o=i.default.mark(s);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=/^https?:\/\//.test(e)?e:"https://".concat(this.region,"-").concat(this.projectId(),".cloudfunctions.net/").concat(e),r=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&");return r?"".concat(n,"?").concat(r):n}function s(e){var t,n,r,s,c,l,f,h=arguments;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=h.length>1&&void 0!==h[1]?h[1]:{},n=h.length>2&&void 0!==h[2]?h[2]:{},r=u.call(this,e,t),i.next=5,(0,a.call)(fetch,r,n);case 5:if((s=i.sent).ok){i.next=8;break}throw s;case 8:return c=s.headers.get("Content-Type"),l=c.startsWith("application/json")?s.json:s.text,i.next=12,(0,a.call)([s,l]);case 12:return f=i.sent,i.abrupt("return",f);case 14:case"end":return i.stop()}}),o,this)}var c={call:s};t.default=c},9969:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(8952)),u=r(n(5966)),s=r(n(9282)),c=r(n(8622)),l=r(n(230)),f=r(n(6692)),h=function(){function e(t){(0,i.default)(this,e),this.app=t,this.region="us-central1",this.auth={applyActionCode:o.default.applyActionCode.bind(this),channel:o.default.channel.bind(this),confirmPasswordReset:o.default.confirmPasswordReset.bind(this),createUserWithEmailAndPassword:o.default.createUserWithEmailAndPassword.bind(this),deleteProfile:o.default.deleteProfile.bind(this),linkWithPopup:o.default.linkWithPopup.bind(this),linkWithRedirect:o.default.linkWithRedirect.bind(this),sendEmailVerification:o.default.sendEmailVerification.bind(this),sendPasswordResetEmail:o.default.sendPasswordResetEmail.bind(this),signInAndRetrieveDataWithCredential:o.default.signInAndRetrieveDataWithCredential.bind(this),signInAnonymously:o.default.signInAnonymously.bind(this),signInWithCredential:o.default.signInWithCredential.bind(this),signInWithCustomToken:o.default.signInWithCustomToken.bind(this),signInWithEmailAndPassword:o.default.signInWithEmailAndPassword.bind(this),signInWithPopup:o.default.signInWithPopup.bind(this),signInWithPhoneNumber:o.default.signInWithPhoneNumber.bind(this),signInWithRedirect:o.default.signInWithRedirect.bind(this),signOut:o.default.signOut.bind(this),unlink:o.default.unlink.bind(this),updateEmail:o.default.updateEmail.bind(this),updatePassword:o.default.updatePassword.bind(this),updateProfile:o.default.updateProfile.bind(this)},this.database={read:u.default.read.bind(this),create:u.default.create.bind(this),update:u.default.update.bind(this),patch:u.default.patch.bind(this),delete:u.default.delete.bind(this),channel:u.default.channel.bind(this),sync:u.default.sync.bind(this)},this.firestore={addDocument:s.default.addDocument.bind(this),channel:s.default.channel.bind(this),deleteDocument:s.default.deleteDocument.bind(this),getCollection:s.default.getCollection.bind(this),getDocument:s.default.getDocument.bind(this),setDocument:s.default.setDocument.bind(this),syncCollection:s.default.syncCollection.bind(this),syncDocument:s.default.syncDocument.bind(this),updateDocument:s.default.updateDocument.bind(this)},this.functions={call:c.default.call.bind(this)},this.messaging={channel:l.default.channel.bind(this),syncMessages:l.default.syncMessages.bind(this),syncToken:l.default.syncToken.bind(this),tokenRefreshChannel:l.default.tokenRefreshChannel.bind(this)},this.storage={uploadFile:f.default.uploadFile.bind(this),uploadString:f.default.uploadString.bind(this),getDownloadURL:f.default.getDownloadURL.bind(this),getFileMetadata:f.default.getFileMetadata.bind(this),updateFileMetadata:f.default.updateFileMetadata.bind(this),deleteFile:f.default.deleteFile.bind(this)}}return(0,a.default)(e,[{key:"projectId",value:function(){if(this._projectId)return this._projectId;var e=this.app.options.authDomain.match(/^([a-z0-9-]+)\.firebaseapp\.com$/)[1];return this._projectId=e,e}}]),e}();t.Z=h},230:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7757)),a=n(5792),o=n(7780),u=n(2133),s=i.default.mark(l),c=i.default.mark(f);function l(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,o.call)(this.messaging.channel);case 2:return t=n.sent,n.next=5,(0,o.fork)(u.syncChannel,t,e);case 5:case"end":return n.stop()}}),s,this)}function f(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,o.call)(this.messaging.tokenRefreshChannel);case 2:return t=n.sent,n.next=5,(0,o.fork)(u.syncChannel,t,e);case 5:case"end":return n.stop()}}),c,this)}var h={channel:function(){if(this._messageChannel)return this._messageChannel;var e=this.app.messaging(),t=(0,a.eventChannel)((function(t){return e.onMessage(t)}));return this._messageChannel=t,t},syncMessages:l,syncToken:f,tokenRefreshChannel:function(){if(this._tokenRefreshChannel)return this._tokenRefreshChannel;var e=this.app.messaging(),t=(0,a.eventChannel)((function(t){return e.onTokenRefresh((function(){e.getToken().then(t)}))}));return this._tokenRefreshChannel=t,t}};t.default=h},6692:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getRef=void 0;var i=r(n(7757)),a=n(7780),o=i.default.mark(f),u=i.default.mark(h),s=i.default.mark(d),c=i.default.mark(p),l=function(e,t){return"string"===typeof t?e.app.storage().ref(t):t};function f(e){var t,n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=l(this,e),r.next=3,(0,a.call)([t,t.getDownloadURL]);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),o,this)}function h(e){var t,n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=l(this,e),r.next=3,(0,a.call)([t,t.getMetadata]);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),u,this)}function d(e,t){var n,r;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=l(this,e),i.next=3,(0,a.call)([n,n.updateMetadata],t);case 3:return r=i.sent,i.abrupt("return",r);case 5:case"end":return i.stop()}}),s,this)}function p(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=l(this,e),n.next=3,(0,a.call)([t,t.delete]);case 3:case"end":return n.stop()}}),c,this)}t.getRef=l;var v={uploadFile:function(e,t,n){return l(this,e).put(t,n)},uploadString:function(e,t,n,r){return l(this,e).putString(t,n,r)},getDownloadURL:f,getFileMetadata:h,updateFileMetadata:d,deleteFile:p};t.default=v},2133:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncChannel=u;var i=r(n(7757)),a=n(7780),o=i.default.mark(u);function u(e,t){var n,r,u,s,c;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=t.successActionCreator,r=t.failureActionCreator,u=t.transform,i.prev=1;case 2:return i.next=5,(0,a.take)(e);case 5:return s=i.sent,c=u?u(s):s,i.next=9,(0,a.put)(n(c));case 9:i.next=2;break;case 11:i.next=21;break;case 13:if(i.prev=13,i.t0=i.catch(1),!r){i.next=20;break}return i.next=18,(0,a.put)(r(i.t0));case 18:i.next=21;break;case 20:console.error("The following error has been ignored because no `failureActionCreator` has been set:",i.t0);case 21:return i.prev=21,i.next=24,(0,a.cancelled)();case 24:if(!i.sent){i.next=26;break}e.close();case 26:return i.finish(21);case 27:case"end":return i.stop()}}),o,this,[[1,13,21,27]])}},5792:function(e,t,n){"use strict";n.r(t),n.d(t,{CANCEL:function(){return r.n1},END:function(){return I},SAGA_LOCATION:function(){return r.b_},buffers:function(){return u.H},channel:function(){return T},default:function(){return Z},detach:function(){return u.I},eventChannel:function(){return C},isEnd:function(){return S},multicastChannel:function(){return N},runSaga:function(){return G},stdChannel:function(){return A}});var r=n(7408),i=n(7462),a=n(3366),o=n(5609),u=n(6867),s=n(7781);function c(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var l=c,f=[],h=0;function d(e){try{y(),e()}finally{m()}}function p(e){f.push(e),h||(y(),g())}function v(e){try{return y(),e()}finally{g()}}function y(){h++}function m(){h--}function g(){var e;for(m();!h&&void 0!==(e=f.shift());)d(e)}var k=function(e){return function(t){return e.some((function(e){return E(e)(t)}))}},w=function(e){return function(t){return e(t)}},b=function(e){return function(t){return t.type===String(e)}},_=function(e){return function(t){return t.type===e}},x=function(){return u.k};function E(e){var t="*"===e?x:(0,o.Z_)(e)?b:(0,o.IX)(e)?k:(0,o.eR)(e)?b:(0,o.Yl)(e)?w:(0,o.NA)(e)?_:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var I={type:r.sZ},S=function(e){return e&&e.type===r.sZ};function T(e){void 0===e&&(e=(0,u.e)());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(I):e.isEmpty()?(n.push(r),r.cancel=function(){(0,u.r)(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(I):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,i=e.length;r<i;r++){(0,e[r])(I)}}}}}function C(e,t){void 0===t&&(t=(0,u.n)());var n,r=!1,i=T(t),a=function(){r||(r=!0,(0,o.Yl)(n)&&n(),i.close())};return n=e((function(e){S(e)?a():i.put(e)})),n=(0,u.o)(n),r&&n(),{take:i.take,flush:i.flush,close:a}}function N(){var e,t=!1,n=[],i=n;var a=function(){i===n&&(i=n.slice())},o=function(){t=!0;var e=n=i;i=[],e.forEach((function(e){e(I)}))};return(e={})[r.AS]=!0,e.put=function(e){if(!t)if(S(e))o();else for(var a=n=i,u=0,s=a.length;u<s;u++){var c=a[u];c[r.uq](e)&&(c.cancel(),c(e))}},e.take=function(e,n){void 0===n&&(n=x),t?e(I):(e[r.uq]=n,a(),i.push(e),e.cancel=(0,u.o)((function(){a(),(0,u.r)(i,e)})))},e.close=o,e}function A(){var e=N(),t=e.put;return e.put=function(e){e[r.Nm]?t(e):p((function(){t(e)}))},e}function P(e,t){var n=e[r.n1];(0,o.Yl)(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var R,D=0,O=function(){return++D};function L(e){e.isRunning()&&e.cancel()}var M=((R={})[u.T]=function(e,t,n){var i=t.channel,a=void 0===i?e.channel:i,u=t.pattern,s=t.maybe,c=function(e){e instanceof Error?n(e,!0):!S(e)||s?n(e):n(r.EO)};try{a.take(c,(0,o.d5)(u)?E(u):null)}catch(l){return void n(l,!0)}n.cancel=c.cancel},R[u.P]=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;p((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(u){return void n(u,!0)}a&&(0,o.MC)(t)?P(t,n):n(t)}))},R[u.A]=function(e,t,n,r){var i=r.digestEffect,a=D,s=Object.keys(t);if(0!==s.length){var c=(0,u.l)(t,n);s.forEach((function(e){i(t[e],a,c[e],e)}))}else n((0,o.IX)(t)?[]:{})},R[u.R]=function(e,t,n,r){var i=r.digestEffect,a=D,s=Object.keys(t),c=(0,o.IX)(t)?(0,u.m)(s.length):{},l={},f=!1;s.forEach((function(e){var t=function(t,r){f||(r||(0,u.s)(t)?(n.cancel(),n(t,r)):(n.cancel(),f=!0,c[e]=t,n(c)))};t.cancel=u.t,l[e]=t})),n.cancel=function(){f||(f=!0,s.forEach((function(e){return l[e].cancel()})))},s.forEach((function(e){f||i(t[e],a,l[e],e)}))},R[u.C]=function(e,t,n,r){var i=t.context,a=t.fn,s=t.args,c=r.task;try{var l=a.apply(i,s);if((0,o.MC)(l))return void P(l,n);if((0,o.hZ)(l))return void H(e,l,c.context,D,(0,u.j)(a),!1,n);n(l)}catch(f){n(f,!0)}},R[u.a]=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var u=function(e,t){(0,o.sR)(e)?n(t):n(e,!0)};i.apply(r,a.concat(u)),u.cancel&&(n.cancel=u.cancel)}catch(s){n(s,!0)}},R[u.F]=function(e,t,n,r){var i=t.context,a=t.fn,s=t.args,c=t.detached,l=r.task,f=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if((0,o.hZ)(i))return i;var a=!1;return(0,u.q)((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!(0,o.MC)(i)})}))}catch(s){return(0,u.q)((function(){throw s}))}}({context:i,fn:a,args:s}),h=function(e,t){return e.isSagaIterator?{name:e.meta.name}:(0,u.j)(t)}(f,a);v((function(){var t=H(e,f,l.context,D,h,c,void 0);c?n(t):t.isRunning()?(l.queue.addTask(t),n(t)):t.isAborted()?l.queue.abort(t.error()):n(t)}))},R[u.J]=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&(0,u.r)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if((0,o.IX)(t)){if(0===t.length)return void n([]);var s=(0,u.l)(t,n);t.forEach((function(e,t){a(e,s[t])}))}else a(t,n)},R[u.b]=function(e,t,n,i){var a=i.task;t===r.sC?L(a):(0,o.IX)(t)?t.forEach(L):L(t),n()},R[u.S]=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(a){n(a,!0)}},R[u.d]=function(e,t,n){var r=t.pattern,i=T(t.buffer),a=E(r),o=function t(n){S(n)||e.channel.take(t,a),i.put(n)},u=i.close;i.close=function(){o.cancel(),u()},e.channel.take(o,a),n(i)},R[u.f]=function(e,t,n,r){n(r.task.isCancelled())},R[u.g]=function(e,t,n){t.flush(n)},R[u.G]=function(e,t,n,r){n(r.task.context[t])},R[u.h]=function(e,t,n,r){var i=r.task;(0,u.p)(i.context,t),n()},R);function F(e,t){return e+"?"+t}function U(e){var t=e.name,n=e.location;return n?t+"  "+F(n.fileName,n.lineNumber):t}function j(e){var t=(0,u.u)((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var V=null,q=[],B=function(e){e.crashedEffect=V,q.push(e)},z=function(){V=null,q.length=0},W=function(){var e=q[0],t=q.slice(1),n=e.crashedEffect?function(e){var t=(0,u.v)(e);return t?t.code+"  "+F(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+U(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+U(e.meta)})),[j(q)]).join("\n")};function K(e,t,n,i,a,o,s){var c;void 0===s&&(s=u.t);var f,h,d=0,p=null,v=[],y=Object.create(n),m=function(e,t,n){var r,i=[],a=!1;function o(e){t(),c(),n(e,!0)}function s(t){i.push(t),t.cont=function(s,c){a||((0,u.r)(i,t),t.cont=u.t,c?o(s):(t===e&&(r=s),i.length||(a=!0,n(r))))}}function c(){a||(a=!0,i.forEach((function(e){e.cont=u.t,e.cancel()})),i=[])}return s(e),{addTask:s,cancelAll:c,abort:o,getTasks:function(){return i}}}(t,(function(){v.push.apply(v,m.getTasks().map((function(e){return e.meta.name})))}),g);function g(t,n){if(n){if(d=2,B({meta:a,cancelledTasks:v}),k.isRoot){var i=W();z(),e.onError(t,{sagaStack:i})}h=t,p&&p.reject(t)}else t===r.Wd?d=1:1!==d&&(d=3),f=t,p&&p.resolve(t);k.cont(t,n),k.joiners.forEach((function(e){e.cb(t,n)})),k.joiners=null}var k=((c={})[r.Cs]=!0,c.id=i,c.meta=a,c.isRoot=o,c.context=y,c.joiners=[],c.queue=m,c.cancel=function(){0===d&&(d=1,m.cancelAll(),g(r.Wd,!1))},c.cont=s,c.end=g,c.setContext=function(e){(0,u.p)(y,e)},c.toPromise=function(){return p||(p=l(),2===d?p.reject(h):0!==d&&p.resolve(f)),p.promise},c.isRunning=function(){return 0===d},c.isCancelled=function(){return 1===d||0===d&&1===t.status},c.isAborted=function(){return 2===d},c.result=function(){return f},c.error=function(){return h},c);return k}function H(e,t,n,i,a,s,c){var l=e.finalizeRunEffect((function(t,n,i){if((0,o.MC)(t))P(t,i);else if((0,o.hZ)(t))H(e,t,h.context,n,a,!1,i);else if(t&&t[r.IO]){(0,M[t.type])(e,t.payload,i,d)}else i(t)}));p.cancel=u.t;var f={meta:a,cancel:function(){0===f.status&&(f.status=1,p(r.Wd))},status:0},h=K(e,f,n,i,a,s,c),d={task:h,digestEffect:v};return c&&(c.cancel=h.cancel),p(),h;function p(e,n){try{var a;n?(a=t.throw(e),z()):(0,u.y)(e)?(f.status=1,p.cancel(),a=(0,o.Yl)(t.return)?t.return(r.Wd):{done:!0,value:r.Wd}):a=(0,u.z)(e)?(0,o.Yl)(t.return)?t.return():{done:!0}:t.next(e),a.done?(1!==f.status&&(f.status=3),f.cont(a.value)):v(a.value,i,p)}catch(s){if(1===f.status)throw s;f.status=2,f.cont(s,!0)}}function v(t,n,r,i){void 0===i&&(i="");var a,o=O();function s(n,i){a||(a=!0,r.cancel=u.t,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&function(e){V=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),s.cancel=u.t,r.cancel=function(){a||(a=!0,s.cancel(),s.cancel=u.t,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},l(t,o,s)}}function G(e,t){var n=e.channel,r=void 0===n?A():n,i=e.dispatch,a=e.getState,o=e.context,c=void 0===o?{}:o,l=e.sagaMonitor,f=e.effectMiddlewares,h=e.onError,d=void 0===h?u.B:h;for(var p=arguments.length,y=new Array(p>2?p-2:0),m=2;m<p;m++)y[m-2]=arguments[m];var g=t.apply(void 0,y);var k,w=O();if(l&&(l.rootSagaStarted=l.rootSagaStarted||u.t,l.effectTriggered=l.effectTriggered||u.t,l.effectResolved=l.effectResolved||u.t,l.effectRejected=l.effectRejected||u.t,l.effectCancelled=l.effectCancelled||u.t,l.actionDispatched=l.actionDispatched||u.t,l.rootSagaStarted({effectId:w,saga:t,args:y})),f){var b=s.qC.apply(void 0,f);k=function(e){return function(t,n,r){return b((function(t){return e(t,n,r)}))(t)}}}else k=u.E;var _={channel:r,dispatch:(0,u.D)(i),getState:a,sagaMonitor:l,onError:d,finalizeRunEffect:k};return v((function(){var e=H(_,g,c,w,(0,u.j)(t),!0,void 0);return l&&l.effectResolved(w,e),e}))}var Q=function(e){var t,n=void 0===e?{}:e,r=n.context,o=void 0===r?{}:r,s=n.channel,c=void 0===s?A():s,l=n.sagaMonitor,f=(0,a.Z)(n,["context","channel","sagaMonitor"]);function h(e){var n=e.getState,r=e.dispatch;return t=G.bind(null,(0,i.Z)({},f,{context:o,channel:c,dispatch:r,getState:n,sagaMonitor:l})),function(e){return function(t){l&&l.actionDispatched&&l.actionDispatched(t);var n=e(t);return c.put(t),n}}}return h.run=function(){return t.apply(void 0,arguments)},h.setContext=function(e){(0,u.p)(o,e)},h},Z=Q},7780:function(e,t,n){"use strict";n.r(t),n.d(t,{actionChannel:function(){return i.O},all:function(){return i._},apply:function(){return i.$},call:function(){return i.N},cancel:function(){return i.M},cancelled:function(){return i.a4},cps:function(){return i.a0},debounce:function(){return w},delay:function(){return i.U},effectTypes:function(){return i.W},flush:function(){return i.a5},fork:function(){return i.L},getContext:function(){return i.a6},join:function(){return i.a2},put:function(){return i.Y},putResolve:function(){return i.Z},race:function(){return i.V},retry:function(){return k},select:function(){return i.a3},setContext:function(){return i.a7},spawn:function(){return i.a1},take:function(){return i.K},takeEvery:function(){return v},takeLatest:function(){return y},takeLeading:function(){return m},takeMaybe:function(){return i.X},throttle:function(){return g}});var r=n(5609),i=n(6867),a=function(e){return{done:!0,value:e}},o={};function u(e){return(0,r.CE)(e)?"channel":(0,r.eR)(e)?String(e):(0,r.Yl)(e)?e.name:String(e)}function s(e,t,n){var r,u,s,c=t;function l(t,n){if(c===o)return a(t);if(n&&!u)throw c=o,n;r&&r(t);var i=n?e[u](n):e[c]();return c=i.nextState,s=i.effect,r=i.stateUpdater,u=i.errorState,c===o?a(t):s}return(0,i.q)(l,(function(e){return l(null,e)}),n)}function c(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,c={done:!1,value:(0,i.K)(e)},l=function(e){return{done:!1,value:i.L.apply(void 0,[t].concat(r,[e]))}},f=function(e){return o=e};return s({q1:function(){return{nextState:"q2",effect:c,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:l(o)}}},"q1","takeEvery("+u(e)+", "+t.name+")")}function l(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,c,l={done:!1,value:(0,i.K)(e)},f=function(e){return{done:!1,value:i.L.apply(void 0,[t].concat(r,[e]))}},h=function(e){return{done:!1,value:(0,i.M)(e)}},d=function(e){return o=e},p=function(e){return c=e};return s({q1:function(){return{nextState:"q2",effect:l,stateUpdater:p}},q2:function(){return o?{nextState:"q3",effect:h(o)}:{nextState:"q1",effect:f(c),stateUpdater:d}},q3:function(){return{nextState:"q1",effect:f(c),stateUpdater:d}}},"q1","takeLatest("+u(e)+", "+t.name+")")}function f(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,c={done:!1,value:(0,i.K)(e)},l=function(e){return{done:!1,value:i.N.apply(void 0,[t].concat(r,[e]))}},f=function(e){return o=e};return s({q1:function(){return{nextState:"q2",effect:c,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:l(o)}}},"q1","takeLeading("+u(e)+", "+t.name+")")}function h(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];var c,l,f={done:!1,value:(0,i.O)(t,(0,i.Q)(1))},h=function(){return{done:!1,value:(0,i.K)(l)}},d=function(e){return{done:!1,value:i.L.apply(void 0,[n].concat(a,[e]))}},p={done:!1,value:(0,i.U)(e)},v=function(e){return c=e},y=function(e){return l=e};return s({q1:function(){return{nextState:"q2",effect:f,stateUpdater:y}},q2:function(){return{nextState:"q3",effect:h(),stateUpdater:v}},q3:function(){return{nextState:"q4",effect:d(c)}},q4:function(){return{nextState:"q2",effect:p}}},"q1","throttle("+u(t)+", "+n.name+")")}function d(e,t,n){for(var r=e,a=arguments.length,u=new Array(a>3?a-3:0),c=3;c<a;c++)u[c-3]=arguments[c];var l={done:!1,value:i.N.apply(void 0,[n].concat(u))},f={done:!1,value:(0,i.U)(t)};return s({q1:function(){return{nextState:"q2",effect:l,errorState:"q10"}},q2:function(){return{nextState:o}},q10:function(e){if((r-=1)<=0)throw e;return{nextState:"q1",effect:f}}},"q1","retry("+n.name+")")}function p(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];var c,l,f={done:!1,value:(0,i.K)(t)},h={done:!1,value:(0,i.V)({action:(0,i.K)(t),debounce:(0,i.U)(e)})},d=function(e){return{done:!1,value:i.L.apply(void 0,[n].concat(a,[e]))}},p=function(e){return{done:!1,value:e}},v=function(e){return c=e},y=function(e){return l=e};return s({q1:function(){return{nextState:"q2",effect:f,stateUpdater:v}},q2:function(){return{nextState:"q3",effect:h,stateUpdater:y}},q3:function(){return l.debounce?{nextState:"q1",effect:d(c)}:{nextState:"q2",effect:p(l.action),stateUpdater:v}}},"q1","debounce("+u(t)+", "+n.name+")")}function v(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.L.apply(void 0,[c,e,t].concat(r))}function y(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.L.apply(void 0,[l,e,t].concat(r))}function m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.L.apply(void 0,[f,e,t].concat(r))}function g(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return i.L.apply(void 0,[h,e,t,n].concat(a))}function k(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return i.N.apply(void 0,[d,e,t,n].concat(a))}function w(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return i.L.apply(void 0,[p,e,t,n].concat(a))}},7781:function(e,t,n){"use strict";n.d(t,{MT:function(){return c},UY:function(){return l},md:function(){return h},qC:function(){return f}});var r=n(1413);function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var a="function"===typeof Symbol&&Symbol.observable||"@@observable",o=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function s(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(i(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(i(1));return n(c)(e,t)}if("function"!==typeof e)throw new Error(i(2));var o=e,l=t,f=[],h=f,d=!1;function p(){h===f&&(h=f.slice())}function v(){if(d)throw new Error(i(3));return l}function y(e){if("function"!==typeof e)throw new Error(i(4));if(d)throw new Error(i(5));var t=!0;return p(),h.push(e),function(){if(t){if(d)throw new Error(i(6));t=!1,p();var n=h.indexOf(e);h.splice(n,1),f=null}}}function m(e){if(!s(e))throw new Error(i(7));if("undefined"===typeof e.type)throw new Error(i(8));if(d)throw new Error(i(9));try{d=!0,l=o(l,e)}finally{d=!1}for(var t=f=h,n=0;n<t.length;n++){(0,t[n])()}return e}function g(e){if("function"!==typeof e)throw new Error(i(10));o=e,m({type:u.REPLACE})}function k(){var e,t=y;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(i(11));function n(){e.next&&e.next(v())}return n(),{unsubscribe:t(n)}}})[a]=function(){return this},e}return m({type:u.INIT}),(r={dispatch:m,subscribe:y,getState:v,replaceReducer:g})[a]=k,r}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"===typeof e[a]&&(n[a]=e[a])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:u.INIT}))throw new Error(i(12));if("undefined"===typeof n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(n)}catch(c){o=c}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},u=0;u<s.length;u++){var c=s[u],l=n[c],f=e[c],h=l(f,t);if("undefined"===typeof h){t&&t.type;throw new Error(i(14))}a[c]=h,r=r||h!==f}return(r=r||s.length!==Object.keys(e).length)?a:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(i(15))},o={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map((function(e){return e(o)}));return a=f.apply(void 0,u)(n.dispatch),(0,r.Z)((0,r.Z)({},n),{},{dispatch:a})}}}},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,I=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?x():(E=!1,I=null)}}else E=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){m(A,0)};function D(e){I=e,E||(E=!0,x())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},7595:function(e,t,n){"use strict";var r=n(2791),i=n(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".28cb0dcd.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="my-app:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/chipadmin/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkmy_app=self.webpackChunkmy_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Tn},SDK_VERSION:function(){return Zr},_DEFAULT_ENTRY_NAME:function(){return Mr},_addComponent:function(){return Vr},_addOrOverwriteComponent:function(){return qr},_apps:function(){return Ur},_clearComponents:function(){return Kr},_components:function(){return jr},_getProvider:function(){return zr},_registerComponent:function(){return Br},_removeServiceInstance:function(){return Wr},deleteApp:function(){return Xr},getApp:function(){return $r},getApps:function(){return Jr},initializeApp:function(){return Yr},onLog:function(){return ni},registerVersion:function(){return ti},setLogLevel:function(){return ri}});var t=n(2791),r=n(1250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}var c=n(7248),l=n(327),f=n(4164);var h=function(e){e()},d=function(){return h},p=t.createContext(null);function v(){return(0,t.useContext)(p)}var y=function(){throw new Error("uSES not initialized!")},m=y,g=function(e,t){return e===t};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=e===p?v:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=m(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var w=k();n(2110),n(6900);var b={notify:function(){},get:function(){return[]}};function _(e,t){var n,r=b;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=d(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=b)},getListeners:function(){return r}};return o}var x=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var E=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=_(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);x((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||p;return t.createElement(s.Provider,{value:o},i)};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=e===p?v:function(){return(0,t.useContext)(e)};return function(){return n().store}}var S=I();function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=e===p?S:I(e);return function(){return t().dispatch}}var C,N=T();!function(e){m=e}(l.useSyncExternalStoreWithSelector),function(e){e}(c.useSyncExternalStore),C=f.unstable_batchedUpdates,h=C;var A="POST_ORDER.POST_ORDER",P="POST_ORDER.DONE",R="POST_ORDER.LOADING",D=function(){return{type:P}},O=function(){return{type:R}},L=n(3366);function M(e,t){if(null==e)return{};var n,r,i=(0,L.Z)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var F=n(1413),U=n(1694),j=n.n(U),V=!("undefined"===typeof window||!window.document||!window.document.createElement),q=!1,B=!1;try{var z={get passive(){return q=!0},get once(){return B=q=!0}};V&&(window.addEventListener("test",z,z),window.removeEventListener("test",z,!0))}catch(mF){}var W=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!B){var i=r.once,a=r.capture,o=n;!B&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,q?r:a)}e.addEventListener(t,n,r)};function K(e){return e&&e.ownerDocument||document}var H,G=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};function Q(e){if((!H&&0!==H||e)&&V){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),H=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return H}var Z=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function Y(e){var n=Z(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var $=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var J=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=$(e),r=$(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};function X(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}function ee(e,t){return function(e){var t=K(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var te=/([A-Z])/g;var ne=/^ms-/;function re(e){return function(e){return e.replace(te,"-$1").toLowerCase()}(e).replace(ne,"-ms-")}var ie=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var ae=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(re(t))||ee(e).getPropertyValue(re(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!ie.test(e))}(i)?n+=re(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(re(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};var oe=function(e,t,n,r){return W(e,t,n,r),function(){G(e,t,n,r)}};function ue(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=oe(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function se(e,t,n,r){null==n&&(n=function(e){var t=ae(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=ue(e,n,r),a=oe(e,"transitionend",t);return function(){i(),a()}}function ce(e){void 0===e&&(e=K());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(mF){return e.body}}function le(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function fe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function he(e){return function(e){if(Array.isArray(e))return a(e)}(e)||fe(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var de=n(4942);function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&ve(e.prototype,t),n&&ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function me(e){return"".concat("data-rr-ui-").concat(e)}var ge=me("modal-open"),ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,a=t.isRTL,o=void 0!==a&&a;pe(this,e),this.handleContainerOverflow=i,this.isRTL=o,this.modals=[],this.ownerDocument=n}return ye(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=(0,de.Z)({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(ae(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(ge,""),ae(r,t)}},{key:"reset",value:function(){var e=this;he(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(ge),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),we=ke,be=(0,t.createContext)(V?window:void 0);be.Provider;function _e(){return(0,t.useContext)(be)}var xe=function(e,t){var n;return V?null==e?(t||K()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var Ee,Ie=n(184),Se=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Te(e){var n=_e(),r=e||function(e){return Ee||(Ee=new we({ownerDocument:null==e?void 0:e.document})),Ee}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return r.add(i.current)},remove:function(){return r.remove(i.current)},isTopModal:function(){return r.isTopModal(i.current)},setDialogRef:(0,t.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((function(e){i.current.backdrop=e}),[])})}var Ce=(0,t.forwardRef)((function(e,n){var r=e.show,i=void 0!==r&&r,a=e.role,o=void 0===a?"dialog":a,u=e.className,c=e.style,l=e.children,h=e.backdrop,d=void 0===h||h,p=e.keyboard,v=void 0===p||p,y=e.onBackdropClick,m=e.onEscapeKeyDown,g=e.transition,k=e.backdropTransition,w=e.autoFocus,b=void 0===w||w,_=e.enforceFocus,x=void 0===_||_,E=e.restoreFocus,I=void 0===E||E,S=e.restoreFocusOptions,T=e.renderDialog,C=e.renderBackdrop,N=void 0===C?function(e){return(0,Ie.jsx)("div",Object.assign({},e))}:C,A=e.manager,P=e.container,R=e.onShow,D=e.onHide,O=void 0===D?function(){}:D,L=e.onExit,M=e.onExited,F=e.onExiting,U=e.onEnter,j=e.onEntering,q=e.onEntered,B=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Se),z=function(e,n){var r=_e(),i=s((0,t.useState)((function(){return xe(e,null==r?void 0:r.document)})),2),a=i[0],o=i[1];if(!a){var u=xe(e);u&&o(u)}return(0,t.useEffect)((function(){n&&a&&n(a)}),[n,a]),(0,t.useEffect)((function(){var t=xe(e);t!==a&&o(t)}),[e,a]),a}(P),W=Te(A),K=function(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),n.current}(),H=function(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){n.current=e})),n.current}(i),G=s((0,t.useState)(!i),2),Q=G[0],Z=G[1],$=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return W}),[W]),V&&!H&&i&&($.current=ce()),g||i||Q?i&&Q&&Z(!1):Z(!0);var J=Y((function(){if(W.add(),ae.current=oe(document,"keydown",re),ie.current=oe(document,"focus",(function(){return setTimeout(te)}),!0),R&&R(),b){var e=ce(document);W.dialog&&e&&!le(W.dialog,e)&&($.current=e,W.dialog.focus())}})),ee=Y((function(){var e;(W.remove(),null==ae.current||ae.current(),null==ie.current||ie.current(),I)&&(null==(e=$.current)||null==e.focus||e.focus(S),$.current=null)}));(0,t.useEffect)((function(){i&&z&&J()}),[i,z,J]),(0,t.useEffect)((function(){Q&&ee()}),[Q,ee]),X((function(){ee()}));var te=Y((function(){if(x&&K()&&W.isTopModal()){var e=ce();W.dialog&&e&&!le(W.dialog,e)&&W.dialog.focus()}})),ne=Y((function(e){e.target===e.currentTarget&&(null==y||y(e),!0===d&&O())})),re=Y((function(e){v&&27===e.keyCode&&W.isTopModal()&&(null==m||m(e),e.defaultPrevented||O())})),ie=(0,t.useRef)(),ae=(0,t.useRef)(),ue=g;if(!z||!(i||ue&&!Q))return null;var se=Object.assign({role:o,ref:W.setDialogRef,"aria-modal":"dialog"===o||void 0},B,{style:c,className:u,tabIndex:-1}),fe=T?T(se):(0,Ie.jsx)("div",Object.assign({},se,{children:t.cloneElement(l,{role:"document"})}));ue&&(fe=(0,Ie.jsx)(ue,{appear:!0,unmountOnExit:!0,in:!!i,onExit:L,onExiting:F,onExited:function(){Z(!0),null==M||M.apply(void 0,arguments)},onEnter:U,onEntering:j,onEntered:q,children:fe}));var he=null;if(d){var de=k;he=N({ref:W.setBackdropRef,onClick:ne}),de&&(he=(0,Ie.jsx)(de,{appear:!0,in:!!i,children:he}))}return(0,Ie.jsx)(Ie.Fragment,{children:f.createPortal((0,Ie.jsxs)(Ie.Fragment,{children:[he,fe]}),z)})}));Ce.displayName="Modal";var Ne=Object.assign(Ce,{Manager:we});function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function Pe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}function Re(){return Re="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Pe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Re.apply(this,arguments)}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function Oe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}function Le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(mF){return!1}}function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e,t){if(t&&("object"===Me(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fe(e)}function je(e){var t=Le();return function(){var n,r=Ae(e);if(t){var i=Ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ue(this,n)}}var Ve=Function.prototype.bind.call(Function.prototype.call,[].slice);function qe(e,t){return Ve(e.querySelectorAll(t))}function Be(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var ze,We=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ke=".sticky-top",He=".navbar-toggler",Ge=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,ae(t,(0,de.Z)({},e,"".concat(parseFloat(ae(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],ae(t,(0,de.Z)({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;Re(Ae(n.prototype),"setContainerStyle",this).call(this,e);var r,i,a=this.getElement();if(i="modal-open",(r=a).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";qe(a,We).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),qe(a,Ke).forEach((function(n){return t.adjustAndStore(u,n,-e.scrollBarWidth)})),qe(a,He).forEach((function(n){return t.adjustAndStore(u,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;Re(Ae(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,a=this.getElement();i="modal-open",(r=a).classList?r.classList.remove(i):"string"===typeof r.className?r.className=Be(r.className,i):r.setAttribute("class",Be(r.className&&r.className.baseVal||"",i));var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";qe(a,We).forEach((function(e){return t.restore(o,e)})),qe(a,Ke).forEach((function(e){return t.restore(u,e)})),qe(a,He).forEach((function(e){return t.restore(u,e)}))}}]),n}(we);var Qe=!1,Ze=t.createContext(null),Ye="unmounted",$e="exited",Je="entering",Xe="entered",et="exiting",tt=function(e){var n,r;function i(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=$e,r.appearStatus=Je):i=Xe:i=t.unmountOnExit||t.mountOnEnter?Ye:$e,r.state={status:i},r.nextCallback=null,r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,De(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Ye?{status:$e}:null};var a=i.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Je&&n!==Xe&&(t=Je):n!==Je&&n!==Xe||(t=et)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Je?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===$e&&this.setState({status:Ye})},a.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[f.findDOMNode(this),r],a=i[0],o=i[1],u=this.getTimeouts(),s=r?u.appear:u.enter;!e&&!n||Qe?this.safeSetState({status:Xe},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:Je},(function(){t.props.onEntering(a,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:Xe},(function(){t.props.onEntered(a,o)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:f.findDOMNode(this);t&&!Qe?(this.props.onExit(r),this.safeSetState({status:et},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:$e},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:$e},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:f.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===Ye)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,L.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Ze.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},i}(t.Component);function nt(){}tt.contextType=Ze,tt.propTypes={},tt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:nt,onEntering:nt,onEntered:nt,onExit:nt,onExiting:nt,onExited:nt},tt.UNMOUNTED=Ye,tt.EXITED=$e,tt.ENTERING=Je,tt.ENTERED=Xe,tt.EXITING=et;var rt=tt;function it(e,t){var n=ae(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function at(e,t){var n=it(e,"transitionDuration"),r=it(e,"transitionDelay"),i=se(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var ot,ut=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],st=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,u=e.onExiting,s=e.onExited,c=e.addEndListener,l=e.children,h=e.childRef,d=M(e,ut),p=(0,t.useRef)(null),v=J(p,h),y=function(e){var t;v((t=e)&&"setState"in t?f.findDOMNode(t):null!=t?t:null)},m=function(e){return function(t){e&&p.current&&e(p.current,t)}},g=(0,t.useCallback)(m(r),[r]),k=(0,t.useCallback)(m(i),[i]),w=(0,t.useCallback)(m(a),[a]),b=(0,t.useCallback)(m(o),[o]),_=(0,t.useCallback)(m(u),[u]),x=(0,t.useCallback)(m(s),[s]),E=(0,t.useCallback)(m(c),[c]);return(0,Ie.jsx)(rt,(0,F.Z)((0,F.Z)({ref:n},d),{},{onEnter:g,onEntered:w,onEntering:k,onExit:b,onExited:x,onExiting:_,addEndListener:E,nodeRef:p,children:"function"===typeof l?function(e,t){return l(e,(0,F.Z)((0,F.Z)({},t),{},{ref:y}))}:t.cloneElement(l,{ref:y})}))})),ct=st,lt=["className","children","transitionClasses"],ft=(ot={},(0,de.Z)(ot,Je,"show"),(0,de.Z)(ot,Xe,"show"),ot),ht=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,u=M(e,lt),s=(0,t.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==u.onEnter||u.onEnter(e,t)}),[u]);return(0,Ie.jsx)(ct,(0,F.Z)((0,F.Z)({ref:n,addEndListener:at},u),{},{onEnter:s,childRef:i.ref,children:function(e,n){return t.cloneElement(i,(0,F.Z)((0,F.Z)({},n),{},{className:j()("fade",r,i.props.className,ft[e],o[e])}))}}))}));ht.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},ht.displayName="Fade";var dt=ht,pt=/-(.)/g;var vt=["xxl","xl","lg","md","sm","xs"],yt=t.createContext({prefixes:{},breakpoints:vt});yt.Consumer,yt.Provider;function mt(e,n){var r=(0,t.useContext)(yt).prefixes;return e||r[n]||n}var gt=["className","bsPrefix","as"],kt=function(e){return e[0].toUpperCase()+function(e){return e.replace(pt,(function(e,t){return t.toUpperCase()}))}(e).slice(1)};function wt(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?kt(e):r,a=n.Component,o=n.defaultProps,u=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,o=t.as,u=void 0===o?a||"div":o,s=M(t,gt),c=mt(i,e);return(0,Ie.jsx)(u,(0,F.Z)({ref:n,className:j()(r,c)},s))}));return u.defaultProps=o,u.displayName=i,u}var bt=wt("modal-body"),_t=t.createContext({onHide:function(){}}),xt=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],Et=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.contentClassName,a=e.centered,o=e.size,u=e.fullscreen,s=e.children,c=e.scrollable,l=M(e,xt);n=mt(n,"modal");var f="".concat(n,"-dialog"),h="string"===typeof u?"".concat(n,"-fullscreen-").concat(u):"".concat(n,"-fullscreen");return(0,Ie.jsx)("div",(0,F.Z)((0,F.Z)({},l),{},{ref:t,className:j()(f,r,o&&"".concat(n,"-").concat(o),a&&"".concat(f,"-centered"),c&&"".concat(f,"-scrollable"),u&&h),children:(0,Ie.jsx)("div",{className:j()("".concat(n,"-content"),i),children:s})}))}));Et.displayName="ModalDialog";var It=Et,St=wt("modal-footer"),Tt=n(2007),Ct=n.n(Tt),Nt=["className","variant"],At={"aria-label":Ct().string,onClick:Ct().func,variant:Ct().oneOf(["white"])},Pt=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=M(e,Nt);return(0,Ie.jsx)("button",(0,F.Z)({ref:t,type:"button",className:j()("btn-close",r&&"btn-close-".concat(r),n)},i))}));Pt.displayName="CloseButton",Pt.propTypes=At,Pt.defaultProps={"aria-label":"Close"};var Rt=Pt,Dt=["closeLabel","closeVariant","closeButton","onHide","children"],Ot=t.forwardRef((function(e,n){var r=e.closeLabel,i=e.closeVariant,a=e.closeButton,o=e.onHide,u=e.children,s=M(e,Dt),c=(0,t.useContext)(_t),l=Y((function(){null==c||c.onHide(),null==o||o()}));return(0,Ie.jsxs)("div",(0,F.Z)((0,F.Z)({ref:n},s),{},{children:[u,a&&(0,Ie.jsx)(Rt,{"aria-label":r,variant:i,onClick:l})]}))}));Ot.defaultProps={closeLabel:"Close",closeButton:!1};var Lt=Ot,Mt=["bsPrefix","className"],Ft=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=M(e,Mt);return n=mt(n,"modal-header"),(0,Ie.jsx)(Lt,(0,F.Z)((0,F.Z)({ref:t},i),{},{className:j()(r,n)}))}));Ft.displayName="ModalHeader",Ft.defaultProps={closeLabel:"Close",closeButton:!1};var Ut,jt=Ft,Vt=(Ut="h4",t.forwardRef((function(e,t){return(0,Ie.jsx)("div",(0,F.Z)((0,F.Z)({},e),{},{ref:t,className:j()(e.className,Ut)}))}))),qt=wt("modal-title",{Component:Vt}),Bt=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"],zt={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:It};function Wt(e){return(0,Ie.jsx)(dt,(0,F.Z)((0,F.Z)({},e),{},{timeout:null}))}function Kt(e){return(0,Ie.jsx)(dt,(0,F.Z)((0,F.Z)({},e),{},{timeout:null}))}var Ht=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.style,o=e.dialogClassName,u=e.contentClassName,c=e.children,l=e.dialogAs,f=e["aria-labelledby"],h=e["aria-describedby"],d=e["aria-label"],p=e.show,v=e.animation,y=e.backdrop,m=e.keyboard,g=e.onEscapeKeyDown,k=e.onShow,w=e.onHide,b=e.container,_=e.autoFocus,x=e.enforceFocus,E=e.restoreFocus,I=e.restoreFocusOptions,S=e.onEntered,T=e.onExit,C=e.onExiting,N=e.onEnter,A=e.onEntering,P=e.onExited,R=e.backdropClassName,D=e.manager,O=M(e,Bt),L=s((0,t.useState)({}),2),U=L[0],q=L[1],B=s((0,t.useState)(!1),2),z=B[0],H=B[1],Z=(0,t.useRef)(!1),$=(0,t.useRef)(!1),ee=(0,t.useRef)(null),te=s((0,t.useState)(null),2),ne=te[0],re=te[1],ie=J(n,re),ae=Y(w),oe="rtl"===(0,t.useContext)(yt).dir;r=mt(r,"modal");var ue=(0,t.useMemo)((function(){return{onHide:ae}}),[ae]);function ce(){return D||function(e){return ze||(ze=new Ge(e)),ze}({isRTL:oe})}function le(e){if(V){var t=ce().getScrollbarWidth()>0,n=e.scrollHeight>K(e).documentElement.clientHeight;q({paddingRight:t&&!n?Q():void 0,paddingLeft:!t&&n?Q():void 0})}}var fe=Y((function(){ne&&le(ne.dialog)}));X((function(){G(window,"resize",fe),null==ee.current||ee.current()}));var he=function(){Z.current=!0},de=function(e){Z.current&&ne&&e.target===ne.dialog&&($.current=!0),Z.current=!1},pe=function(){H(!0),ee.current=se(ne.dialog,(function(){H(!1)}))},ve=function(e){"static"!==y?$.current||e.target!==e.currentTarget?$.current=!1:null==w||w():function(e){e.target===e.currentTarget&&pe()}(e)},ye=(0,t.useCallback)((function(e){return(0,Ie.jsx)("div",(0,F.Z)((0,F.Z)({},e),{},{className:j()("".concat(r,"-backdrop"),R,!v&&"show")}))}),[v,R,r]),me=(0,F.Z)((0,F.Z)({},a),U);me.display="block";return(0,Ie.jsx)(_t.Provider,{value:ue,children:(0,Ie.jsx)(Ne,{show:p,ref:ie,backdrop:y,container:b,keyboard:!0,autoFocus:_,enforceFocus:x,restoreFocus:E,restoreFocusOptions:I,onEscapeKeyDown:function(e){m||"static"!==y?m&&g&&g(e):(e.preventDefault(),pe())},onShow:k,onHide:w,onEnter:function(e,t){e&&le(e),null==N||N(e,t)},onEntering:function(e,t){null==A||A(e,t),W(window,"resize",fe)},onEntered:S,onExit:function(e){null==ee.current||ee.current(),null==T||T(e)},onExiting:C,onExited:function(e){e&&(e.style.display=""),null==P||P(e),G(window,"resize",fe)},manager:ce(),transition:v?Wt:void 0,backdropTransition:v?Kt:void 0,renderBackdrop:ye,renderDialog:function(e){return(0,Ie.jsx)("div",(0,F.Z)((0,F.Z)({role:"dialog"},e),{},{style:me,className:j()(i,r,z&&"".concat(r,"-static")),onClick:y?ve:void 0,onMouseUp:de,"aria-label":d,"aria-labelledby":f,"aria-describedby":h,children:(0,Ie.jsx)(l,(0,F.Z)((0,F.Z)({},O),{},{onMouseDown:he,className:o,contentClassName:u,children:c}))}))}})})}));Ht.displayName="Modal",Ht.defaultProps=zt;var Gt=Object.assign(Ht,{Body:bt,Header:jt,Title:qt,Footer:St,Dialog:It,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Qt=["bsPrefix","variant","animation","size","as","className"],Zt=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,i=e.animation,a=e.size,o=e.as,u=void 0===o?"div":o,s=e.className,c=M(e,Qt);n=mt(n,"spinner");var l="".concat(n,"-").concat(i);return(0,Ie.jsx)(u,(0,F.Z)((0,F.Z)({ref:t},c),{},{className:j()(s,l,a&&"".concat(l,"-").concat(a),r&&"text-".concat(r))}))}));Zt.displayName="Spinner";var Yt=Zt,$t={done:!1,loading:!0},Jt="PRODUCTS.GET_PRODUCTS",Xt="PRODUCTS.FETCH_PRODUCTS",en=function(e){return{type:Jt,payload:e}},tn=function(){return{type:Xt}};function nn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function rn(e,t,n){return rn=Le()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&De(i,n.prototype),i},rn.apply(null,arguments)}function an(e){var t="function"===typeof Map?new Map:void 0;return an=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return rn(e,arguments,Ae(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),De(n,e)},an(e)}var on=!1,un=!1,sn="${JSCORE_VERSION}",cn=function(e,t){if(!e)throw ln(t)},ln=function(e){return new Error("Firebase Database ("+sn+") INTERNAL ASSERT FAILED: "+e)},fn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},hn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},dn=function(e){var t=fn(e);return hn.encodeByteArray(t,!0)},pn=function(e){return dn(e).replace(/\./g,"")},vn=function(e){try{return hn.decodeString(e,!0)}catch(mF){console.error("base64Decode failed: ",mF)}return null};function yn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=yn(e[n],t[n]));return e}var mn=function(){function e(){var t=this;pe(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ye(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function gn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[pn(JSON.stringify({alg:"none",type:"JWT"})),pn(JSON.stringify(a)),""].join(".")}function kn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function wn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function bn(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(mF){return!1}}function _n(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function xn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function En(){var e=kn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function In(){return!0===on||!0===un}function Sn(){return"object"===typeof indexedDB}var Tn=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Fe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Fe(a),Cn.prototype.create),a}return ye(n)}(an(Error)),Cn=function(){function e(t,n,r){pe(this,e),this.service=t,this.serviceName=n,this.errors=r}return ye(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Nn(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Tn(n,a,t);return o}}]),e}();function Nn(e,t){return e.replace(An,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var An=/\{\$([^}]+)}/g;function Pn(e){return JSON.parse(e)}function Rn(e){return JSON.stringify(e)}var Dn=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Pn(vn(a[0])||""),n=Pn(vn(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(mF){}return{header:t,claims:n,data:r,signature:i}};function On(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ln(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Mn(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Fn(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Un(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(jn(u)&&jn(s)){if(!Un(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function jn(e){return null!==e&&"object"===typeof e}function Vn(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function qn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Bn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var zn=function(){function e(){pe(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return ye(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Wn(e,t){var n=new Kn(e,t);return n.subscribe.bind(n)}var Kn=function(){function e(t,n){var r=this;pe(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ye(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=nn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Hn),void 0===r.error&&(r.error=Hn),void 0===r.complete&&(r.complete=Hn);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(mF){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(mF){"undefined"!==typeof console&&console.error&&console.error(mF)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Hn(){}var Gn=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Qn(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Zn(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Qn(e,t)+"must be a valid function.")}function Yn(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Qn(e,t)+"must be a valid context object.")}var $n=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Jn(e){return e&&e._delegate?e._delegate:e}function Xn(){Xn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Me(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function er(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(ih){return void n(ih)}u.done?t(s):Promise.resolve(s).then(r,i)}function tr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){er(a,r,i,o,u,"next",e)}function u(e){er(a,r,i,o,u,"throw",e)}o(void 0)}))}}var nr=function(){function e(t,n,r){pe(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ye(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),rr="[DEFAULT]",ir=function(){function e(t,n){pe(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ye(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new mn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(mF){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(mF){if(r)return null;throw mF}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:rr})}catch(mF){}var t,n=nn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(mF){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(he(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),he(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=nn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=nn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(iD){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===rr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(iD){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr;return this.component?this.component.multipleInstances?e:rr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ar,or,ur=function(){function e(t){pe(this,e),this.name=t,this.providers=new Map}return ye(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ir(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),sr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(or||(or={}));var cr={debug:or.DEBUG,verbose:or.VERBOSE,info:or.INFO,warn:or.WARN,error:or.ERROR,silent:or.SILENT},lr=or.INFO,fr=(ar={},(0,de.Z)(ar,or.DEBUG,"log"),(0,de.Z)(ar,or.VERBOSE,"log"),(0,de.Z)(ar,or.INFO,"info"),(0,de.Z)(ar,or.WARN,"warn"),(0,de.Z)(ar,or.ERROR,"error"),ar),hr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=fr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},dr=function(){function e(t){pe(this,e),this.name=t,this._logLevel=lr,this._logHandler=hr,this._userLogHandler=null,sr.push(this)}return ye(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in or))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?cr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,or.DEBUG].concat(t)),this._logHandler.apply(this,[this,or.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,or.VERBOSE].concat(t)),this._logHandler.apply(this,[this,or.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,or.INFO].concat(t)),this._logHandler.apply(this,[this,or.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,or.WARN].concat(t)),this._logHandler.apply(this,[this,or.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,or.ERROR].concat(t)),this._logHandler.apply(this,[this,or.ERROR].concat(t))}}]),e}();var pr,vr;var yr=new WeakMap,mr=new WeakMap,gr=new WeakMap,kr=new WeakMap,wr=new WeakMap;var br={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return mr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||gr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function _r(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vr||(vr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ir(this),n),Er(yr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Er(e.apply(Ir(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ir(this),t].concat(r));return gr.set(a,t.sort?t.sort():[t]),Er(a)}}function xr(e){return"function"===typeof e?_r(e):(e instanceof IDBTransaction&&function(e){if(!mr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));mr.set(e,t)}}(e),function(e,t){return t.some((function(t){return e instanceof t}))}(e,pr||(pr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,br):e)}function Er(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Er(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&yr.set(t,e)})).catch((function(){})),wr.set(t,e),t}(e);if(kr.has(e))return kr.get(e);var t=xr(e);return t!==e&&(kr.set(e,t),wr.set(t,e)),t}var Ir=function(e){return wr.get(e)};var Sr,Tr,Cr=["get","getKey","getAll","getAllKeys","count"],Nr=["put","add","delete","clear"],Ar=new Map;function Pr(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ar.get(t))return Ar.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Nr.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Cr.includes(n))){var a=function(){var e=tr(Xn().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ar.set(t,a),a}}}br=function(e){return(0,F.Z)((0,F.Z)({},e),{},{get:function(t,n,r){return Pr(t,n)||e.get(t,n,r)},has:function(t,n){return!!Pr(t,n)||e.has(t,n)}})}(br);var Rr=function(){function e(t){pe(this,e),this.container=t}return ye(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Dr="@firebase/app",Or="0.7.26",Lr=new dr("@firebase/app"),Mr="[DEFAULT]",Fr=(Sr={},(0,de.Z)(Sr,Dr,"fire-core"),(0,de.Z)(Sr,"@firebase/app-compat","fire-core-compat"),(0,de.Z)(Sr,"@firebase/analytics","fire-analytics"),(0,de.Z)(Sr,"@firebase/analytics-compat","fire-analytics-compat"),(0,de.Z)(Sr,"@firebase/app-check","fire-app-check"),(0,de.Z)(Sr,"@firebase/app-check-compat","fire-app-check-compat"),(0,de.Z)(Sr,"@firebase/auth","fire-auth"),(0,de.Z)(Sr,"@firebase/auth-compat","fire-auth-compat"),(0,de.Z)(Sr,"@firebase/database","fire-rtdb"),(0,de.Z)(Sr,"@firebase/database-compat","fire-rtdb-compat"),(0,de.Z)(Sr,"@firebase/functions","fire-fn"),(0,de.Z)(Sr,"@firebase/functions-compat","fire-fn-compat"),(0,de.Z)(Sr,"@firebase/installations","fire-iid"),(0,de.Z)(Sr,"@firebase/installations-compat","fire-iid-compat"),(0,de.Z)(Sr,"@firebase/messaging","fire-fcm"),(0,de.Z)(Sr,"@firebase/messaging-compat","fire-fcm-compat"),(0,de.Z)(Sr,"@firebase/performance","fire-perf"),(0,de.Z)(Sr,"@firebase/performance-compat","fire-perf-compat"),(0,de.Z)(Sr,"@firebase/remote-config","fire-rc"),(0,de.Z)(Sr,"@firebase/remote-config-compat","fire-rc-compat"),(0,de.Z)(Sr,"@firebase/storage","fire-gcs"),(0,de.Z)(Sr,"@firebase/storage-compat","fire-gcs-compat"),(0,de.Z)(Sr,"@firebase/firestore","fire-fst"),(0,de.Z)(Sr,"@firebase/firestore-compat","fire-fst-compat"),(0,de.Z)(Sr,"fire-js","fire-js"),(0,de.Z)(Sr,"firebase","fire-js-all"),Sr),Ur=new Map,jr=new Map;function Vr(e,t){try{e.container.addComponent(t)}catch(mF){Lr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),mF)}}function qr(e,t){e.container.addOrOverwriteComponent(t)}function Br(e){var t=e.name;if(jr.has(t))return Lr.debug("There were multiple attempts to register component ".concat(t,".")),!1;jr.set(t,e);var n,r=nn(Ur.values());try{for(r.s();!(n=r.n()).done;){Vr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function zr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Wr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mr;zr(e,t).clearInstance(n)}function Kr(){jr.clear()}var Hr=(Tr={},(0,de.Z)(Tr,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,de.Z)(Tr,"bad-app-name","Illegal App name: '{$appName}"),(0,de.Z)(Tr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,de.Z)(Tr,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,de.Z)(Tr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,de.Z)(Tr,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,de.Z)(Tr,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,de.Z)(Tr,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,de.Z)(Tr,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,de.Z)(Tr,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Tr),Gr=new Cn("app","Firebase",Hr),Qr=function(){function e(t,n,r){var i=this;pe(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nr("app",(function(){return i}),"PUBLIC"))}return ye(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}]),e}(),Zr="9.8.3";function Yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Mr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Gr.create("bad-app-name",{appName:String(i)});var a=Ur.get(i);if(a){if(Un(e,a.options)&&Un(r,a.config))return a;throw Gr.create("duplicate-app",{appName:i})}var o,u=new ur(i),s=nn(jr.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Qr(e,r,u);return Ur.set(i,l),l}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr,t=Ur.get(e);if(!t)throw Gr.create("no-app",{appName:e});return t}function Jr(){return Array.from(Ur.values())}function Xr(e){return ei.apply(this,arguments)}function ei(){return(ei=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ur.has(n)){e.next=6;break}return Ur.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ti(e,t,n){var r,i=null!==(r=Fr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Lr.warn(u.join(" "))}Br(new nr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ni(e,t){if(null!==e&&"function"!==typeof e)throw Gr.create("invalid-log-argument");!function(e,t){var n,r=nn(sr);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=cr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:or[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ri(e){var t;t=e,sr.forEach((function(e){e.setLogLevel(t)}))}var ii="firebase-heartbeat-store",ai=null;function oi(){return ai||(ai=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Er(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Er(u.result),e.oldVersion,e.newVersion,Er(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(ii)}}).catch((function(e){throw Gr.create("storage-open",{originalErrorMessage:e.message})}))),ai}function ui(e){return si.apply(this,arguments)}function si(){return si=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oi();case 3:return r=e.sent,e.abrupt("return",r.transaction(ii).objectStore(ii).get(fi(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Gr.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),si.apply(this,arguments)}function ci(e,t){return li.apply(this,arguments)}function li(){return li=tr(Xn().mark((function e(t,n){var r,i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oi();case 3:return i=e.sent,a=i.transaction(ii,"readwrite"),o=a.objectStore(ii),e.next=8,o.put(n,fi(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),Gr.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),li.apply(this,arguments)}function fi(e){return"".concat(e.name,"!").concat(e.options.appId)}var hi=function(){function e(t){var n=this;pe(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new mi(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ye(e,[{key:"triggerHeartbeat",value:function(){var e=tr(Xn().mark((function e(){var t,n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=di(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=tr(Xn().mark((function e(){var t,n,r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=di(),n=pi(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=pn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function di(){return(new Date).toISOString().substring(0,10)}function pi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=nn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),gi(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),gi(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var vi,yi,mi=function(){function e(t){pe(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ye(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(ih){t(ih)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ui(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ci(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ci(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(he(r.heartbeats),he(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function gi(e){return pn(JSON.stringify({version:2,heartbeats:e})).length}vi="",Br(new nr("platform-logger",(function(e){return new Rr(e)}),"PRIVATE")),Br(new nr("heartbeat",(function(e){return new hi(e)}),"PRIVATE")),ti(Dr,Or,vi),ti(Dr,Or,"esm2017"),ti("fire-js","");var ki=function(){function e(t,n){var r=this;pe(this,e),this._delegate=t,this.firebase=n,Vr(t,new nr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ye(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Xr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mr;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mr;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Vr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){qr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),wi=(yi={},(0,de.Z)(yi,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,de.Z)(yi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),yi),bi=new Cn("app-compat","Firebase",wi);var _i=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Yr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(On(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ti,setLogLevel:ri,onLog:ni,apps:null,SDK_VERSION:Zr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Br(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw bi.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&yn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!On(n,e=e||Mr))throw bi.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ki);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){yn(n,e)},createSubscribe:Wn,ErrorFactory:Cn,deepExtend:yn}),n}(),xi=new dr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){xi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ei=self.firebase.SDK_VERSION;Ei&&Ei.indexOf("LITE")>=0&&xi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ii=_i;!function(e){ti("@firebase/app-compat","0.1.27",e)}();Ii.registerVersion("firebase","9.8.3","app-compat");function Si(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ti;Object.create;var Ci="facebook.com",Ni="github.com",Ai="google.com",Pi="password",Ri="twitter.com",Di="EMAIL_SIGNIN",Oi="PASSWORD_RESET",Li="RECOVER_EMAIL",Mi="REVERT_SECOND_FACTOR_ADDITION",Fi="VERIFY_AND_CHANGE_EMAIL",Ui="VERIFY_EMAIL";function ji(){return(0,de.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Vi=function(){var e;return e={},(0,de.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,de.Z)(e,"argument-error",""),(0,de.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,de.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,de.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,de.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,de.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,de.Z)(e,"cors-unsupported","This browser is not supported."),(0,de.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,de.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,de.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,de.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,de.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,de.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,de.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,de.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,de.Z)(e,"expired-action-code","The action code has expired."),(0,de.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,de.Z)(e,"internal-error","An internal AuthError has occurred."),(0,de.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,de.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,de.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,de.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,de.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,de.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,de.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,de.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,de.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,de.Z)(e,"invalid-email","The email address is badly formatted."),(0,de.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,de.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,de.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,de.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,de.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,de.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,de.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,de.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,de.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,de.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,de.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,de.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,de.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,de.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,de.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,de.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,de.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,de.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,de.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,de.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,de.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,de.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,de.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,de.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,de.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,de.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,de.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,de.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,de.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,de.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,de.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,de.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,de.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,de.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,de.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,de.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,de.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,de.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,de.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,de.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,de.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,de.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,de.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,de.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,de.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,de.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,de.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,de.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,de.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,de.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,de.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,de.Z)(e,"timeout","The operation has timed out."),(0,de.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,de.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,de.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,de.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,de.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,de.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,de.Z)(e,"unverified-email","The operation requires a verified email."),(0,de.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,de.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,de.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,de.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,de.Z)(e,"user-signed-out",""),(0,de.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,de.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,de.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},qi=ji,Bi=new Cn("auth","Firebase",ji()),zi=new dr("@firebase/auth");function Wi(e){if(zi.logLevel<=or.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zi.error.apply(zi,["Auth (".concat(Zr,"): ").concat(e)].concat(n))}}function Ki(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Zi.apply(void 0,[e].concat(n))}function Hi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zi.apply(void 0,[e].concat(n))}function Gi(e,t,n){var r=Object.assign(Object.assign({},qi()),(0,de.Z)({},t,n));return new Cn("auth","Firebase",r).create(t,{appName:e.name})}function Qi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ki(e,"argument-error"),Gi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Zi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=he(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(he(o)))}return Bi.create.apply(Bi,[e].concat(n))}function Yi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Zi.apply(void 0,[t].concat(r))}}function $i(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Wi(t),new Error(t)}function Ji(e,t){e||$i(t)}var Xi=new Map;function ea(e){Ji(e instanceof Function,"Expected a class definition");var t=Xi.get(e);return t?(Ji(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xi.set(e,t),t)}function ta(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function na(){return"http:"===ra()||"https:"===ra()}function ra(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ia=function(){function e(t,n){pe(this,e),this.shortDelay=t,this.longDelay=n,Ji(n>t,"Short delay should be less than long delay!"),this.isMobile=wn()||xn()}return ye(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(na()||_n()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function aa(e,t){Ji(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var oa=function(){function e(){pe(this,e)}return ye(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void $i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void $i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void $i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ua=(Ti={},(0,de.Z)(Ti,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,de.Z)(Ti,"MISSING_CUSTOM_TOKEN","internal-error"),(0,de.Z)(Ti,"INVALID_IDENTIFIER","invalid-email"),(0,de.Z)(Ti,"MISSING_CONTINUE_URI","internal-error"),(0,de.Z)(Ti,"INVALID_PASSWORD","wrong-password"),(0,de.Z)(Ti,"MISSING_PASSWORD","internal-error"),(0,de.Z)(Ti,"EMAIL_EXISTS","email-already-in-use"),(0,de.Z)(Ti,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,de.Z)(Ti,"INVALID_IDP_RESPONSE","invalid-credential"),(0,de.Z)(Ti,"INVALID_PENDING_TOKEN","invalid-credential"),(0,de.Z)(Ti,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,de.Z)(Ti,"MISSING_REQ_TYPE","internal-error"),(0,de.Z)(Ti,"EMAIL_NOT_FOUND","user-not-found"),(0,de.Z)(Ti,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,de.Z)(Ti,"EXPIRED_OOB_CODE","expired-action-code"),(0,de.Z)(Ti,"INVALID_OOB_CODE","invalid-action-code"),(0,de.Z)(Ti,"MISSING_OOB_CODE","internal-error"),(0,de.Z)(Ti,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,de.Z)(Ti,"INVALID_ID_TOKEN","invalid-user-token"),(0,de.Z)(Ti,"TOKEN_EXPIRED","user-token-expired"),(0,de.Z)(Ti,"USER_NOT_FOUND","user-token-expired"),(0,de.Z)(Ti,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,de.Z)(Ti,"INVALID_CODE","invalid-verification-code"),(0,de.Z)(Ti,"INVALID_SESSION_INFO","invalid-verification-id"),(0,de.Z)(Ti,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,de.Z)(Ti,"MISSING_SESSION_INFO","missing-verification-id"),(0,de.Z)(Ti,"SESSION_EXPIRED","code-expired"),(0,de.Z)(Ti,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,de.Z)(Ti,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,de.Z)(Ti,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,de.Z)(Ti,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,de.Z)(Ti,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,de.Z)(Ti,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,de.Z)(Ti,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,de.Z)(Ti,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,de.Z)(Ti,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,de.Z)(Ti,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,de.Z)(Ti,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ti),sa=new ia(3e4,6e4);function ca(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function la(e,t,n,r){return fa.apply(this,arguments)}function fa(){return fa=tr(Xn().mark((function e(t,n,r,i){var a,o=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",ha(t,a,tr(Xn().mark((function e(){var a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Vn(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",oa.fetch()(ya(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}function ha(e,t,n){return da.apply(this,arguments)}function da(){return(da=tr(Xn().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ua),n),e.prev=2,a=new ma(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw ga(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw ga(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw ga(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw ga(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Gi(t,p,d);case 34:Ki(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Tn)){e.next=41;break}throw e.t0;case 41:Ki(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function pa(e,t,n,r){return va.apply(this,arguments)}function va(){return va=tr(Xn().mark((function e(t,n,r,i){var a,o,u=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,la(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ki(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}function ya(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?aa(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ma=function(){function e(t){var n=this;pe(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Hi(n.auth,"network-request-failed"))}),sa.get())}))}return ye(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ga(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Hi(e,t,r);return i.customData._tokenResponse=n,i}function ka(e,t){return wa.apply(this,arguments)}function wa(){return(wa=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(e,t){return _a.apply(this,arguments)}function _a(){return(_a=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(e,t){return Ea.apply(this,arguments)}function Ea(){return(Ea=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(mF){}}function Sa(){return Sa=tr(Xn().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Jn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Yi((a=Ca(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ia(Ta(a.auth_time)),issuedAtTime:Ia(Ta(a.iat)),expirationTime:Ia(Ta(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}function Ta(e){return 1e3*Number(e)}function Ca(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Wi("JWT malformed, contained fewer than 3 sections"),null;try{var a=vn(r);return a?JSON.parse(a):(Wi("Failed to decode base64 JWT payload"),null)}catch(mF){return Wi("Caught error parsing JWT payload as JSON",mF),null}}function Na(e,t){return Aa.apply(this,arguments)}function Aa(){return Aa=tr(Xn().mark((function e(t,n){var r=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Tn&&Pa(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Aa.apply(this,arguments)}function Pa(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ra=function(){function e(t){pe(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ye(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(tr(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Da=function(){function e(t,n){pe(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ye(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ia(this.lastLoginAt),this.creationTime=Ia(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Oa(e){return La.apply(this,arguments)}function La(){return La=tr(Xn().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Na(t,xa(r,{idToken:i}));case 6:Yi(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Ua(o.providerUserInfo):[],s=Fa(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Da(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}function Ma(){return(Ma=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jn(t),e.next=3,Oa(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(he(n),he(t))}function Ua(e){return e.map((function(e){var t=e.providerId,n=Si(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function ja(e,t){return Va.apply(this,arguments)}function Va(){return(Va=tr(Xn().mark((function e(t,n){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha(t,{},tr(Xn().mark((function e(){var r,i,a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vn({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=ya(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",oa.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qa=function(){function e(){pe(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ye(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Yi(e.idToken,"internal-error"),Yi("undefined"!==typeof e.idToken,"internal-error"),Yi("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Ca(e);return Yi(t,"internal-error"),Yi("undefined"!==typeof t.exp,"internal-error"),Yi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=tr(Xn().mark((function e(t){var n,r=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Yi(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=tr(Xn().mark((function e(t,n){var r,i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return $i("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Yi("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Yi("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Yi("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ba(e,t){Yi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var za=function(){function e(t){pe(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Si(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ra(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?he(a.providerData):[],this.metadata=new Da(a.createdAt||void 0,a.lastLoginAt||void 0)}return ye(e,[{key:"getIdToken",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Yi(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Sa.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ma.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Yi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Yi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=tr(Xn().mark((function e(t){var n,r,i=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Oa(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Na(this,ka(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Yi(k&&x,t,"internal-error");var E=qa.fromJSON(this.name,x);Yi("string"===typeof k,t,"internal-error"),Ba(f,t.name),Ba(h,t.name),Yi("boolean"===typeof w,t,"internal-error"),Yi("boolean"===typeof b,t,"internal-error"),Ba(d,t.name),Ba(p,t.name),Ba(v,t.name),Ba(y,t.name),Ba(m,t.name),Ba(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=tr(Xn().mark((function t(n,r){var i,a,o,u=arguments;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new qa).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Oa(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Wa=function(){function e(){pe(this,e),this.type="NONE",this.storage={}}return ye(e,[{key:"_isAvailable",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Wa.type="NONE";var Ka=Wa;function Ha(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Ga=function(){function e(t,n,r){pe(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ha(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ha("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ye(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?za._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=tr(Xn().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ea(Ka),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ea(Ka),u=Ha(i,n.config.apiKey,n.name),s=null,c=nn(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=za._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Qa(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ja(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Za(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(eo(t))return"Blackberry";if(to(t))return"Webos";if(Ya(t))return"Safari";if((t.includes("chrome/")||$a(t))&&!t.includes("edge/"))return"Chrome";if(Xa(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return/firefox\//i.test(e)}function Ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return/crios\//i.test(e)}function Ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return/iemobile/i.test(e)}function Xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return/android/i.test(e)}function eo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return/blackberry/i.test(e)}function to(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return/webos/i.test(e)}function no(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return/iphone|ipad|ipod/i.test(e)}function ro(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return no(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function io(){return En()&&10===document.documentMode}function ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return no(e)||Xa(e)||to(e)||eo(e)||/windows phone/i.test(e)||Ja(e)}function oo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qa(kn());break;case"Worker":t="".concat(Qa(kn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Zr,"/").concat(r)}var uo=function(){function e(t){pe(this,e),this.auth=t,this.queue=[]}return ye(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(mF){r(mF)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=tr(Xn().mark((function e(t){var n,r,i,a,o,u,s,c;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=nn(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=nn(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),so=function(){function e(t,n,r){pe(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lo(this),this.idTokenSubscription=new lo(this),this.beforeStateQueue=new uo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bi,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ye(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ea(t)),this._initializationPromise=this.queue(tr(Xn().mark((function r(){var i,a;return Xn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Ga.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=tr(Xn().mark((function e(t){var n,r,i,a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Yi(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oa(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Jn(t):null)&&Yi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=tr(Xn().mark((function e(t){var n,r=this,i=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Yi(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(tr(Xn().mark((function n(){return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ea(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Cn("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=tr(Xn().mark((function e(t,n){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Yi(n=t&&ea(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Ga.create(this,[ea(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=tr(Xn().mark((function e(t){var n=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Yi(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Yi(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oo(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=tr(Xn().mark((function e(){var t,n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,de.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function co(e){return Jn(e)}var lo=function(){function e(t){var n=this;pe(this,e),this.auth=t,this.observer=null,this.addObserver=Wn((function(e){return n.observer=e}))}return ye(e,[{key:"next",get:function(){return Yi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function fo(e,t,n){var r=co(e);Yi(r._canInitEmulator,r,"emulator-config-failed"),Yi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ho(t),o=function(e){var t=ho(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:po(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:po(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ho(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function po(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var vo=function(){function e(t,n){pe(this,e),this.providerId=t,this.signInMethod=n}return ye(e,[{key:"toJSON",value:function(){return $i("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return $i("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return $i("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return $i("not implemented")}}]),e}();function yo(e,t){return mo.apply(this,arguments)}function mo(){return(mo=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:resetPassword",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t){return ko.apply(this,arguments)}function ko(){return(ko=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t){return bo.apply(this,arguments)}function bo(){return(bo=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:update",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _o(e,t){return xo.apply(this,arguments)}function xo(){return(xo=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:signInWithPassword",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eo(e,t){return Io.apply(this,arguments)}function Io(){return(Io=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:sendOobCode",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function So(e,t){return To.apply(this,arguments)}function To(){return(To=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Co(e,t){return No.apply(this,arguments)}function No(){return(No=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ao(e,t){return Po.apply(this,arguments)}function Po(){return(Po=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(e,t){return Do.apply(this,arguments)}function Do(){return(Do=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e,t){return Lo.apply(this,arguments)}function Lo(){return(Lo=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:signInWithEmailLink",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mo(e,t){return Fo.apply(this,arguments)}function Fo(){return(Fo=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:signInWithEmailLink",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uo=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return pe(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ye(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",_o(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Oo(t,{email:this._email,oobCode:this._password}));case 5:Ki(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",go(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Mo(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ki(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(vo);function jo(e,t){return Vo.apply(this,arguments)}function Vo(){return(Vo=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:signInWithIdp",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qo=function(e){Oe(n,e);var t=je(n);function n(){var e;return pe(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ye(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return jo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,jo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,jo(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ki("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Si(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(vo);function Bo(e,t){return zo.apply(this,arguments)}function zo(){return(zo=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:sendVerificationCode",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(){return(Wo=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:signInWithPhoneNumber",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(){return(Ko=tr(Xn().mark((function e(t,n){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa(t,"POST","/v1/accounts:signInWithPhoneNumber",ca(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ga(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ho=(0,de.Z)({},"USER_NOT_FOUND","user-not-found");function Go(){return(Go=tr(Xn().mark((function e(t,n){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",pa(t,"POST","/v1/accounts:signInWithPhoneNumber",ca(t,r),Ho));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qo=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ye(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Wo.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ko.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Go.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(vo);var Zo=function(){function e(t){var n,r,i,a,o,u;pe(this,e);var s=qn(Bn(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Yi(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return ye(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=qn(Bn(e)).link,n=t?qn(Bn(t)).deep_link_id:null,r=qn(Bn(e)).deep_link_id;return(r?qn(Bn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(iD){return null}}}]),e}();var Yo=function(){function e(){pe(this,e),this.providerId=e.PROVIDER_ID}return ye(e,null,[{key:"credential",value:function(e,t){return Uo._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Zo.parseLink(t);return Yi(n,"argument-error"),Uo._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Yo.PROVIDER_ID="password",Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var $o=function(){function e(t){pe(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ye(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Jo=function(e){Oe(n,e);var t=je(n);function n(){var e;return pe(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ye(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return he(this.scopes)}}]),n}($o),Xo=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Yi(e.idToken||e.accessToken,"argument-error"),qo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Yi("providerId"in t&&"signInMethod"in t,"argument-error"),qo._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(mF){return null}}}]),n}(Jo),eu=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.call(this,"facebook.com")}return ye(n,null,[{key:"credential",value:function(e){return qo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(iD){return null}}}]),n}(Jo);eu.FACEBOOK_SIGN_IN_METHOD="facebook.com",eu.PROVIDER_ID="facebook.com";var tu=function(e){Oe(n,e);var t=je(n);function n(){var e;return pe(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ye(n,null,[{key:"credential",value:function(e,t){return qo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(iD){return null}}}]),n}(Jo);tu.GOOGLE_SIGN_IN_METHOD="google.com",tu.PROVIDER_ID="google.com";var nu=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.call(this,"github.com")}return ye(n,null,[{key:"credential",value:function(e){return qo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(iD){return null}}}]),n}(Jo);nu.GITHUB_SIGN_IN_METHOD="github.com",nu.PROVIDER_ID="github.com";var ru=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ye(n,[{key:"_getIdTokenResponse",value:function(e){return jo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,jo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,jo(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(vo),iu=function(e){Oe(n,e);var t=je(n);function n(e){return pe(this,n),Yi(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ye(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ru.fromJSON(e);return Yi(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ru._create(r,n)}catch(mF){return null}}}]),n}($o),au=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.call(this,"twitter.com")}return ye(n,null,[{key:"credential",value:function(e,t){return qo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(iD){return null}}}]),n}(Jo);function ou(e,t){return uu.apply(this,arguments)}function uu(){return(uu=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:signUp",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}au.TWITTER_SIGN_IN_METHOD="twitter.com",au.PROVIDER_ID="twitter.com";var su=function(){function e(t){pe(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ye(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=tr(Xn().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,za._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=cu(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=tr(Xn().mark((function t(n,r,i){var a;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=cu(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function cu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function lu(){return lu=tr(Xn().mark((function e(t){var n,r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new su({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ou(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,su._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),lu.apply(this,arguments)}var fu=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a){var o,u;return pe(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Fe(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ye(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Tn);function hu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw fu._fromErrorAndOperation(e,n,t,r);throw n}))}function du(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function pu(e,t){return vu.apply(this,arguments)}function vu(){return vu=tr(Xn().mark((function e(t,n){var r,i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jn(t),e.next=3,gu(!0,r,n);case 3:return e.t0=ba,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=du(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),vu.apply(this,arguments)}function yu(e,t){return mu.apply(this,arguments)}function mu(){return mu=tr(Xn().mark((function e(t,n){var r,i,a=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Na,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",su._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),mu.apply(this,arguments)}function gu(e,t,n){return ku.apply(this,arguments)}function ku(){return(ku=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oa(n);case 2:i=du(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Yi(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wu(e,t){return bu.apply(this,arguments)}function bu(){return bu=tr(Xn().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Na(t,hu(i,a,n,t),r);case 6:return Yi((o=e.sent).idToken,i,"internal-error"),Yi(u=Ca(o.idToken),i,"internal-error"),s=u.sub,Yi(t.uid===s,i,"user-mismatch"),e.abrupt("return",su._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ki(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),bu.apply(this,arguments)}function _u(e,t){return xu.apply(this,arguments)}function xu(){return xu=tr(Xn().mark((function e(t,n){var r,i,a,o,u=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,hu(t,i,n);case 4:return a=e.sent,e.next=7,su._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),xu.apply(this,arguments)}function Eu(e,t){return Iu.apply(this,arguments)}function Iu(){return(Iu=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_u(co(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Su(e,t){return Tu.apply(this,arguments)}function Tu(){return(Tu=tr(Xn().mark((function e(t,n){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jn(t),e.next=3,gu(!1,r,n.providerId);case 3:return e.abrupt("return",yu(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cu(e,t){return Nu.apply(this,arguments)}function Nu(){return(Nu=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(Jn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Au(e,t){return Pu.apply(this,arguments)}function Pu(){return(Pu=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:signInWithCustomToken",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ru(){return(Ru=tr(Xn().mark((function e(t,n){var r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,Au(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,su._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Du=function(){function e(t,n){pe(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ye(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ou._fromServerResponse(e,t):Ki(e,"internal-error")}}]),e}(),Ou=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ye(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Du);function Lu(e,t,n){var r;Yi((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Yi("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Yi(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Yi(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Mu(){return(Mu=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jn(t),a={requestType:"PASSWORD_RESET",email:n},r&&Lu(i,a,r),e.next=5,Co(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fu(){return(Fu=tr(Xn().mark((function e(t,n,r){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo(Jn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uu(){return(Uu=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo(Jn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ju(e,t){return Vu.apply(this,arguments)}function Vu(){return(Vu=tr(Xn().mark((function e(t,n){var r,i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jn(t),e.next=3,yo(r,{oobCode:n});case 3:i=e.sent,Yi(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Yi(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Yi(i.mfaInfo,r,"internal-error");case 13:Yi(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Du._fromServerResponse(co(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qu(){return(qu=tr(Xn().mark((function e(t,n){var r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ju(Jn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e,t,n){return zu.apply(this,arguments)}function zu(){return(zu=tr(Xn().mark((function e(t,n,r){var i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),e.next=3,ou(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,su._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(){return(Wu=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jn(t),a={requestType:"EMAIL_SIGNIN",email:n},Yi(r.handleCodeInApp,i,"argument-error"),r&&Lu(i,a,r),e.next=6,Ao(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(){return(Ku=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jn(t),Yi((a=Yo.credentialWithLink(n,r||ta()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Eu(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hu(e,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:createAuthUri",ca(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(){return(Qu=tr(Xn().mark((function e(t,n){var r,i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=na()?ta():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Hu(Jn(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zu(){return(Zu=tr(Xn().mark((function e(t,n){var r,i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Lu(r.auth,a,n),e.next=8,So(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yu(){return(Yu=tr(Xn().mark((function e(t,n,r){var i,a,o,u;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Lu(i.auth,o,r),e.next=8,Ro(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $u(e,t){return Ju.apply(this,arguments)}function Ju(){return(Ju=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(){return(Xu=tr(Xn().mark((function e(t,n){var r,i,a,o,u,s,c;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Jn(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Na(a,$u(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t,n){return ts.apply(this,arguments)}function ts(){return(ts=tr(Xn().mark((function e(t,n,r){var i,a,o,u;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Na(t,go(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ns=ye((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};pe(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),rs=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a){var o;return pe(this,n),(o=t.call(this,e,r,i)).username=a,o}return ye(n)}(ns),is=function(e){Oe(n,e);var t=je(n);function n(e,r){return pe(this,n),t.call(this,e,"facebook.com",r)}return ye(n)}(ns),as=function(e){Oe(n,e);var t=je(n);function n(e,r){return pe(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ye(n)}(rs),os=function(e){Oe(n,e);var t=je(n);function n(e,r){return pe(this,n),t.call(this,e,"google.com",r)}return ye(n)}(ns),us=function(e){Oe(n,e);var t=je(n);function n(e,r,i){return pe(this,n),t.call(this,e,"twitter.com",r,i)}return ye(n)}(rs);function ss(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Ca(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ns(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new is(a,i);case"github.com":return new as(a,i);case"google.com":return new os(a,i);case"twitter.com":return new us(a,i,e.screenName||null);case"custom":case"anonymous":return new ns(a,null);default:return new ns(a,r,i)}}(n)}var cs=function(){function e(t,n){pe(this,e),this.type=t,this.credential=n}return ye(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,de.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ls=function(){function e(t,n,r){pe(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ye(e,[{key:"resolveSignIn",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=co(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Du._fromServerResponse(r,e)}));Yi(i.mfaPendingCredential,r,"internal-error");var o=cs._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=tr(Xn().mark((function e(t){var a,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,su._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Yi(n.user,r,"internal-error"),e.abrupt("return",su._forOperation(n.user,n.operationType,u));case 17:Ki(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function fs(e,t){return la(e,"POST","/v2/accounts/mfaEnrollment:start",ca(e,t))}var hs=function(){function e(t){var n=this;pe(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Du._fromServerResponse(t.auth,e)})))}))}return ye(e,[{key:"getSession",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=cs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=tr(Xn().mark((function e(t,n){var r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Na(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=tr(Xn().mark((function e(t){var n,r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Na(this.user,la(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",ca(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ds=new WeakMap;var ps="__sak",vs=function(){function e(t,n){pe(this,e),this.storageRetriever=t,this.type=n}return ye(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ps,"1"),this.storage.removeItem(ps),Promise.resolve(!0)):Promise.resolve(!1)}catch(iD){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ys=function(e){Oe(n,e);var t=je(n);function n(){var e;return pe(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=kn();return Ya(e)||no(e)}()&&function(){try{return!(!window||window===window.top)}catch(mF){return!1}}(),e.fallbackToPolling=ao(),e._shouldAllowMigration=!0,e}return ye(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);io()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=tr(Xn().mark((function e(t,r){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(Ae(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=tr(Xn().mark((function e(t){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(Ae(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(Ae(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(vs);ys.type="LOCAL";var ms=ys,gs=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ye(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(vs);gs.type="SESSION";var ks=gs;function ws(e){return Promise.all(e.map(function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var bs=function(){function e(t){pe(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ye(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=tr(Xn().mark((function e(t){var n,r,i,a,o,u,s,c;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ws(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function _s(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}bs.receivers=[];var xs=function(){function e(t){pe(this,e),this.target=t,this.handlers=new Set}return ye(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=tr(Xn().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=_s("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Es(){return window}function Is(){return"undefined"!==typeof Es().WorkerGlobalScope&&"function"===typeof Es().importScripts}function Ss(){return Ts.apply(this,arguments)}function Ts(){return(Ts=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Cs(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ns="firebaseLocalStorageDb",As="firebaseLocalStorage",Ps="fbase_key",Rs=function(){function e(t){pe(this,e),this.request=t}return ye(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ds(e,t){return e.transaction([As],t?"readwrite":"readonly").objectStore(As)}function Os(){var e=indexedDB.deleteDatabase(Ns);return new Rs(e).toPromise()}function Ls(){var e=indexedDB.open(Ns,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(As,{keyPath:Ps})}catch(mF){n(mF)}})),e.addEventListener("success",tr(Xn().mark((function n(){var r;return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(As)){n.next=12;break}return r.close(),n.next=5,Os();case 5:return n.t0=t,n.next=8,Ls();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ms(e,t,n){return Fs.apply(this,arguments)}function Fs(){return Fs=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ds(t,!0).put((i={},(0,de.Z)(i,Ps,n),(0,de.Z)(i,"value",r),i)),e.abrupt("return",new Rs(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Fs.apply(this,arguments)}function Us(e,t){return js.apply(this,arguments)}function js(){return js=tr(Xn().mark((function e(t,n){var r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ds(t,!1).get(n),e.next=3,new Rs(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),js.apply(this,arguments)}function Vs(e,t){var n=Ds(e,!0).delete(t);return new Rs(n).toPromise()}var qs=function(){function e(){pe(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ye(e,[{key:"_openDb",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ls();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Is()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=tr(Xn().mark((function e(){var t=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=bs._getInstance(Is()?self:null),this.receiver._subscribe("keyChanged",function(){var e=tr(Xn().mark((function e(n,r){var i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=tr(Xn().mark((function e(){var t,n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ss();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new xs(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Cs()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ls();case 5:return t=e.sent,e.next=8,Ms(t,ps,"1");case 8:return e.next=10,Vs(t,ps);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=tr(Xn().mark((function e(t,n){var r=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ms(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Us(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=tr(Xn().mark((function e(t){var n=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Vs(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=tr(Xn().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ds(e,!1).getAll();return new Rs(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=nn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(tr(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();qs.type="LOCAL";var Bs=qs;function zs(e,t){return la(e,"POST","/v2/accounts/mfaSignIn:start",ca(e,t))}function Ws(e){return Ks.apply(this,arguments)}function Ks(){return(Ks=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hs(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Hi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Gs(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Qs=1e12,Zs=function(){function e(t){pe(this,e),this.auth=t,this.counter=Qs,this._widgets=new Map}return ye(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ys(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Qs;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Qs;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Qs,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ys=function(){function e(t,n,r){var i=this;pe(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Yi(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ye(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(mF){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(mF){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var $s=Gs("rcb"),Js=new ia(3e4,6e4),Xs="https://www.google.com/recaptcha/api.js?",ec=function(){function e(){pe(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Es().grecaptcha}return ye(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Yi(tc(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Es().grecaptcha):new Promise((function(r,i){var a=Es().setTimeout((function(){i(Hi(e,"network-request-failed"))}),Js.get());Es()[$s]=function(){Es().clearTimeout(a),delete Es()[$s];var o=Es().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Hi(e,"internal-error"))},Hs("".concat(Xs,"?").concat(Vn({onload:$s,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Hi(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Es().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function tc(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var nc=function(){function e(){pe(this,e)}return ye(e,[{key:"load",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Zs(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),rc="recaptcha",ic={theme:"light",type:"image"},ac=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ic),r=arguments.length>2?arguments[2]:void 0;pe(this,e),this.parameters=n,this.type=rc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=co(r),this.isInvisible="invisible"===this.parameters.size,Yi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Yi(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nc:new ec,this.validateStartingState()}return ye(e,[{key:"verify",value:function(){var e=tr(Xn().mark((function e(){var t,n,r,i=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(mF){return Promise.reject(mF)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Yi(!this.parameters.sitekey,this.auth,"argument-error"),Yi(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Yi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Es()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Yi(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=tr(Xn().mark((function e(){var t,n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yi(na()&&!Is(),this.auth,"internal-error"),e.next=3,oc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ws(this.auth);case 8:Yi(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Yi(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function oc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var uc=function(){function e(t,n){pe(this,e),this.verificationId=t,this.onConfirmation=n}return ye(e,[{key:"confirm",value:function(e){var t=Qo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function sc(){return(sc=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),e.next=3,hc(i,n,Jn(r));case 3:return a=e.sent,e.abrupt("return",new uc(a,(function(e){return Eu(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cc(e,t,n){return lc.apply(this,arguments)}function lc(){return(lc=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jn(t),e.next=3,gu(!1,i,"phone");case 3:return e.next=5,hc(i.auth,n,Jn(r));case 5:return a=e.sent,e.abrupt("return",new uc(a,(function(e){return Su(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fc(){return(fc=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jn(t),e.next=3,hc(i.auth,n,Jn(r));case 3:return a=e.sent,e.abrupt("return",new uc(a,(function(e){return Cu(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hc(e,t,n){return dc.apply(this,arguments)}function dc(){return dc=tr(Xn().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Yi("string"===typeof a,t,"argument-error"),Yi(r.type===rc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Yi("enroll"===u.type,t,"internal-error"),e.next=13,fs(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Yi("signin"===u.type,t,"internal-error"),Yi(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,zs(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Bo(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),dc.apply(this,arguments)}function pc(){return(pc=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yu(Jn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vc=function(){function e(t){pe(this,e),this.providerId=e.PROVIDER_ID,this.auth=co(t)}return ye(e,[{key:"verifyPhoneNumber",value:function(e,t){return hc(this.auth,e,Jn(t))}}],[{key:"credential",value:function(e,t){return Qo._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Qo._fromTokenResponse(n,r):null}}]),e}();function yc(e,t){return t?ea(t):(Yi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vc.PROVIDER_ID="phone",vc.PHONE_SIGN_IN_METHOD="phone";var mc=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ye(n,[{key:"_getIdTokenResponse",value:function(e){return jo(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return jo(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return jo(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(vo);function gc(e){return _u(e.auth,new mc(e),e.bypassAuthState)}function kc(e){var t=e.auth,n=e.user;return Yi(n,t,"internal-error"),wu(n,new mc(e),e.bypassAuthState)}function wc(e){return bc.apply(this,arguments)}function bc(){return(bc=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Yi(r=t.user,n,"internal-error"),e.abrupt("return",yu(r,new mc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _c=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];pe(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ye(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=tr(Xn().mark((function t(n,r){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=tr(Xn().mark((function e(t){var n,r,i,a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gc;case"linkViaPopup":case"linkViaRedirect":return wc;case"reauthViaPopup":case"reauthViaRedirect":return kc;default:Ki(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),xc=new ia(2e3,1e4);function Ec(e,t,n){return Ic.apply(this,arguments)}function Ic(){return(Ic=tr(Xn().mark((function e(t,n,r){var i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),Qi(t,n,$o),a=yc(i,r),o=new Nc(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sc(){return(Sc=tr(Xn().mark((function e(t,n,r){var i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qi((i=Jn(t)).auth,n,$o),a=yc(i.auth,r),o=new Nc(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tc(e,t,n){return Cc.apply(this,arguments)}function Cc(){return(Cc=tr(Xn().mark((function e(t,n,r){var i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qi((i=Jn(t)).auth,n,$o),a=yc(i.auth,r),o=new Nc(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nc=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a,o){var u;return pe(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Fe(u),u}return ye(n,[{key:"executeNotNull",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Yi(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=tr(Xn().mark((function e(){var t,n=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ji(1===this.filter.length,"Popup operations only handle one event"),t=_s(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Hi(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Hi(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Hi(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,xc.get())}()}}]),n}(_c);Nc.currentPopupAction=null;var Ac=new Map,Pc=function(e){Oe(n,e);var t=je(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return pe(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ye(n,[{key:"execute",value:function(){var e=tr(Xn().mark((function e(){var t,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ac.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Rc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Re(Ae(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ac.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ac.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=tr(Xn().mark((function e(t){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Re(Ae(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Re(Ae(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(_c);function Rc(e,t){return Dc.apply(this,arguments)}function Dc(){return(Dc=tr(Xn().mark((function e(t,n){var r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uc(n),i=Fc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oc(e,t){return Lc.apply(this,arguments)}function Lc(){return(Lc=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fc(t)._set(Uc(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mc(e,t){Ac.set(e._key(),t)}function Fc(e){return ea(e._redirectPersistence)}function Uc(e){return Ha("pendingRedirect",e.config.apiKey,e.name)}function jc(e,t,n){return function(e,t,n){return Vc.apply(this,arguments)}(e,t,n)}function Vc(){return(Vc=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),Qi(t,n,$o),a=yc(i,r),e.next=5,Oc(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qc(e,t,n){return function(e,t,n){return Bc.apply(this,arguments)}(e,t,n)}function Bc(){return(Bc=tr(Xn().mark((function e(t,n,r){var i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qi((i=Jn(t)).auth,n,$o),a=yc(i.auth,r),e.next=5,Oc(a,i.auth);case 5:return e.next=7,Zc(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zc(e,t,n){return function(e,t,n){return Wc.apply(this,arguments)}(e,t,n)}function Wc(){return(Wc=tr(Xn().mark((function e(t,n,r){var i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qi((i=Jn(t)).auth,n,$o),a=yc(i.auth,r),e.next=5,gu(!1,i,n.providerId);case 5:return e.next=7,Oc(a,i.auth);case 7:return e.next=9,Zc(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kc(e,t){return Hc.apply(this,arguments)}function Hc(){return(Hc=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,co(t)._initializationPromise;case 2:return e.abrupt("return",Gc(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gc(e,t){return Qc.apply(this,arguments)}function Qc(){return Qc=tr(Xn().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=co(t),a=yc(i,n),o=new Pc(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Qc.apply(this,arguments)}function Zc(e){return Yc.apply(this,arguments)}function Yc(){return(Yc=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_s("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $c=function(){function e(t){pe(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ye(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Xc(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Hi(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jc(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Jc(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Jc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Xc(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function el(e){return tl.apply(this,arguments)}function tl(){return tl=tr(Xn().mark((function e(t){var n,r=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",la(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),tl.apply(this,arguments)}var nl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rl=/^https?/;function il(){return(il=tr(Xn().mark((function e(t){var n,r,i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,el(t);case 4:n=e.sent,r=n.authorizedDomains,i=nn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!al(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ki(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function al(e){var t=ta(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!rl.test(r))return!1;if(nl.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var ol=new ia(3e4,6e4);function ul(){var e=Es().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=he(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var sl=null;function cl(e){return sl=sl||function(e){return new Promise((function(t,n){var r,i,a;function o(){ul(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ul(),n(Hi(e,"network-request-failed"))},timeout:ol.get()})}if(null===(i=null===(r=Es().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Es().gapi)||void 0===a?void 0:a.load)){var u=Gs("iframefcb");return Es()[u]=function(){gapi.load?o():n(Hi(e,"network-request-failed"))},Hs("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw sl=null,e}))}(e),sl}var ll=new ia(5e3,15e3),fl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dl(e){var t=e.config;Yi(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?aa(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Zr},i=hl.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Vn(r).slice(1))}function pl(e){return vl.apply(this,arguments)}function vl(){return vl=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cl(t);case 2:return n=e.sent,Yi(r=Es().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:dl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fl,dontclear:!0},(function(e){return new Promise(function(){var n=tr(Xn().mark((function n(r,i){var a,o,u;return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Es().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Hi(t,"network-request-failed"),o=Es().setTimeout((function(){i(a)}),ll.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}var yl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ml="_blank",gl="http://localhost",kl=function(){function e(t){pe(this,e),this.window=t,this.associatedEvent=null}return ye(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(mF){}}}]),e}();function wl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},yl),{width:r.toString(),height:i.toString(),top:a,left:o}),l=kn().toLowerCase();n&&(u=$a(l)?ml:n),Za(l)&&(t=t||gl,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ro(l)&&"_self"!==u)return bl(t||"",u),new kl(null);var h=window.open(t||"",u,f);Yi(h,e,"popup-blocked");try{h.focus()}catch(mF){}return new kl(h)}function bl(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var _l="__/auth/handler",xl="emulator/auth/handler";function El(e,t,n,r,i,a){Yi(e.config.authDomain,e,"auth-domain-config-required"),Yi(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Zr,eventId:i};if(t instanceof $o){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Mn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Jo){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(_l);return aa(t,xl)}(e),"?").concat(Vn(p).slice(1))}var Il="webStorageSupport",Sl=function(){function e(){pe(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ks,this._completeRedirectFn=Gc,this._overrideRedirectResult=Mc}return ye(e,[{key:"_openPopup",value:function(){var e=tr(Xn().mark((function e(t,n,r,i){var a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ji(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=El(t,n,r,ta(),i),e.abrupt("return",wl(t,o,_s()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=tr(Xn().mark((function e(t,n,r,i){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=El(t,n,r,ta(),i),Es().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Ji(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pl(t);case 2:return n=e.sent,r=new $c(t),n.register("authEvent",(function(e){return Yi(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Il,{type:Il},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ki(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return il.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ao()||Ya()||no()}}]),e}(),Tl=Sl,Cl=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this,"phone")).credential=e,r}return ye(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return la(e,"POST","/v2/accounts/mfaEnrollment:finalize",ca(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return la(e,"POST","/v2/accounts/mfaSignIn:finalize",ca(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){pe(this,e),this.factorId=t}return ye(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return $i("unexpected MultiFactorSessionType")}}}]),e}()),Nl=function(){function e(){pe(this,e)}return ye(e,null,[{key:"assertion",value:function(e){return Cl._fromCredential(e)}}]),e}();Nl.FACTOR_ID="phone";var Al,Pl="@firebase/auth",Rl="0.20.3",Dl=function(){function e(t){pe(this,e),this.auth=t,this.internalListeners=new Map}return ye(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Yi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ol(){return window}Al="Browser",Br(new nr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Yi(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Yi(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Al,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oo(Al)},i=new so(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ea);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Br(new nr("auth-internal",(function(e){return function(e){return new Dl(e)}(co(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ti(Pl,Rl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Al)),ti(Pl,Rl,"esm2017");function Ll(e,t,n){return Ml.apply(this,arguments)}function Ml(){return Ml=tr(Xn().mark((function e(t,n,r){var i,a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ol(),o=a.BuildInfo,Ji(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Bl(n.sessionId);case 4:return u=e.sent,s={},no()?s.ibi=o.packageName:Xa()?s.apn=o.packageName:Ki(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",El(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Ml.apply(this,arguments)}function Fl(){return(Fl=tr(Xn().mark((function e(t){var n,r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ol(),r=n.BuildInfo,i={},no()?i.iosBundleId=r.packageName:Xa()?i.androidPackageName=r.packageName:Ki(t,"operation-not-supported-in-this-environment"),e.next=5,el(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ul(e){var t=Ol().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function jl(e,t,n){return Vl.apply(this,arguments)}function Vl(){return Vl=tr(Xn().mark((function e(t,n,r){var i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ol(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Hi(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Xa()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Vl.apply(this,arguments)}function ql(e){var t,n,r,i,a,o,u,s,c,l,f=Ol();Yi("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Yi("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Yi("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Yi("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Yi("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Bl(e){return zl.apply(this,arguments)}function zl(){return(zl=tr(Xn().mark((function e(t){var n,r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Wl(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wl(e){if(Ji(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Kl=function(e){Oe(n,e);var t=je(n);function n(){var e;return pe(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ye(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Re(Ae(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}($c);function Hl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:$l(),postBody:null,tenantId:e.tenantId,error:Hi(e,"no-auth-event")}}function Gl(e,t){return Jl()._set(Xl(e),t)}function Ql(e){return Zl.apply(this,arguments)}function Zl(){return(Zl=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jl()._get(Xl(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Jl()._remove(Xl(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yl(e,t){var n,r,i=function(e){var t=ef(e),n=t.link?decodeURIComponent(t.link):void 0,r=ef(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ef(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=ef(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(mF){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Hi(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function $l(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Jl(){return ea(ms)}function Xl(e){return Ha("authEvent",e.config.apiKey,e.name)}function ef(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||fe(t)||o(t)||u();r[0];return qn(r.slice(1).join("?"))}var tf=function(){function e(){pe(this,e),this._redirectPersistence=ks,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gc,this._overrideRedirectResult=Mc}return ye(e,[{key:"_initialize",value:function(){var e=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Kl(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ki(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=tr(Xn().mark((function e(t,n,r,i){var a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ql(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ac.clear(),e.next=10,this._originValidation(t);case 10:return o=Hl(t,r,i),e.next=13,Gl(t,o);case 13:return e.next=15,Ll(t,o,n);case 15:return u=e.sent,e.next=18,Ul(u);case 18:return s=e.sent,e.abrupt("return",jl(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Fl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Ol(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(tr(Xn().mark((function n(){return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ql(e);case 2:t.onEvent(rf());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=tr(Xn().mark((function n(r){var i,a;return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Ql(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Yl(i,r.url)),t.onEvent(a||rf());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Ol().handleOpenURL=function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(mF){console.error(mF)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),nf=tf;function rf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Hi("no-auth-event")}}function af(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function of(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return!("file:"!==af()&&"ionic:"!==af()&&"capacitor:"!==af()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function uf(){return En()&&11===(null===document||void 0===document?void 0:document.documentMode)}function sf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return/Edge\/\d+/.test(e)}function cf(){try{var e=self.localStorage,t=_s();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();return uf()||sf(e)}()||Sn()}catch(mF){return lf()&&Sn()}return!1}function lf(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ff(){return("http:"===af()||"https:"===af()||_n()||of())&&!(xn()||bn())&&cf()&&!lf()}function hf(){return of()&&"undefined"!==typeof document}function df(){return pf.apply(this,arguments)}function pf(){return(pf=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hf()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vf={LOCAL:"local",NONE:"none",SESSION:"session"},yf=Yi,mf="persistence";function gf(e,t){yf(Object.values(vf).includes(t),e,"invalid-persistence-type"),xn()?yf(t!==vf.SESSION,e,"unsupported-persistence-type"):bn()?yf(t===vf.NONE,e,"unsupported-persistence-type"):lf()?yf(t===vf.NONE||t===vf.LOCAL&&Sn(),e,"unsupported-persistence-type"):yf(t===vf.NONE||cf(),e,"unsupported-persistence-type")}function kf(e){return wf.apply(this,arguments)}function wf(){return(wf=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=bf(),r=Ha(mf,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bf(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(mF){return null}}var _f=Yi,xf=function(){function e(){pe(this,e),this.browserResolver=ea(Tl),this.cordovaResolver=ea(nf),this.underlyingResolver=null,this._redirectPersistence=ks,this._completeRedirectFn=Gc,this._overrideRedirectResult=Mc}return ye(e,[{key:"_initialize",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=tr(Xn().mark((function e(t,n,r,i){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=tr(Xn().mark((function e(t,n,r,i){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return hf()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return _f(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,df();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ef(e){return e.unwrap()}function If(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Af(e,function(e,t){var n,r=Jn(e),i=t;return Yi(t.customData.operationType,r,"argument-error"),Yi(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ls._fromError(r,i)}(e,t));else if(r){var i=Sf(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Sf(e){var t=(e instanceof Tn?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Tn)&&"temporaryProof"in t&&"phoneNumber"in t)return vc.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Pi)return null;switch(r){case Ai:n=tu;break;case Ci:n=eu;break;case Ni:n=nu;break;case Ri:n=au;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ru._create(r,u):qo._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Xo(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Tn?n.credentialFromError(e):n.credentialFromResult(e)}function Tf(e,t){return t.catch((function(t){throw t instanceof Tn&&If(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Sf(t)),additionalUserInfo:ss(e),user:Pf.getOrCreate(r)}}))}function Cf(e,t){return Nf.apply(this,arguments)}function Nf(){return(Nf=tr(Xn().mark((function e(t,n){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Tf(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Af=function(){function e(t,n){pe(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return ye(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Tf(Ef(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Pf=function(){function e(t){pe(this,e),this._delegate=t,this.multiFactor=function(e){var t=Jn(e);return ds.has(t)||ds.set(t,hs._fromUser(t)),ds.get(t)}(t)}return ye(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tf(this.auth,Su(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cf(this.auth,cc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tf(this.auth,Tc(this._delegate,t,xf)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kf(co(this.auth));case 2:return e.abrupt("return",zc(this._delegate,t,xf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tf(this.auth,Cu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Cf(this.auth,function(e,t,n){return fc.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Tf(this.auth,function(e,t,n){return Sc.apply(this,arguments)}(this._delegate,e,xf))}},{key:"reauthenticateWithRedirect",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kf(co(this.auth));case 2:return e.abrupt("return",qc(this._delegate,t,xf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Zu.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pu(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return es(Jn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return es(Jn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return pc.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Xu.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Yu.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Pf.USER_MAP=new WeakMap;var Rf=Yi,Df=function(){function e(t,n){if(pe(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Rf(r,"invalid-api-key",{appName:t.name}),Rf(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?xf:void 0;this._delegate=n.initialize({options:{persistence:Lf(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Vi),this.linkUnderlyingAuth()}return ye(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Pf.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){fo(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Uu.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ju(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Fu.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tf(this._delegate,Bu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Qu.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Zo.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rf(ff(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Kc(this._delegate,xf);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Tf(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){co(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Of(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Of(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Wu.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Mu.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gf(this._delegate,t),e.t0=t,e.next=e.t0===vf.SESSION?4:e.t0===vf.LOCAL?6:e.t0===vf.NONE?11:13;break;case 4:return n=ks,e.abrupt("break",14);case 6:return e.next=8,ea(Bs)._isAvailable();case 8:return r=e.sent,n=r?Bs:ms,e.abrupt("break",14);case 11:return n=Ka,e.abrupt("break",14);case 13:return e.abrupt("return",Ki("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Tf(this._delegate,function(e){return lu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Tf(this._delegate,Eu(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Tf(this._delegate,function(e,t){return Ru.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Tf(this._delegate,function(e,t,n){return Eu(Jn(e),Yo.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Tf(this._delegate,function(e,t,n){return Ku.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Cf(this._delegate,function(e,t,n){return sc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rf(ff(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Tf(this._delegate,Ec(this._delegate,t,xf)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rf(ff(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,kf(this._delegate);case 3:return e.abrupt("return",jc(this._delegate,t,xf));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return qu.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Of(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Pf.getOrCreate(e))},error:t,complete:n}}function Lf(e,t){var n=function(e,t){var n=bf();if(!n)return[];var r=Ha(mf,e,t);switch(n.getItem(r)){case vf.NONE:return[Ka];case vf.LOCAL:return[Bs,ks];case vf.SESSION:return[ks];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Bs)||n.push(Bs),"undefined"!==typeof window)for(var r=0,i=[ms,ks];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Ka)||n.push(Ka),n}Df.Persistence=vf;var Mf=function(){function e(){pe(this,e),this.providerId="phone",this._delegate=new vc(Ef(Ii.auth()))}return ye(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return vc.credential(e,t)}}]),e}();Mf.PHONE_SIGN_IN_METHOD=vc.PHONE_SIGN_IN_METHOD,Mf.PROVIDER_ID=vc.PROVIDER_ID;var Ff,Uf=Yi,jf=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ii.app();pe(this,e),Uf(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ac(t,n,i.auth()),this.type=this._delegate.type}return ye(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ff=Ii).INTERNAL.registerComponent(new nr("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Df(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Di,PASSWORD_RESET:Oi,RECOVER_EMAIL:Li,REVERT_SECOND_FACTOR_ADDITION:Mi,VERIFY_AND_CHANGE_EMAIL:Fi,VERIFY_EMAIL:Ui}},EmailAuthProvider:Yo,FacebookAuthProvider:eu,GithubAuthProvider:nu,GoogleAuthProvider:tu,OAuthProvider:Xo,SAMLAuthProvider:iu,PhoneAuthProvider:Mf,PhoneMultiFactorGenerator:Nl,RecaptchaVerifier:jf,TwitterAuthProvider:au,Auth:Df,AuthCredential:vo,Error:Tn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ff.registerVersion("@firebase/auth-compat","0.2.16");var Vf="@firebase/database",qf="0.13.1",Bf="";function zf(e){Bf=e}var Wf=function(){function e(t){pe(this,e),this.domStorage_=t,this.prefix_="firebase:"}return ye(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Rn(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Pn(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Kf=function(){function e(){pe(this,e),this.cache_={},this.isInMemoryStorage=!0}return ye(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return On(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Hf=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Wf(t)}}catch(mF){}return new Kf},Gf=Hf("localStorage"),Qf=Hf("sessionStorage"),Zf=new dr("@firebase/database"),Yf=function(){var e=1;return function(){return e++}}(),$f=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,cn(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new zn;n.update(t);var r=n.digest();return hn.encodeByteArray(r)},Jf=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Rn(r):r,t+=" "}return t},Xf=null,eh=!0,th=function(e,t){cn(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Zf.logLevel=or.VERBOSE,Xf=Zf.log.bind(Zf),t&&Qf.set("logging_enabled",!0)):"function"===typeof e?Xf=e:(Xf=null,Qf.remove("logging_enabled"))},nh=function(){if(!0===eh&&(eh=!1,null===Xf&&!0===Qf.get("logging_enabled")&&th(!0)),Xf){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Jf.apply(null,t);Xf(r)}},rh=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];nh.apply(void 0,[e].concat(n))}},ih=function(){var e="FIREBASE INTERNAL ERROR: "+Jf.apply(void 0,arguments);Zf.error(e)},ah=function(){var e="FIREBASE FATAL ERROR: ".concat(Jf.apply(void 0,arguments));throw Zf.error(e),new Error(e)},oh=function(){var e="FIREBASE WARNING: "+Jf.apply(void 0,arguments);Zf.warn(e)},uh=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},sh="[MIN_NAME]",ch="[MAX_NAME]",lh=function(e,t){if(e===t)return 0;if(e===sh||t===ch)return-1;if(t===sh||e===ch)return 1;var n=wh(e),r=wh(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},fh=function(e,t){return e===t?0:e<t?-1:1},hh=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Rn(t))},dh=function e(t){if("object"!==typeof t||null===t)return Rn(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Rn(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},ph=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function vh(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var yh=function(e){cn(!uh(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var mh=new RegExp("^-?(0*)\\d{1,10}$"),gh=-2147483648,kh=2147483647,wh=function(e){if(mh.test(e)){var t=Number(e);if(t>=gh&&t<=kh)return t}return null},bh=function(e){try{e()}catch(mF){setTimeout((function(){var t=mF.stack||"";throw oh("Exception was thrown by user callback.",t),mF}),Math.floor(0))}},_h=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},xh=function(){function e(t,n){var r=this;pe(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return ye(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){oh('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Eh=function(){function e(t,n,r){var i=this;pe(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return ye(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(nh("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',oh(e)}}]),e}(),Ih=function(){function e(t){pe(this,e),this.accessToken=t}return ye(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Ih.OWNER="owner";var Sh="5",Th=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ch="websocket",Nh="long_polling",Ah=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];pe(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gf.get("host:"+t)||this._host}return ye(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Gf.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Ph(e,t,n){var r;if(cn("string"===typeof t,"typeof type must == string"),cn("object"===typeof n,"typeof params must == object"),t===Ch)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Nh)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return vh(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Rh=function(){function e(){pe(this,e),this.counters_={}}return ye(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;On(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return yn(void 0,this.counters_)}}]),e}(),Dh={},Oh={};function Lh(e){var t=e.toString();return Dh[t]||(Dh[t]=new Rh),Dh[t]}var Mh=function(){function e(t){pe(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return ye(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&bh((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Fh="start",Uh="close",jh=function(){function e(t,n,r,i,a,o,u){var s=this;pe(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rh(t),this.stats_=Lh(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),Ph(n,Nh,e)}}return ye(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Mh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(In()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Vh((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Fh)n.id=a,n.password=o;else{if(i!==Uh)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Sh,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Th.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Rn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=dn(t),r=ph(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!In()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Rn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!In()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Vh=function(){function e(t,n,r,i){if(pe(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,In())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Yf(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(mF){nh("frame writing exception"),mF.stack&&nh(mF.stack),nh(mF)}}}return ye(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;In()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){nh("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(mF){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||nh("No IE domain setting required")}catch(mF){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),qh=null;"undefined"!==typeof MozWebSocket?qh=MozWebSocket:"undefined"!==typeof WebSocket&&(qh=WebSocket);var Bh=function(){function e(t,n,r,i,a,o,u){pe(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rh(this.connId),this.stats_=Lh(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return ye(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gf.set("previous_websocket_failure",!0);try{if(In()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(Sh,"/").concat(Bf,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/chipadmin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new qh(this.connURL,[],undefined)}catch(mF){this.log_("Error instantiating WebSocket.");var u=mF.message||mF.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Gf.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Pn(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(cn(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Rn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=ph(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(mF){this.log_("Exception thrown from WebSocket.send():",mF.message||mF.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Sh,!In()&&"undefined"!==typeof location&&location.hostname&&Th.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),Ph(e,Ch,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==qh&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Gf.isInMemoryStorage||!0===Gf.get("previous_websocket_failure")}}]),e}();Bh.responsesRequiredToBeHealthy=2,Bh.healthyTimeout=3e4;var zh=function(){function e(t){pe(this,e),this.initTransports_(t)}return ye(e,[{key:"initTransports_",value:function(t){var n=Bh&&Bh.isAvailable(),r=n&&!Bh.previouslyFailed();if(t.webSocketOnly&&(n||oh("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Bh];else{var i,a=this.transports_=[],o=nn(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[jh,Bh]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();zh.globalTransportInitialized_=!1;var Wh=function(){function e(t,n,r,i,a,o,u,s,c,l){pe(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rh("c:"+this.id+":"),this.transportManager_=new zh(n),this.log_("Connection created"),this.start_()}return ye(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=_h((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=hh("t",e),n=hh("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=hh("t",e),n=hh("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=hh("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?ih("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ih("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Sh!==n&&oh("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),_h((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_h((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Kh=function(){function e(){pe(this,e)}return ye(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Hh=function(){function e(t){pe(this,e),this.allowedEvents_=t,this.listeners_={},cn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return ye(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=he(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){cn(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Gh=function(e){Oe(n,e);var t=je(n);function n(){var e;return pe(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||wn()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return ye(n,[{key:"getInitialEvent",value:function(e){return cn("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Hh),Qh=function(){function e(t,n){if(pe(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return ye(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Zh(){return new Qh("")}function Yh(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function $h(e){return e.pieces_.length-e.pieceNum_}function Jh(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Qh(e.pieces_,t)}function Xh(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ed(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function td(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Qh(t,0)}function nd(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Qh)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Qh(n,0)}function rd(e){return e.pieceNum_>=e.pieces_.length}function id(e,t){var n=Yh(e),r=Yh(t);if(null===n)return t;if(n===r)return id(Jh(e),Jh(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ad(e,t){for(var n=ed(e,0),r=ed(t,0),i=0;i<n.length&&i<r.length;i++){var a=lh(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function od(e,t){if($h(e)!==$h(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ud(e,t){var n=e.pieceNum_,r=t.pieceNum_;if($h(e)>$h(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var sd=ye((function e(t,n){pe(this,e),this.errorPrefix_=n,this.parts_=ed(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=$n(this.parts_[r]);cd(this)}));function cd(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ld(e))}function ld(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var fd=function(e){Oe(n,e);var t=je(n);function n(){var e,r,i;return pe(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return ye(n,[{key:"getInitialEvent",value:function(e){return cn("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Hh),hd=1e3,dd=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a,o,u,s,c){var l;if(pe(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=rh("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=hd,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!In())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return fd.getInstance().on("visible",l.onVisible_,Fe(l)),-1===e.host.indexOf("fblocal")&&Gh.getInstance().on("online",l.onOnline_,Fe(l)),l}return ye(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Rn(i)),cn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new mn,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),cn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),cn(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Dn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Dn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),cn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Rn(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):ih("Unrecognized action received from server: "+Rn(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;cn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=hd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=hd),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=tr(Xn().mark((function e(){var t,r,i,a,o,u,c,l,f,h,d,p,v,y,m=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},f=function(e){cn(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=s(d,2),v=p[0],y=p[1],u?nh("getToken() completed but was canceled"):(nh("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,c=new Wh(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){oh(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&oh(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){nh("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){nh("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Mn(this.interruptReasons_)&&(this.reconnectDelay_=hd,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return dh(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Qh(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){nh("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){nh("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=nn(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=nn(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";In()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Bf.replace(/\./g,"-")]=1,wn()?e["framework.cordova"]=1:xn()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Gh.getInstance().currentlyOnline();return Mn(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&On(e,"w")){var n=Ln(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();oh("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Kh);dd.nextPersistentConnectionId_=0,dd.nextConnectionId_=0;var pd,vd=function(){function e(t,n){pe(this,e),this.name=t,this.node=n}return ye(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),yd=function(){function e(){pe(this,e)}return ye(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new vd(sh,e),r=new vd(sh,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return vd.MIN}}]),e}(),md=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"compare",value:function(e,t){return lh(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw ln("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return vd.MIN}},{key:"maxPost",value:function(){return new vd(ch,pd)}},{key:"makePost",value:function(e,t){return cn("string"===typeof e,"KeyIndex indexValue must always be a string."),new vd(e,pd)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return pd},set:function(e){pd=e}}]),n}(yd),gd=new md,kd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;pe(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return ye(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),wd=function(){function e(t,n,r,i,a){pe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:xd.EMPTY_NODE,this.right=null!=a?a:xd.EMPTY_NODE}return ye(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return xd.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return xd.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();wd.RED=!0,wd.BLACK=!1;var bd,_d=function(){function e(){pe(this,e)}return ye(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new wd(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),xd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;pe(this,e),this.comparator_=t,this.root_=n}return ye(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,wd.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,wd.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new kd(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new kd(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new kd(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new kd(this.root_,null,this.comparator_,!0,e)}}]),e}();function Ed(e,t){return lh(e.name,t.name)}function Id(e,t){return lh(e,t)}xd.EMPTY_NODE=new _d;var Sd,Td,Cd,Nd=function(e){return"number"===typeof e?"number:"+yh(e):"string:"+e},Ad=function(e){if(e.isLeafNode()){var t=e.val();cn("string"===typeof t||"number"===typeof t||"object"===typeof t&&On(t,".sv"),"Priority must be a string or number.")}else cn(e===bd||e.isEmpty(),"priority of unexpected type.");cn(e===bd||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Pd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;pe(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,cn(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ad(this.priorityNode_)}return ye(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return rd(t)?this:".priority"===Yh(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Yh(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(cn(".priority"!==r||1===$h(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jh(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Nd(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?yh(this.value_):this.value_,this.lazyHash_=$f(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(cn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return cn(i>=0,"Unknown leaf type: "+n),cn(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Sd},set:function(e){Sd=e}}]),e}();Pd.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Rd,Dd,Od=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?lh(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return vd.MIN}},{key:"maxPost",value:function(){return new vd(ch,new Pd("[PRIORITY-POST]",Cd))}},{key:"makePost",value:function(e,t){var n=Td(e);return new vd(t,new Pd("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(yd),Ld=new Od,Md=Math.log(2),Fd=function(){function e(t){pe(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Md,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return ye(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Ud=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new wd(o,a.node,wd.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new wd(o,a.node,wd.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new wd(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,wd.BLACK):(u(f,wd.BLACK),u(f,wd.RED))}return a}(new Fd(e.length));return new xd(r||t,a)},jd={},Vd=function(){function e(t,n){pe(this,e),this.indexes_=t,this.indexSet_=n}return ye(e,[{key:"get",value:function(e){var t=Ln(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof xd?t:null}},{key:"hasIndex",value:function(e){return On(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){cn(t!==gd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(vd.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?Ud(i,t.getCompare()):jd;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Fn(this.indexes_,(function(e,i){var a=Ln(r.indexSet_,i);if(cn(a,"Missing index implementation for "+i),e===jd){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(vd.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),Ud(o,a.getCompare())}return jd}var c=n.get(t.name),l=e;return c&&(l=l.remove(new vd(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Fn(this.indexes_,(function(e){if(e===jd)return e;var r=n.get(t.name);return r?e.remove(new vd(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return cn(jd&&Ld,"ChildrenNode.ts has not been loaded"),Rd=Rd||new e({".priority":jd},{".priority":Ld})}}]),e}(),qd=function(){function e(t,n,r){pe(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ad(this.priorityNode_),this.children_.isEmpty()&&cn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return ye(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Dd}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Dd:t}},{key:"getChild",value:function(e){var t=Yh(e);return null===t?this:this.getImmediateChild(t).getChild(Jh(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(cn(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new vd(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Dd:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Yh(e);if(null===n)return t;cn(".priority"!==Yh(e)||1===$h(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Jh(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Ld,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Nd(this.getPriority().val())+":"),this.forEachChild(Ld,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":$f(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new vd(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new vd(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new vd(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,vd.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,vd.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Bd?-1:0}},{key:"withIndex",value:function(t){if(t===gd||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===gd||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Ld),r=t.getIterator(Ld),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===gd?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Dd||(Dd=new e(new xd(Id),null,Vd.Default))}}]),e}();qd.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Bd=new(function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.call(this,new xd(Id),qd.EMPTY_NODE,Vd.Default)}return ye(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return qd.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(qd));Object.defineProperties(vd,{MIN:{value:new vd(sh,qd.EMPTY_NODE)},MAX:{value:new vd(ch,Bd)}}),md.__EMPTY_NODE=qd.EMPTY_NODE,Pd.__childrenNodeConstructor=qd,bd=Bd,function(e){Cd=e}(Bd);function zd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return qd.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),cn(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Pd(n,zd(t))}if(e instanceof Array){var r=qd.EMPTY_NODE;return vh(e,(function(t,n){if(On(e,t)&&"."!==t.substring(0,1)){var i=zd(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(zd(t))}var i=[],a=!1,o=e;if(vh(o,(function(e,t){if("."!==e.substring(0,1)){var n=zd(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new vd(e,n)))}})),0===i.length)return qd.EMPTY_NODE;var u=Ud(i,Ed,(function(e){return e.name}),Id);if(a){var s=Ud(i,Ld.getCompare());return new qd(u,zd(t),new Vd({".priority":s},{".priority":Ld}))}return new qd(u,zd(t),Vd.Default)}!function(e){Td=e}(zd);var Wd=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this)).indexPath_=e,cn(!rd(e)&&".priority"!==Yh(e),"Can't create PathIndex with empty path or .priority key"),r}return ye(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?lh(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=zd(e),r=qd.EMPTY_NODE.updateChild(this.indexPath_,n);return new vd(t,r)}},{key:"maxPost",value:function(){var e=qd.EMPTY_NODE.updateChild(this.indexPath_,Bd);return new vd(ch,e)}},{key:"toString",value:function(){return ed(this.indexPath_,0).join("/")}}]),n}(yd),Kd=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?lh(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return vd.MIN}},{key:"maxPost",value:function(){return vd.MAX}},{key:"makePost",value:function(e,t){var n=zd(e);return new vd(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(yd),Hd=new Kd,Gd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Qd=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Gd.charAt(n%64),n=Math.floor(n/64);cn(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Gd.charAt(t[r]);return cn(20===o.length,"nextPushId: Length should be 20."),o}}(),Zd=function(e){if("2147483647"===e)return"-";var t=wh(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return ch;var a=n[i],o=Gd.charAt(Gd.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},Yd=function(e){if("-2147483648"===e)return sh;var t=wh(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Gd.charAt(Gd.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function $d(e){return{type:"value",snapshotNode:e}}function Jd(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Xd(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ep(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var tp=function(){function e(t){pe(this,e),this.index_=t}return ye(e,[{key:"updateChild",value:function(e,t,n,r,i,a){cn(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Xd(t,o)):cn(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Jd(t,n)):a.trackChildChange(ep(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ld,(function(e,r){t.hasChild(e)||n.trackChildChange(Xd(e,r))})),t.isLeafNode()||t.forEachChild(Ld,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(ep(t,r,i))}else n.trackChildChange(Jd(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?qd.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),np=function(){function e(t){pe(this,e),this.indexedFilter_=new tp(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return ye(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new vd(t,n))||(n=qd.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=qd.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(qd.EMPTY_NODE);var i=this;return t.forEachChild(Ld,(function(e,t){i.matches(new vd(e,t))||(r=r.updateImmediateChild(e,qd.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),rp=function(){function e(t){pe(this,e),this.rangedFilter_=new np(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return ye(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new vd(t,n))||(n=qd.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=qd.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=qd.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(qd.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,s)<=0?h++:r=r.updateImmediateChild(p.name,qd.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;cn(u.numChildren()===this.limit_,"");var s=new vd(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(ep(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Xd(t,f));var p=u.updateImmediateChild(t,qd.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(Jd(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(Xd(c.name,c.node)),i.trackChildChange(Jd(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,qd.EMPTY_NODE)):e}}]),e}(),ip=function(){function e(){pe(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ld}return ye(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return cn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return cn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sh}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return cn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return cn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ch}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return cn(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Ld}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function ap(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function op(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function up(e,t){var n=e.copy();return n.index_=t,n}function sp(e){var t,n={};return e.isDefault()||(e.index_===Ld?t="$priority":e.index_===Hd?t="$value":e.index_===gd?t="$key":(cn(e.index_ instanceof Wd,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Rn(t),e.startSet_&&(n.startAt=Rn(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Rn(e.indexStartName_))),e.endSet_&&(n.endAt=Rn(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Rn(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function cp(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ld&&(t.i=e.index_.toString()),t}var lp=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a){var o;return pe(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=rh("p:rest:"),o.listens_={},o}return ye(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=sp(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Ln(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=sp(e._queryParams),r=e._path.toString(),i=new mn;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=s(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Vn(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Pn(l.responseText)}catch(mF){oh("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&oh("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(cn(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Kh),fp=function(){function e(){pe(this,e),this.rootNode_=qd.EMPTY_NODE}return ye(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function hp(){return{value:null,children:new Map}}function dp(e,t,n){if(rd(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Yh(t);e.children.has(r)||e.children.set(r,hp()),dp(e.children.get(r),t=Jh(t),n)}}function pp(e,t){if(rd(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Ld,(function(t,n){dp(e,new Qh(t),n)})),pp(e,t)}if(e.children.size>0){var r=Yh(t);if(t=Jh(t),e.children.has(r))pp(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function vp(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){vp(r,new Qh(t.toString()+"/"+e),n)}))}var yp,mp=function(){function e(t){pe(this,e),this.collection_=t,this.last_=null}return ye(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&vh(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),gp=function(){function e(t,n){pe(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new mp(t);var r=1e4+2e4*Math.random();_h(this.reportStats_.bind(this),Math.floor(r))}return ye(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;vh(t,(function(t,i){i>0&&On(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),_h(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function kp(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(yp||(yp={}));var wp,bp=function(){function e(t,n,r){pe(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=yp.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return ye(e,[{key:"operationForChild",value:function(t){if(rd(this.path)){if(null!=this.affectedTree.value)return cn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Qh(t));return new e(Zh(),n,this.revert)}return cn(Yh(this.path)===t,"operationForChild called for unrelated child."),new e(Jh(this.path),this.affectedTree,this.revert)}}]),e}(),_p=function(){function e(t,n){pe(this,e),this.source=t,this.path=n,this.type=yp.LISTEN_COMPLETE}return ye(e,[{key:"operationForChild",value:function(t){return rd(this.path)?new e(this.source,Zh()):new e(this.source,Jh(this.path))}}]),e}(),xp=function(){function e(t,n,r){pe(this,e),this.source=t,this.path=n,this.snap=r,this.type=yp.OVERWRITE}return ye(e,[{key:"operationForChild",value:function(t){return rd(this.path)?new e(this.source,Zh(),this.snap.getImmediateChild(t)):new e(this.source,Jh(this.path),this.snap)}}]),e}(),Ep=function(){function e(t,n,r){pe(this,e),this.source=t,this.path=n,this.children=r,this.type=yp.MERGE}return ye(e,[{key:"operationForChild",value:function(t){if(rd(this.path)){var n=this.children.subtree(new Qh(t));return n.isEmpty()?null:n.value?new xp(this.source,Zh(),n.value):new e(this.source,Zh(),n)}return cn(Yh(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Jh(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Ip=function(){function e(t,n,r){pe(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return ye(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(rd(e))return this.isFullyInitialized()&&!this.filtered_;var t=Yh(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Sp=ye((function e(t){pe(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Tp(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw ln("Should only compare child_ events.");var r=new vd(t.childName,t.snapshotNode),i=new vd(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Cp(e,t){return{eventCache:e,serverCache:t}}function Np(e,t,n,r){return Cp(new Ip(t,n,r),e.serverCache)}function Ap(e,t,n,r){return Cp(e.eventCache,new Ip(t,n,r))}function Pp(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Rp(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Dp=function(){return wp||(wp=new xd(fh)),wp},Op=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dp();pe(this,e),this.value=t,this.children=n}return ye(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Zh(),value:this.value};if(rd(e))return null;var n=Yh(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Jh(e),t);return null!=i?{path:nd(new Qh(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(rd(t))return this;var n=Yh(t),r=this.children.get(n);return null!==r?r.subtree(Jh(t)):new e(null)}},{key:"set",value:function(t,n){if(rd(t))return new e(n,this.children);var r=Yh(t),i=(this.children.get(r)||new e(null)).set(Jh(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(rd(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Yh(t),r=this.children.get(n);if(r){var i,a=r.remove(Jh(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(rd(e))return this.value;var t=Yh(e),n=this.children.get(t);return n?n.get(Jh(e)):null}},{key:"setTree",value:function(t,n){if(rd(t))return n;var r,i=Yh(t),a=(this.children.get(i)||new e(null)).setTree(Jh(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Zh(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(nd(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Zh(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(rd(e))return null;var i=Yh(e),a=this.children.get(i);return a?a.findOnPath_(Jh(e),nd(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Zh(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(rd(t))return this;this.value&&r(n,this.value);var i=Yh(t),a=this.children.get(i);return a?a.foreachOnPath_(Jh(t),nd(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Zh(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(nd(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return vh(t,(function(e,t){n=n.set(new Qh(e),t)})),n}}]),e}(),Lp=function(){function e(t){pe(this,e),this.writeTree_=t}return ye(e,null,[{key:"empty",value:function(){return new e(new Op(null))}}]),e}();function Mp(e,t,n){if(rd(t))return new Lp(new Op(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=id(i,t);return a=a.updateChild(o,n),new Lp(e.writeTree_.set(i,a))}var u=new Op(n),s=e.writeTree_.setTree(t,u);return new Lp(s)}function Fp(e,t,n){var r=e;return vh(n,(function(e,n){r=Mp(r,nd(t,e),n)})),r}function Up(e,t){if(rd(t))return Lp.empty();var n=e.writeTree_.setTree(t,new Op(null));return new Lp(n)}function jp(e,t){return null!=Vp(e,t)}function Vp(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(id(n.path,t)):null}function qp(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ld,(function(e,n){t.push(new vd(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new vd(e,n.value))})),t}function Bp(e,t){if(rd(t))return e;var n=Vp(e,t);return new Lp(null!=n?new Op(n):e.writeTree_.subtree(t))}function zp(e){return e.writeTree_.isEmpty()}function Wp(e,t){return Kp(Zh(),e.writeTree_,t)}function Kp(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(cn(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Kp(nd(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(nd(e,".priority"),r)),n}function Hp(e,t){return ov(t,e)}function Gp(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Qp(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));cn(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&Zp(u,r.path)?i=!1:ud(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=$p(e.allWrites,Yp,Zh()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Up(e.visibleWrites,r.path):vh(r.children,(function(t){e.visibleWrites=Up(e.visibleWrites,nd(r.path,t))}));return!0}return!1}function Zp(e,t){if(e.snap)return ud(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&ud(nd(e.path,n),t))return!0;return!1}function Yp(e){return e.visible}function $p(e,t,n){for(var r=Lp.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)ud(n,o)?r=Mp(r,u=id(n,o),a.snap):ud(o,n)&&(u=id(o,n),r=Mp(r,Zh(),a.snap.getChild(u)));else{if(!a.children)throw ln("WriteRecord should have .snap or .children");if(ud(n,o))r=Fp(r,u=id(n,o),a.children);else if(ud(o,n))if(rd(u=id(o,n)))r=Fp(r,Zh(),a.children);else{var s=Ln(a.children,Yh(u));if(s){var c=s.getChild(Jh(u));r=Mp(r,Zh(),c)}}}}}return r}function Jp(e,t,n,r,i){if(r||i){var a=Bp(e.visibleWrites,t);if(!i&&zp(a))return n;if(i||null!=n||jp(a,Zh())){return Wp($p(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ud(e.path,t)||ud(t,e.path))}),t),n||qd.EMPTY_NODE)}return null}var o=Vp(e.visibleWrites,t);if(null!=o)return o;var u=Bp(e.visibleWrites,t);return zp(u)?n:null!=n||jp(u,Zh())?Wp(u,n||qd.EMPTY_NODE):null}function Xp(e,t,n,r){return Jp(e.writeTree,e.treePath,t,n,r)}function ev(e,t){return function(e,t,n){var r=qd.EMPTY_NODE,i=Vp(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ld,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Bp(e.visibleWrites,t);return n.forEachChild(Ld,(function(e,t){var n=Wp(Bp(a,new Qh(e)),t);r=r.updateImmediateChild(e,n)})),qp(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return qp(Bp(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function tv(e,t,n,r){return function(e,t,n,r,i){cn(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=nd(t,n);if(jp(e.visibleWrites,a))return null;var o=Bp(e.visibleWrites,a);return zp(o)?i.getChild(n):Wp(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function nv(e,t){return function(e,t){return Vp(e.visibleWrites,t)}(e.writeTree,nd(e.treePath,t))}function rv(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=Bp(e.visibleWrites,t),c=Vp(s,Zh());if(null!=c)u=c;else{if(null==n)return[];u=Wp(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function iv(e,t,n){return function(e,t,n,r){var i=nd(t,n),a=Vp(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Wp(Bp(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function av(e,t){return ov(nd(e.treePath,t),e.writeTree)}function ov(e,t){return{treePath:e,writeTree:t}}var uv=function(){function e(){pe(this,e),this.changeMap=new Map}return ye(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;cn("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),cn(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,ep(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Xd(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Jd(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ln("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,ep(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),sv=new(function(){function e(){pe(this,e)}return ye(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),cv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;pe(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return ye(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Ip(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iv(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rp(this.viewCache_),i=rv(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function lv(e,t,n,r,i){var a,o,u=new uv;if(n.type===yp.OVERWRITE){var s=n;s.source.fromUser?a=dv(e,t,s.path,s.snap,r,i,u):(cn(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!rd(s.path),a=hv(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===yp.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=nd(n,r);pv(t,Yh(c))&&(u=dv(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=nd(n,r);pv(t,Yh(c))||(u=dv(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(cn(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=yv(e,t,c.path,c.children,r,i,o,u))}else if(n.type===yp.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=nv(r,n))return t;var u,s=new cv(r,t,i),c=t.eventCache.getNode();if(rd(n)||".priority"===Yh(n)){var l;if(t.serverCache.isFullyInitialized())l=Xp(r,Rp(t));else{var f=t.serverCache.getNode();cn(f instanceof qd,"serverChildren would be complete if leaf node"),l=ev(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=Yh(n),d=iv(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,Jh(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,qd.EMPTY_NODE,Jh(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Xp(r,Rp(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=nv(r,Zh()),Np(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=nv(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(rd(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return hv(e,t,n,s.getNode().getChild(n),i,a,u,o);if(rd(n)){var c=new Op(null);return s.getNode().forEachChild(gd,(function(e,t){c=c.set(new Qh(e),t)})),yv(e,t,n,c,i,a,u,o)}return t}var l=new Op(null);return r.foreach((function(e,t){var r=nd(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),yv(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==yp.LISTEN_COMPLETE)throw ln("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Ap(t,a.getNode(),a.isFullyInitialized()||rd(n),a.isFiltered());return fv(e,o,n,r,sv,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Pp(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push($d(Pp(t)))}}(t,a,f),{viewCache:a,changes:f}}function fv(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=nv(r,n))return t;if(rd(n))if(cn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Rp(t),l=ev(r,c instanceof qd?c:qd.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=Xp(r,Rp(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=Yh(n);if(".priority"===h){cn(1===$h(n),"Can't have a priority with additional path components");var d=s.getNode(),p=tv(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=Jh(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=tv(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else v=iv(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,y,i,a):s.getNode()}}return Np(t,o,s.isFullyInitialized()||rd(n),e.filter.filtersNodes())}function hv(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(rd(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=Yh(n);if(!c.isCompleteForPath(n)&&$h(n)>1)return t;var d=Jh(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,sv,null)}var v=Ap(t,s,c.isFullyInitialized()||rd(n),l.filtersNodes());return fv(e,v,n,i,new cv(i,v,a),u)}function dv(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new cv(i,t,a);if(rd(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=Np(t,s,!0,e.filter.filtersNodes());else{var f=Yh(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=Np(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=Jh(n),p=c.getNode().getImmediateChild(f);if(rd(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===Xh(d)&&v.getChild(td(d)).isEmpty()?v:v.updateChild(d,r):qd.EMPTY_NODE}if(p.equals(h))u=t;else u=Np(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function pv(e,t){return e.eventCache.isCompleteForChild(t)}function vv(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function yv(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=rd(n)?r:new Op(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=vv(0,t.serverCache.getNode().getImmediateChild(n),r);c=hv(e,c,new Qh(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var f=vv(0,t.serverCache.getNode().getImmediateChild(n),r);c=hv(e,c,new Qh(n),f,i,a,o,u)}})),c}var mv,gv=function(){function e(t,n){pe(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new tp(i.getIndex()),o=(r=i).loadsAllData()?new tp(r.getIndex()):r.hasLimit()?new rp(r):new np(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(qd.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(qd.EMPTY_NODE,s.getNode(),null),f=new Ip(c,u.isFullyInitialized(),a.filtersNodes()),h=new Ip(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Cp(h,f),this.eventGenerator_=new Sp(this.query_)}return ye(e,[{key:"query",get:function(){return this.query_}}]),e}();function kv(e,t){var n=Rp(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!rd(t)&&!n.getImmediateChild(Yh(t)).isEmpty())?n.getChild(t):null}function wv(e){return 0===e.eventRegistrations_.length}function bv(e,t,n){var r=[];if(n){cn(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function _v(e,t,n,r){t.type===yp.MERGE&&null!==t.source.queryId&&(cn(Rp(e.viewCache_),"We should always have a full cache before handling merges"),cn(Pp(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=lv(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,cn(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),cn(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),cn(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,xv(e,u.changes,u.viewCache.eventCache.getNode(),null)}function xv(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Tp(e,i,"child_removed",t,r,n),Tp(e,i,"child_added",t,r,n),Tp(e,i,"child_moved",a,r,n),Tp(e,i,"child_changed",t,r,n),Tp(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Ev,Iv=ye((function e(){pe(this,e),this.views=new Map}));function Sv(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return cn(null!=a,"SyncTree gave us an op for an invalid query."),_v(a,t,n,r)}var o,u=[],s=nn(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(_v(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function Tv(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=Xp(n,i?r:null),s=!1;u?s=!0:r instanceof qd?(u=ev(n,r),s=!1):(u=qd.EMPTY_NODE,s=!1);var c=Cp(new Ip(u,s,!1),new Ip(r,i,!1));return new gv(t,c)}return o}function Cv(e,t,n,r,i,a){var o=Tv(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ld,(function(e,t){r.push(Jd(e,t))})),n.isFullyInitialized()&&r.push($d(n.getNode())),xv(e,r,n.getNode(),t)}(o,n)}function Nv(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=Ov(e);if("default"===i){var c,l=nn(e.views.entries());try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],d=f[1];o=o.concat(bv(d,n,r)),wv(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(bv(p,n,r)),wv(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!Ov(e)&&a.push(new(cn(mv,"Reference.ts has not been loaded"),mv)(t._repo,t._path)),{removed:a,events:o}}function Av(e){var t,n=[],r=nn(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Pv(e,t){var n,r=null,i=nn(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||kv(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Rv(e,t){if(t._queryParams.loadsAllData())return Lv(e);var n=t._queryIdentifier;return e.views.get(n)}function Dv(e,t){return null!=Rv(e,t)}function Ov(e){return null!=Lv(e)}function Lv(e){var t,n=nn(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Mv=1,Fv=ye((function e(t){pe(this,e),this.listenProvider_=t,this.syncPointTree_=new Op(null),this.pendingWriteTree_={visibleWrites:Lp.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Uv(e,t,n,r,i){return function(e,t,n,r,i){cn(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Mp(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Hv(e,new xp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function jv(e,t,n,r){!function(e,t,n,r){cn(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Fp(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Op.fromObject(n);return Hv(e,new Ep({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Vv(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Gp(e.pendingWriteTree_,t),i=Qp(e.pendingWriteTree_,t);if(i){var a=new Op(null);return null!=r.snap?a=a.set(Zh(),!0):vh(r.children,(function(e){a=a.set(new Qh(e),!0)})),Hv(e,new bp(r.path,a,n))}return[]}function qv(e,t,n){return Hv(e,new xp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Bv(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||Dv(a,t))){var u=Nv(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var s=u.removed;o=u.events;var c=-1!==s.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return Ov(t)}));if(c&&!l){var f=e.syncPointTree_.subtree(i);if(!f.isEmpty())for(var h=function(e){return e.fold((function(e,t,n){if(t&&Ov(t))return[Lv(t)];var r=[];return t&&(r=Av(t)),vh(n,(function(e,t){r=r.concat(t)})),r}))}(f),d=0;d<h.length;++d){var p=h[d],v=p.query,y=Zv(e,p);e.listenProvider_.startListening(ty(v),Yv(e,v),y.hashFn,y.onComplete)}}if(!l&&s.length>0&&!r)if(c){e.listenProvider_.stopListening(ty(t),null)}else s.forEach((function(t){var n=e.queryToTagMap.get($v(t));e.listenProvider_.stopListening(ty(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=$v(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,s)}return o}function zv(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=id(e,r);i=i||Pv(t,n),a=a||Ov(t)}));var o,u=e.syncPointTree_.get(r);(u?(a=a||Ov(u),i=i||Pv(u,Zh())):(u=new Iv,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?o=!0:(o=!1,i=qd.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=Pv(t,Zh());n&&(i=i.updateImmediateChild(e,n))})));var s=Dv(u,t);if(!s&&!t._queryParams.loadsAllData()){var c=$v(t);cn(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=Mv++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var f=Cv(u,t,n,Hp(e.pendingWriteTree_,r),i,o);if(!s&&!a){var h=Rv(u,t);f=f.concat(function(e,t,n){var r=t._path,i=Yv(e,t),a=Zv(e,n),o=e.listenProvider_.startListening(ty(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)cn(!Ov(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!rd(e)&&t&&Ov(t))return[Lv(t).query];var r=[];return t&&(r=r.concat(Av(t).map((function(e){return e.query})))),vh(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(ty(l),Yv(e,l))}return o}(e,t,h))}return f}function Wv(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Pv(n,id(e,t));if(r)return r}));return Jp(r,t,i,n,!0)}function Kv(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=id(e,n);r=r||Pv(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Pv(i,Zh()):(i=new Iv,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Ip(r,!0,!1):null;return function(e){return Pp(e.viewCache_)}(Tv(i,t,Hp(e.pendingWriteTree_,t._path),a?o.getNode():qd.EMPTY_NODE,a))}function Hv(e,t){return Gv(t,e.syncPointTree_,null,Hp(e.pendingWriteTree_,Zh()))}function Gv(e,t,n,r){if(rd(e.path))return Qv(e,t,n,r);var i=t.get(Zh());null==n&&null!=i&&(n=Pv(i,Zh()));var a=[],o=Yh(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=av(r,o);a=a.concat(Gv(u,s,c,l))}return i&&(a=a.concat(Sv(i,e,r,n))),a}function Qv(e,t,n,r){var i=t.get(Zh());null==n&&null!=i&&(n=Pv(i,Zh()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=av(r,t),s=e.operationForChild(t);s&&(a=a.concat(Qv(s,i,o,u)))})),i&&(a=a.concat(Sv(i,e,r,n))),a}function Zv(e,t){var n=t.query,r=Yv(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||qd.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Jv(e,n);if(r){var i=Xv(r),a=i.path,o=i.queryId,u=id(a,t);return ey(e,a,new _p(kp(o),u))}return[]}(e,n._path,r):function(e,t){return Hv(e,new _p({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Bv(e,n,null,i)}}}function Yv(e,t){var n=$v(t);return e.queryToTagMap.get(n)}function $v(e){return e._path.toString()+"$"+e._queryIdentifier}function Jv(e,t){return e.tagToQueryMap.get(t)}function Xv(e){var t=e.indexOf("$");return cn(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Qh(e.substr(0,t))}}function ey(e,t,n){var r=e.syncPointTree_.get(t);return cn(r,"Missing sync point for query tag that we're tracking"),Sv(r,n,Hp(e.pendingWriteTree_,t),null)}function ty(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(cn(Ev,"Reference.ts has not been loaded"),Ev)(e._repo,e._path):e}var ny=function(){function e(t){pe(this,e),this.node_=t}return ye(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),ry=function(){function e(t,n){pe(this,e),this.syncTree_=t,this.path_=n}return ye(e,[{key:"getImmediateChild",value:function(t){var n=nd(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Wv(this.syncTree_,this.path_)}}]),e}(),iy=function(e,t,n){return e&&"object"===typeof e?(cn(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ay(e[".sv"],t,n):"object"===typeof e[".sv"]?oy(e[".sv"],t):void cn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ay=function(e,t,n){if("timestamp"===e)return n.timestamp;cn(!1,"Unexpected server value: "+e)},oy=function(e,t,n){e.hasOwnProperty("increment")||cn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&cn(!1,"Unexpected increment value: "+r);var i=t.node();if(cn(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},uy=function(e,t,n,r){return cy(t,new ry(n,e),r)},sy=function(e,t,n){return cy(e,new ny(t),n)};function cy(e,t,n){var r,i=e.getPriority().val(),a=iy(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=iy(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new Pd(u,zd(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new Pd(a))),s.forEachChild(Ld,(function(e,i){var a=cy(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var ly=ye((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};pe(this,e),this.name=t,this.parent=n,this.node=r}));function fy(e,t){for(var n=t instanceof Qh?t:new Qh(t),r=e,i=Yh(n);null!==i;){var a=Ln(r.node.children,i)||{children:{},childCount:0};r=new ly(i,r,a),i=Yh(n=Jh(n))}return r}function hy(e){return e.node.value}function dy(e,t){e.node.value=t,gy(e)}function py(e){return e.node.childCount>0}function vy(e,t){vh(e.node.children,(function(n,r){t(new ly(n,e,r))}))}function yy(e,t,n,r){n&&!r&&t(e),vy(e,(function(e){yy(e,t,!0,r)})),n&&r&&t(e)}function my(e){return new Qh(null===e.parent?e.name:my(e.parent)+"/"+e.name)}function gy(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===hy(e)&&!py(e)}(n),i=On(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,gy(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,gy(e))}(e.parent,e.name,e)}var ky=/[\[\].#$\/\u0000-\u001F\u007F]/,wy=/[\[\].#$\u0000-\u001F\u007F]/,by=10485760,_y=function(e){return"string"===typeof e&&0!==e.length&&!ky.test(e)},xy=function(e){return"string"===typeof e&&0!==e.length&&!wy.test(e)},Ey=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!uh(e)||e&&"object"===typeof e&&On(e,".sv")},Iy=function(e,t,n,r){r&&void 0===t||Sy(Qn(e,"value"),t,n)},Sy=function e(t,n,r){var i=r instanceof Qh?new sd(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+ld(i));if("function"===typeof n)throw new Error(t+"contains a function "+ld(i)+" with contents = "+n.toString());if(uh(n))throw new Error(t+"contains "+n.toString()+" "+ld(i));if("string"===typeof n&&n.length>by/3&&$n(n)>by)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+ld(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(vh(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!_y(n)))throw new Error(t+" contains an invalid key ("+n+") "+ld(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=$n(s),cd(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=$n(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+ld(i)+" in addition to actual children.")}},Ty=function(e,t,n,r){if(!r||void 0!==t){var i=Qn(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];vh(t,(function(e,t){var r=new Qh(e);if(Sy(i,t,nd(n,r)),".priority"===Xh(r)&&!Ey(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=ed(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!_y(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(ad);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&ud(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Cy=function(e,t,n){if(!n||void 0!==t){if(uh(t))throw new Error(Qn(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ey(t))throw new Error(Qn(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ny=function(e,t,n,r){if((!r||void 0!==n)&&!_y(n))throw new Error(Qn(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ay=function(e,t,n,r){if((!r||void 0!==n)&&!xy(n))throw new Error(Qn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Py=function(e,t){if(".info"===Yh(t))throw new Error(e+" failed = Can't modify data under /.info/")},Ry=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!_y(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xy(e)}(n))throw new Error(Qn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Dy=ye((function e(){pe(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Oy(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||od(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Ly(e,t,n){Oy(e,n),Fy(e,(function(e){return od(e,t)}))}function My(e,t,n){Oy(e,n),Fy(e,(function(e){return ud(e,t)||ud(t,e)}))}function Fy(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Uy(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Uy(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Xf&&nh("event: "+n.toString()),bh(r)}}}var jy="repo_interrupt",Vy=function(){function e(t,n,r,i){pe(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hp(),this.transactionQueueTree_=new ly,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return ye(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function qy(e,t,n){if(e.stats_=Lh(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new lp(e.repoInfo_,(function(t,n,r,i){Wy(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Ky(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Rn(n)}catch(mF){throw new Error("Invalid authOverride provided: "+mF)}}e.persistentConnection_=new dd(e.repoInfo_,t,(function(t,n,r,i){Wy(e,t,n,r,i)}),(function(t){Ky(e,t)}),(function(t){!function(e,t){vh(t,(function(t,n){Hy(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Oh[n]||(Oh[n]=t()),Oh[n]}(e.repoInfo_,(function(){return new gp(e.stats_,e.server_)})),e.infoData_=new fp,e.infoSyncTree_=new Fv({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=qv(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Hy(e,"connected",!1),e.serverSyncTree_=new Fv({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);My(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function By(e){var t=e.infoData_.getNode(new Qh(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function zy(e){return(t=(t={timestamp:By(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Wy(e,t,n,r,i){e.dataUpdateCount++;var a=new Qh(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Fn(n,(function(e){return zd(e)}));o=function(e,t,n,r){var i=Jv(e,r);if(i){var a=Xv(i),o=a.path,u=a.queryId,s=id(o,t),c=Op.fromObject(n);return ey(e,o,new Ep(kp(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=zd(n);o=function(e,t,n,r){var i=Jv(e,r);if(null!=i){var a=Xv(i),o=a.path,u=a.queryId,s=id(o,t);return ey(e,o,new xp(kp(u),s,n))}return[]}(e.serverSyncTree_,a,s,i)}else if(r){var c=Fn(n,(function(e){return zd(e)}));o=function(e,t,n){var r=Op.fromObject(n);return Hv(e,new Ep({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=zd(n);o=qv(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=im(e,a)),My(e.eventQueue_,f,o)}function Ky(e,t){Hy(e,"connected",t),!1===t&&function(e){Xy(e,"onDisconnectEvents");var t=zy(e),n=hp();vp(e.onDisconnect_,Zh(),(function(r,i){var a=uy(r,i,e.serverSyncTree_,t);dp(n,r,a)}));var r=[];vp(n,Zh(),(function(t,n){r=r.concat(qv(e.serverSyncTree_,t,n));var i=cm(e,t);im(e,i)})),e.onDisconnect_=hp(),My(e.eventQueue_,Zh(),r)}(e)}function Hy(e,t,n){var r=new Qh("/.info/"+t),i=zd(n);e.infoData_.updateSnapshot(r,i);var a=qv(e.infoSyncTree_,r,i);My(e.eventQueue_,r,a)}function Gy(e){return e.nextWriteId_++}function Qy(e,t,n,r,i){Xy(e,"set",{path:t.toString(),value:n,priority:r});var a=zy(e),o=zd(n,r),u=Wv(e.serverSyncTree_,t),s=sy(o,u,a),c=Gy(e),l=Uv(e.serverSyncTree_,t,s,c,!0);Oy(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||oh("set at "+t+" failed: "+n);var o=Vv(e.serverSyncTree_,c,!a);My(e.eventQueue_,t,o),em(e,i,n,r)}));var f=cm(e,t);im(e,f),My(e.eventQueue_,f,[])}function Zy(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&pp(e.onDisconnect_,t),em(e,n,r,i)}))}function Yy(e,t,n,r){var i=zd(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&dp(e.onDisconnect_,t,i),em(e,r,n,a)}))}function $y(e,t,n){var r;r=".info"===Yh(t._path)?Bv(e.infoSyncTree_,t,n):Bv(e.serverSyncTree_,t,n),Ly(e.eventQueue_,t._path,r)}function Jy(e){e.persistentConnection_&&e.persistentConnection_.interrupt(jy)}function Xy(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];nh.apply(void 0,[t].concat(r))}function em(e,t,n,r){t&&bh((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function tm(e,t,n){return Wv(e.serverSyncTree_,t,n)||qd.EMPTY_NODE}function nm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||sm(e,t),hy(t)){var n=om(e,t);cn(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&rm(e,my(t),n)}else py(t)&&vy(t,(function(t){nm(e,t)}))}function rm(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=tm(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];cn(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=id(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){Xy(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Vv(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);sm(e,fy(e.transactionQueueTree_,t)),nm(e,e.transactionQueueTree_),My(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)bh(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{oh("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}im(e,t)}}),o)}function im(e,t){var n=am(e,t),r=my(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=id(n,s.path),l=!1,f=void 0;if(cn(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(Vv(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(Vv(e.serverSyncTree_,s.currentWriteId,!0));else{var h=tm(e,s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){Sy("transaction failed: Data returned ",d,s.path);var p=zd(d);"object"===typeof d&&null!=d&&On(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,y=zy(e),m=sy(p,h,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=Gy(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Uv(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(Vv(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(Vv(e.serverSyncTree_,s.currentWriteId,!0))}My(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);sm(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)bh(r[c]);nm(e,e.transactionQueueTree_)}(e,om(e,n),r),r}function am(e,t){var n,r=e.transactionQueueTree_;for(n=Yh(t);null!==n&&void 0===hy(r);)r=fy(r,n),n=Yh(t=Jh(t));return r}function om(e,t){var n=[];return um(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function um(e,t,n){var r=hy(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);vy(t,(function(t){um(e,t,n)}))}function sm(e,t){var n=hy(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,dy(t,n.length>0?n:void 0)}vy(t,(function(t){sm(e,t)}))}function cm(e,t){var n=my(am(e,t)),r=fy(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){lm(e,t)})),lm(e,r),yy(r,(function(t){lm(e,t)})),n}function lm(e,t){var n=hy(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(cn(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(cn(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Vv(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?dy(t,void 0):n.length=a+1,My(e.eventQueue_,my(t),i);for(var u=0;u<r.length;u++)bh(r[u])}}var fm=function(e,t){var n=hm(e),r=n.namespace;"firebase.com"===n.domain&&ah(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ah("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&oh("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ah(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Qh(n.pathString)}},hm=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(mF){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=nn(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):oh("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},dm=function(){function e(t,n,r,i){pe(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return ye(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Rn(this.snapshot.exportVal())}}]),e}(),pm=function(){function e(t,n,r){pe(this,e),this.eventRegistration=t,this.error=n,this.path=r}return ye(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),vm=function(){function e(t,n){pe(this,e),this.snapshotCallback=t,this.cancelCallback=n}return ye(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return cn(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),ym=function(){function e(t,n){pe(this,e),this._repo=t,this._path=n}return ye(e,[{key:"cancel",value:function(){var e=new mn;return Zy(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){Py("OnDisconnect.remove",this._path);var e=new mn;return Yy(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){Py("OnDisconnect.set",this._path),Iy("OnDisconnect.set",e,this._path,!1);var t=new mn;return Yy(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){Py("OnDisconnect.setWithPriority",this._path),Iy("OnDisconnect.setWithPriority",e,this._path,!1),Cy("OnDisconnect.setWithPriority",t,!1);var n=new mn;return function(e,t,n,r,i){var a=zd(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&dp(e.onDisconnect_,t,a),em(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){Py("OnDisconnect.update",this._path),Ty("OnDisconnect.update",e,this._path,!1);var t=new mn;return function(e,t,n,r){if(Mn(n))return nh("onDisconnect().update() called with empty data.  Don't do anything."),void em(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&vh(n,(function(n,r){var i=zd(r);dp(e.onDisconnect_,nd(t,n),i)})),em(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),mm=function(){function e(t,n,r,i){pe(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return ye(e,[{key:"key",get:function(){return rd(this._path)?null:Xh(this._path)}},{key:"ref",get:function(){return new bm(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=cp(this._queryParams),t=dh(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return cp(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Jn(t))instanceof e))return!1;var n=this._repo===t._repo,r=od(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function gm(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function km(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===gd){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==sh)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==ch)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Ld){if(null!=t&&!Ey(t)||null!=n&&!Ey(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(cn(e.getIndex()instanceof Wd||e.getIndex()===Hd,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wm(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var bm=function(e){Oe(n,e);var t=je(n);function n(e,r){return pe(this,n),t.call(this,e,r,new ip,!1)}return ye(n,[{key:"parent",get:function(){var e=td(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(mm),_m=function(){function e(t,n,r){pe(this,e),this._node=t,this.ref=n,this._index=r}return ye(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Qh(t),r=Im(this.ref,t);return new e(this._node.getChild(n),r,Ld)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Im(n.ref,r),Ld))}))}},{key:"hasChild",value:function(e){var t=new Qh(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function xm(e,t){return(e=Jn(e))._checkNotDeleted("ref"),void 0!==t?Im(e._root,t):e._root}function Em(e,t){(e=Jn(e))._checkNotDeleted("refFromURL");var n=fm(t,e._repo.repoInfo_.nodeAdmin);Ry("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||ah("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),xm(e,n.path.toString())}function Im(e,t){var n,r,i,a;return null===Yh((e=Jn(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ay(n,r,i,a)):Ay("child","path",t,!1),new bm(e._repo,nd(e._path,t))}function Sm(e,t){e=Jn(e),Py("push",e._path),Iy("push",t,e._path,!0);var n,r=By(e._repo),i=Qd(r),a=Im(e,i),o=Im(e,i);return n=null!=t?Cm(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Tm(e){return Py("remove",e._path),Cm(e,null)}function Cm(e,t){e=Jn(e),Py("set",e._path),Iy("set",t,e._path,!1);var n=new mn;return Qy(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Nm(e,t){e=Jn(e),Py("setPriority",e._path),Cy("setPriority",t,!1);var n=new mn;return Qy(e._repo,nd(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function Am(e,t,n){if(Py("setWithPriority",e._path),Iy("setWithPriority",t,e._path,!1),Cy("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new mn;return Qy(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Pm(e,t){Ty("update",t,e._path,!1);var n=new mn;return function(e,t,n,r){Xy(e,"update",{path:t.toString(),value:n});var i=!0,a=zy(e),o={};if(vh(n,(function(n,r){i=!1,o[n]=uy(nd(t,n),zd(r),e.serverSyncTree_,a)})),i)nh("update() called with empty data.  Don't do anything."),em(0,r,"ok",void 0);else{var u=Gy(e),s=jv(e.serverSyncTree_,t,o,u);Oy(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||oh("update at "+t+" failed: "+n);var o=Vv(e.serverSyncTree_,u,!a),s=o.length>0?im(e,t):t;My(e.eventQueue_,s,o),em(0,r,n,i)})),vh(n,(function(n){var r=cm(e,nd(t,n));im(e,r)})),My(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Rm(e){return function(e,t){var n=Kv(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=zd(n).withIndex(t._queryParams.getIndex()),i=qv(e.serverSyncTree_,t._path,r);return Ly(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return Xy(e,"get for query "+Rn(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=Jn(e))._repo,e).then((function(t){return new _m(t,new bm(e._repo,e._path),e._queryParams.getIndex())}))}var Dm=function(){function e(t){pe(this,e),this.callbackContext=t}return ye(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new dm("value",this,new _m(e.snapshotNode,new bm(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new pm(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Om=function(){function e(t,n){pe(this,e),this.eventType=t,this.callbackContext=n}return ye(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new pm(this,e,t):null}},{key:"createEvent",value:function(e,t){cn(null!=e.childName,"Child events should have a childName.");var n=Im(new bm(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new dm(e.type,this,new _m(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Lm(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){$y(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new vm(n,a||void 0),c="value"===t?new Dm(s):new Om(t,s);return function(e,t,n){var r;r=".info"===Yh(t._path)?zv(e.infoSyncTree_,t,n):zv(e.serverSyncTree_,t,n),Ly(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return $y(e._repo,e,c)}}function Mm(e,t,n,r){return Lm(e,"value",t,n,r)}function Fm(e,t,n,r){return Lm(e,"child_added",t,n,r)}function Um(e,t,n,r){return Lm(e,"child_changed",t,n,r)}function jm(e,t,n,r){return Lm(e,"child_moved",t,n,r)}function Vm(e,t,n,r){return Lm(e,"child_removed",t,n,r)}function qm(e,t,n){var r=null,i=n?new vm(n):null;"value"===t?r=new Dm(i):t&&(r=new Om(t,i)),$y(e._repo,e,r)}var Bm=ye((function e(){pe(this,e)})),zm=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this))._value=e,i._key=r,i}return ye(n,[{key:"_apply",value:function(e){Iy("endAt",this._value,e._path,!0);var t=op(e._queryParams,this._value,this._key);if(wm(t),km(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mm(e._repo,e._path,t,e._orderByCalled)}}]),n}(Bm);function Wm(e,t){return Ny("endAt","key",t,!0),new zm(e,t)}var Km=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this))._value=e,i._key=r,i}return ye(n,[{key:"_apply",value:function(e){Iy("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===gd?("string"===typeof t&&(t=Yd(t)),r=op(e,t,n)):r=op(e,t,null==n?sh:Yd(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(wm(t),km(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mm(e._repo,e._path,t,e._orderByCalled)}}]),n}(Bm);function Hm(e,t){return Ny("endBefore","key",t,!0),new Km(e,t)}var Gm=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this))._value=e,i._key=r,i}return ye(n,[{key:"_apply",value:function(e){Iy("startAt",this._value,e._path,!0);var t=ap(e._queryParams,this._value,this._key);if(wm(t),km(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mm(e._repo,e._path,t,e._orderByCalled)}}]),n}(Bm);function Qm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Ny("startAt","key",t,!0),new Gm(e,t)}var Zm=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this))._value=e,i._key=r,i}return ye(n,[{key:"_apply",value:function(e){Iy("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===gd?("string"===typeof t&&(t=Zd(t)),r=ap(e,t,n)):r=ap(e,t,null==n?ch:Zd(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(wm(t),km(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mm(e._repo,e._path,t,e._orderByCalled)}}]),n}(Bm);function Ym(e,t){return Ny("startAfter","key",t,!0),new Zm(e,t)}var $m=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this))._limit=e,r}return ye(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mm(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(Bm);function Jm(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new $m(e)}var Xm=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this))._limit=e,r}return ye(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mm(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(Bm);function eg(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Xm(e)}var tg=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this))._path=e,r}return ye(n,[{key:"_apply",value:function(e){gm(e,"orderByChild");var t=new Qh(this._path);if(rd(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Wd(t),r=up(e._queryParams,n);return km(r),new mm(e._repo,e._path,r,!0)}}]),n}(Bm);function ng(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ay("orderByChild","path",e,!1),new tg(e)}var rg=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"_apply",value:function(e){gm(e,"orderByKey");var t=up(e._queryParams,gd);return km(t),new mm(e._repo,e._path,t,!0)}}]),n}(Bm);function ig(){return new rg}var ag=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"_apply",value:function(e){gm(e,"orderByPriority");var t=up(e._queryParams,Ld);return km(t),new mm(e._repo,e._path,t,!0)}}]),n}(Bm);function og(){return new ag}var ug=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"_apply",value:function(e){gm(e,"orderByValue");var t=up(e._queryParams,Hd);return km(t),new mm(e._repo,e._path,t,!0)}}]),n}(Bm);function sg(){return new ug}var cg=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this))._value=e,i._key=r,i}return ye(n,[{key:"_apply",value:function(e){if(Iy("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new zm(this._value,this._key)._apply(new Gm(this._value,this._key)._apply(e))}}]),n}(Bm);function lg(e,t){return Ny("equalTo","key",t,!0),new cg(e,t)}function fg(e){for(var t=Jn(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){cn(!mv,"__referenceConstructor has already been defined"),mv=e}(bm),function(e){cn(!Ev,"__referenceConstructor has already been defined"),Ev=e}(bm);var hg={},dg=!1;function pg(e,t,n,r){e.repoInfo_=new Ah("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function vg(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||ah("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nh("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=fm(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/chipadmin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=fm(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new Ih(Ih.OWNER):new Eh(e.name,e.options,t);Ry("Invalid Firebase Database URL",u),rd(u.path)||ah("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=hg[t.name];i||(i={},hg[t.name]=i);var a=i[e.toURLString()];a&&ah("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Vy(e,dg,n,r),i[e.toURLString()]=a,a}(s,e,l,new xh(e.name,n));return new yg(f,e)}var yg=function(){function e(t,n){pe(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return ye(e,[{key:"_repo",get:function(){return this._instanceStarted||(qy(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new bm(this._repo,Zh())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=hg[t];n&&n[e.key]===e||ah("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Jy(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&ah("Cannot call "+e+" on a deleted database.")}}]),e}();function mg(){zh.IS_TRANSPORT_INITIALIZED&&oh("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function gg(){mg(),jh.forceDisallow()}function kg(){mg(),Bh.forceDisallow(),jh.forceAllow()}function wg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Jn(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&ah("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ah('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Ih(Ih.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:gn(r.mockUserToken,e.app.options.projectId);a=new Ih(o)}pg(i,t,n,a)}function bg(e){(e=Jn(e))._checkNotDeleted("goOffline"),Jy(e._repo)}function _g(e){var t;(e=Jn(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(jy)}function xg(e,t){th(e,t)}var Eg={".sv":"timestamp"};var Ig=function(){function e(t,n){pe(this,e),this.committed=t,this.snapshot=n}return ye(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Sg(e,t,n){var r;if(e=Jn(e),Py("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new mn,o=Mm(e,(function(){}));return function(e,t,n,r,i,a){Xy(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:Yf(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=tm(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Sy("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=fy(e.transactionQueueTree_,t),f=hy(l)||[];f.push(o),dy(l,f),"object"===typeof s&&null!==s&&On(s,".priority")?(c=Ln(s,".priority"),cn(Ey(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(Wv(e.serverSyncTree_,t)||qd.EMPTY_NODE).getPriority().val();var h=zy(e),d=zd(s,c),p=sy(d,u,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=Gy(e);var v=Uv(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);My(e.eventQueue_,t,v),nm(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new _m(r,new bm(e._repo,e._path),Ld),a.resolve(new Ig(n,i)))}),o,i),a.promise}dd.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},dd.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){zf(Zr),Br(new nr("database",(function(e,t){var n=t.instanceIdentifier;return vg(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ti(Vf,qf,e),ti(Vf,qf,"esm2017")}();var Tg=new dr("@firebase/database-compat"),Cg=function(e){var t="FIREBASE WARNING: "+e;Tg.warn(t)},Ng=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Qn(e,t)+"must be a boolean.")},Ag=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Qn(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Pg=function(){function e(t){pe(this,e),this._delegate=t}return ye(e,[{key:"cancel",value:function(e){Gn("OnDisconnect.cancel",0,1,arguments.length),Zn("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Gn("OnDisconnect.remove",0,1,arguments.length),Zn("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Gn("OnDisconnect.set",1,2,arguments.length),Zn("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Gn("OnDisconnect.setWithPriority",2,3,arguments.length),Zn("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Gn("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Cg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Zn("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Rg=function(){function e(t,n){pe(this,e),this.committed=t,this.snapshot=n}return ye(e,[{key:"toJSON",value:function(){return Gn("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Dg=function(){function e(t,n){pe(this,e),this._database=t,this._delegate=n}return ye(e,[{key:"val",value:function(){return Gn("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Gn("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Gn("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Gn("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Gn("DataSnapshot.child",0,1,arguments.length),t=String(t),Ay("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Gn("DataSnapshot.hasChild",1,1,arguments.length),Ay("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Gn("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Gn("DataSnapshot.forEach",1,1,arguments.length),Zn("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Gn("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Gn("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Gn("DataSnapshot.ref",0,0,arguments.length),new Lg(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Og=function(){function e(t,n){pe(this,e),this.database=t,this._delegate=n}return ye(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Gn("Query.on",2,4,arguments.length),Zn("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new Dg(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return Mm(this._delegate,s,c),n;case"child_added":return Fm(this._delegate,s,c),n;case"child_removed":return Vm(this._delegate,s,c),n;case"child_changed":return Um(this._delegate,s,c),n;case"child_moved":return jm(this._delegate,s,c),n;default:throw new Error(Qn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Gn("Query.off",0,3,arguments.length),Ag("Query.off",e,!0),Zn("Query.off","callback",t,!0),Yn("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,qm(this._delegate,e,r)}else qm(this._delegate,e)}},{key:"get",value:function(){var e=this;return Rm(this._delegate).then((function(t){return new Dg(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Gn("Query.once",1,4,arguments.length),Zn("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new mn,s=function(e,t){var r=new Dg(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":Mm(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":Fm(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":Vm(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":Um(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":jm(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(Qn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return Gn("Query.limitToFirst",1,1,arguments.length),new e(this.database,fg(this._delegate,Jm(t)))}},{key:"limitToLast",value:function(t){return Gn("Query.limitToLast",1,1,arguments.length),new e(this.database,fg(this._delegate,eg(t)))}},{key:"orderByChild",value:function(t){return Gn("Query.orderByChild",1,1,arguments.length),new e(this.database,fg(this._delegate,ng(t)))}},{key:"orderByKey",value:function(){return Gn("Query.orderByKey",0,0,arguments.length),new e(this.database,fg(this._delegate,ig()))}},{key:"orderByPriority",value:function(){return Gn("Query.orderByPriority",0,0,arguments.length),new e(this.database,fg(this._delegate,og()))}},{key:"orderByValue",value:function(){return Gn("Query.orderByValue",0,0,arguments.length),new e(this.database,fg(this._delegate,sg()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gn("Query.startAt",0,2,arguments.length),new e(this.database,fg(this._delegate,Qm(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gn("Query.startAfter",0,2,arguments.length),new e(this.database,fg(this._delegate,Ym(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gn("Query.endAt",0,2,arguments.length),new e(this.database,fg(this._delegate,Wm(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gn("Query.endBefore",0,2,arguments.length),new e(this.database,fg(this._delegate,Hm(t,n)))}},{key:"equalTo",value:function(t,n){return Gn("Query.equalTo",1,2,arguments.length),new e(this.database,fg(this._delegate,lg(t,n)))}},{key:"toString",value:function(){return Gn("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Gn("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Gn("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Lg(this.database,new bm(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Zn(e,"cancel",r.cancel,!0),r.context=n,Yn(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Qn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Lg=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,new mm(r._repo,r._path,new ip,!1))).database=e,i._delegate=r,i}return ye(n,[{key:"getKey",value:function(){return Gn("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Gn("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Im(this._delegate,e))}},{key:"getParent",value:function(){Gn("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Gn("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Gn("Reference.set",1,2,arguments.length),Zn("Reference.set","onComplete",t,!0);var n=Cm(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Gn("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Cg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Py("Reference.update",this._delegate._path),Zn("Reference.update","onComplete",t,!0);var i=Pm(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Gn("Reference.setWithPriority",2,3,arguments.length),Zn("Reference.setWithPriority","onComplete",n,!0);var r=Am(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Gn("Reference.remove",0,1,arguments.length),Zn("Reference.remove","onComplete",e,!0);var t=Tm(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;Gn("Reference.transaction",1,3,arguments.length),Zn("Reference.transaction","transactionUpdate",e,!1),Zn("Reference.transaction","onComplete",t,!0),Ng("Reference.transaction","applyLocally",n,!0);var i=Sg(this._delegate,e,{applyLocally:n}).then((function(e){return new Rg(e.committed,new Dg(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Gn("Reference.setPriority",1,2,arguments.length),Zn("Reference.setPriority","onComplete",t,!0);var n=Nm(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Gn("Reference.push",0,2,arguments.length),Zn("Reference.push","onComplete",t,!0);var i=Sm(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return Py("Reference.onDisconnect",this._delegate._path),new Pg(new ym(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Og),Mg=function(){function e(t,n){var r=this;pe(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:gg,forceLongPolling:kg}}return ye(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};wg(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Gn("database.ref",0,1,arguments.length),e instanceof Lg){var t=Em(this._delegate,e.toString());return new Lg(this,t)}var n=xm(this._delegate,e);return new Lg(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";Gn(t,1,1,arguments.length);var n=Em(this._delegate,e);return new Lg(this,n)}},{key:"goOffline",value:function(){return Gn("database.goOffline",0,0,arguments.length),bg(this._delegate)}},{key:"goOnline",value:function(){return Gn("database.goOnline",0,0,arguments.length),_g(this._delegate)}}]),e}();Mg.ServerValue={TIMESTAMP:Eg,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Fg=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;zf(r);var s=new ir("auth-internal",new ur("database-standalone"));return s.setComponent(new nr("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Mg(vg(t,s,void 0,n,u),t),namespace:a}}}),Ug=Mg.ServerValue;!function(e){e.INTERNAL.registerComponent(new nr("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Mg(i,r)}),"PUBLIC").setServiceProps({Reference:Lg,Query:Og,Database:Mg,DataSnapshot:Dg,enableLogging:xg,INTERNAL:Fg,ServerValue:Ug}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.1")}(Ii);var jg,Vg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},qg={},Bg=Bg||{},zg=Vg||self;function Wg(){}function Kg(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Hg(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Gg="closure_uid_"+(1e9*Math.random()>>>0),Qg=0;function Zg(e,t,n){return e.call.apply(e.bind,arguments)}function Yg(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $g(e,t,n){return($g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zg:Yg).apply(null,arguments)}function Jg(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xg(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ek(){this.s=this.s,this.o=this.o}var tk={};ek.prototype.s=!1,ek.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Gg)&&e[Gg]||(e[Gg]=++Qg)}(this);delete tk[e]}},ek.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var nk=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},rk=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ik(e){return Array.prototype.concat.apply([],arguments)}function ak(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ok(e){return/^[\s\xa0]*$/.test(e)}var uk,sk=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ck(e,t){return-1!=e.indexOf(t)}function lk(e,t){return e<t?-1:e>t?1:0}e:{var fk=zg.navigator;if(fk){var hk=fk.userAgent;if(hk){uk=hk;break e}}uk=""}function dk(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function pk(e){var t={};for(var n in e)t[n]=e[n];return t}var vk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yk(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<vk.length;a++)n=vk[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function mk(e){return mk[" "](e),e}mk[" "]=Wg;var gk,kk=ck(uk,"Opera"),wk=ck(uk,"Trident")||ck(uk,"MSIE"),bk=ck(uk,"Edge"),_k=bk||wk,xk=ck(uk,"Gecko")&&!(ck(uk.toLowerCase(),"webkit")&&!ck(uk,"Edge"))&&!(ck(uk,"Trident")||ck(uk,"MSIE"))&&!ck(uk,"Edge"),Ek=ck(uk.toLowerCase(),"webkit")&&!ck(uk,"Edge");function Ik(){var e=zg.document;return e?e.documentMode:void 0}e:{var Sk="",Tk=function(){var e=uk;return xk?/rv:([^\);]+)(\)|;)/.exec(e):bk?/Edge\/([\d\.]+)/.exec(e):wk?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ek?/WebKit\/(\S+)/.exec(e):kk?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Tk&&(Sk=Tk?Tk[1]:""),wk){var Ck=Ik();if(null!=Ck&&Ck>parseFloat(Sk)){gk=String(Ck);break e}}gk=Sk}var Nk,Ak={};function Pk(){return function(e){var t=Ak;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=sk(String(gk)).split("."),n=sk("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=lk(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||lk(0==a[2].length,0==o[2].length)||lk(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(zg.document&&wk){var Rk=Ik();Nk=Rk||(parseInt(gk,10)||void 0)}else Nk=void 0;var Dk=Nk,Ok=function(){if(!zg.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{zg.addEventListener("test",Wg,t),zg.removeEventListener("test",Wg,t)}catch(n){}return e}();function Lk(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Mk(e,t){if(Lk.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xk){e:{try{mk(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Fk[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Mk.Z.h.call(this)}}Lk.prototype.h=function(){this.defaultPrevented=!0},Xg(Mk,Lk);var Fk={2:"touch",3:"pen",4:"mouse"};Mk.prototype.h=function(){Mk.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Uk="closure_listenable_"+(1e6*Math.random()|0),jk=0;function Vk(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++jk,this.ca=this.fa=!1}function qk(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Bk(e){this.src=e,this.g={},this.h=0}function zk(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=nk(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(qk(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Wk(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Bk.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Wk(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Vk(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Kk="closure_lm_"+(1e6*Math.random()|0),Hk={};function Gk(e,t,n,r,i){if(r&&r.once)return Zk(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Gk(e,t[a],n,r,i);return null}return n=nw(n),e&&e[Uk]?e.N(t,n,Hg(r)?!!r.capture:!!r,i):Qk(e,t,n,!1,r,i)}function Qk(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Hg(i)?!!i.capture:!!i,u=ew(e);if(u||(e[Kk]=u=new Bk(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Xk;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ok||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jk(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Zk(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Zk(e,t[a],n,r,i);return null}return n=nw(n),e&&e[Uk]?e.O(t,n,Hg(r)?!!r.capture:!!r,i):Qk(e,t,n,!0,r,i)}function Yk(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Yk(e,t[a],n,r,i);else r=Hg(r)?!!r.capture:!!r,n=nw(n),e&&e[Uk]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Wk(a=e.g[t],n,r,i))&&(qk(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ew(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Wk(t,n,r,i)),(n=-1<e?t[e]:null)&&$k(n))}function $k(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Uk])zk(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jk(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ew(t))?(zk(n,e),0==n.h&&(n.src=null,t[Kk]=null)):qk(e)}}}function Jk(e){return e in Hk?Hk[e]:Hk[e]="on"+e}function Xk(e,t){if(e.ca)e=!0;else{t=new Mk(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&$k(e),e=n.call(r,t)}return e}function ew(e){return(e=e[Kk])instanceof Bk?e:null}var tw="__closure_events_fn_"+(1e9*Math.random()>>>0);function nw(e){return"function"===typeof e?e:(e[tw]||(e[tw]=function(t){return e.handleEvent(t)}),e[tw])}function rw(){ek.call(this),this.i=new Bk(this),this.P=this,this.I=null}function iw(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Lk(t,e);else if(t instanceof Lk)t.target=t.target||e;else{var i=t;yk(t=new Lk(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=aw(o,r,!0,t)&&i}if(i=aw(o=t.g=e,r,!0,t)&&i,i=aw(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=aw(o=t.g=n[a],r,!1,t)&&i}function aw(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&zk(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Xg(rw,ek),rw.prototype[Uk]=!0,rw.prototype.removeEventListener=function(e,t,n,r){Yk(this,e,t,n,r)},rw.prototype.M=function(){if(rw.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qk(n[r]);delete t.g[e],t.h--}}this.I=null},rw.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},rw.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ow=zg.JSON.stringify;function uw(){var e=vw,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var sw,cw=function(){function e(){pe(this,e),this.h=this.g=null}return ye(e,[{key:"add",value:function(e,t){var n=lw.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),lw=new(function(){function e(t,n){pe(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ye(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new fw}),(function(e){return e.reset()})),fw=function(){function e(){pe(this,e),this.next=this.g=this.h=null}return ye(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function hw(e){zg.setTimeout((function(){throw e}),0)}function dw(e,t){sw||function(){var e=zg.Promise.resolve(void 0);sw=function(){e.then(yw)}}(),pw||(sw(),pw=!0),vw.add(e,t)}var pw=!1,vw=new cw;function yw(){for(var e;e=uw();){try{e.h.call(e.g)}catch(n){hw(n)}var t=lw;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}pw=!1}function mw(e,t){rw.call(this),this.h=e||1,this.g=t||zg,this.j=$g(this.kb,this),this.l=Date.now()}function gw(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function kw(e,t,n){if("function"===typeof e)n&&(e=$g(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$g(e.handleEvent,e)}return 2147483647<Number(t)?-1:zg.setTimeout(e,t||0)}function ww(e){e.g=kw((function(){e.g=null,e.i&&(e.i=!1,ww(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Xg(mw,rw),(jg=mw.prototype).da=!1,jg.S=null,jg.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),iw(this,"tick"),this.da&&(gw(this),this.start()))}},jg.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},jg.M=function(){mw.Z.M.call(this),gw(this),delete this.g};var bw=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ye(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ww(this)}},{key:"M",value:function(){Re(Ae(n.prototype),"M",this).call(this),this.g&&(zg.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ek);function _w(e){ek.call(this),this.h=e,this.g={}}Xg(_w,ek);var xw=[];function Ew(e,t,n,r){Array.isArray(n)||(n&&(xw[0]=n.toString()),n=xw);for(var i=0;i<n.length;i++){var a=Gk(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Iw(e){dk(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$k(e)}),e),e.g={}}function Sw(){this.g=!0}function Tw(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ow(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}_w.prototype.M=function(){_w.Z.M.call(this),Iw(this)},_w.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sw.prototype.Aa=function(){this.g=!1},Sw.prototype.info=function(){};var Cw={},Nw=null;function Aw(){return Nw=Nw||new rw}function Pw(e){Lk.call(this,Cw.Ma,e)}function Rw(e){var t=Aw();iw(t,new Pw(t,e))}function Dw(e,t){Lk.call(this,Cw.STAT_EVENT,e),this.stat=t}function Ow(e){var t=Aw();iw(t,new Dw(t,e))}function Lw(e,t){Lk.call(this,Cw.Na,e),this.size=t}function Mw(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return zg.setTimeout((function(){e()}),t)}Cw.Ma="serverreachability",Xg(Pw,Lk),Cw.STAT_EVENT="statevent",Xg(Dw,Lk),Cw.Na="timingevent",Xg(Lw,Lk);var Fw={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Uw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function jw(){}function Vw(e){return e.h||(e.h=e.i())}function qw(){}jw.prototype.h=null;var Bw,zw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ww(){Lk.call(this,"d")}function Kw(){Lk.call(this,"c")}function Hw(){}function Gw(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new _w(this),this.P=Zw,e=_k?125:void 0,this.W=new mw(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Qw}function Qw(){this.i=null,this.g="",this.h=!1}Xg(Ww,Lk),Xg(Kw,Lk),Xg(Hw,jw),Hw.prototype.g=function(){return new XMLHttpRequest},Hw.prototype.i=function(){return{}},Bw=new Hw;var Zw=45e3,Yw={},$w={};function Jw(e,t,n){e.K=1,e.v=bb(vb(t)),e.s=n,e.U=!0,Xw(e,null)}function Xw(e,t){e.F=Date.now(),rb(e),e.A=vb(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ob(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Qw,e.g=M_(e.l,n?t:null,!e.s),0<e.O&&(e.L=new bw($g(e.Ia,e,e.g),e.O)),Ew(e.V,e.g,"readystatechange",e.gb),t=e.H?pk(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Rw(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function eb(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function tb(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=nb(e,n))==$w){4==t&&(e.o=4,Ow(14),i=!1),Tw(e.j,e.m,null,"[Incomplete Response]");break}if(r==Yw){e.o=4,Ow(15),Tw(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Tw(e.j,e.m,r,null),sb(e,r)}eb(e)&&r!=$w&&r!=Yw&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ow(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),C_(t),t.L=!0,Ow(11))):(Tw(e.j,e.m,n,"[Invalid Chunked Response]"),ub(e),ob(e))}function nb(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?$w:(n=Number(t.substring(n,r)),isNaN(n)?Yw:(r+=1)+n>t.length?$w:(t=t.substr(r,n),e.C=r+n,t))}function rb(e){e.Y=Date.now()+e.P,ib(e,e.P)}function ib(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Mw($g(e.eb,e),t)}function ab(e){e.B&&(zg.clearTimeout(e.B),e.B=null)}function ob(e){0==e.l.G||e.I||P_(e.l,e)}function ub(e){ab(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,gw(e.W),Iw(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function sb(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Bb(n.i,e)))if(n.I=e.N,!e.J&&Bb(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;A_(n),k_(n)}T_(n),Ow(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Mw($g(n.ab,n),6e3));if(1>=qb(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else D_(n,11)}else if((e.J||n.g==e)&&A_(n),!ok(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ck(l,"spdy")||ck(l,"quic")||ck(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(zb(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,wb(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=L_(r,r.H?r.la:null,r.W),d.J){Wb(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ab(p),rb(p)),r.g=d}else S_(r);0<n.l.length&&__(n)}else"stop"!=a[0]&&"close"!=a[0]||D_(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?D_(n,7):g_(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Rw(4)}catch(a){}}function cb(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Kg(e)||"string"===typeof e)rk(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Kg(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Kg(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function lb(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof lb)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function fb(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];hb(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)hb(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function hb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(jg=Gw.prototype).setTimeout=function(e){this.P=e},jg.gb=function(e){e=e.target;var t=this.L;t&&3==d_(e)?t.l():this.Ia(e)},jg.Ia=function(e){try{if(e==this.g)e:{var t=d_(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||_k||this.g&&(this.h.h||this.g.ga()||p_(this.g)))){this.I||4!=t||7==n||Rw(8==n||0>=r?3:2),ab(this);var i=this.g.ba();this.N=i;t:if(eb(this)){var a=p_(this.g);e="";var o=a.length,u=4==d_(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ub(this),ob(this);var s="";break t}this.h.i=new zg.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ok(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Ow(12),ub(this),ob(this);break e}Tw(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sb(this,i)}this.U?(tb(this,t,s),_k&&this.i&&3==t&&(Ew(this.V,this.W,"tick",this.fb),this.W.start())):(Tw(this.j,this.m,s,null),sb(this,s)),4==t&&ub(this),this.i&&!this.I&&(4==t?P_(this.l,this):(this.i=!1,rb(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Ow(12)):(this.o=0,Ow(13)),ub(this),ob(this)}}}catch(t){}},jg.fb=function(){if(this.g){var e=d_(this.g),t=this.g.ga();this.C<t.length&&(ab(this),tb(this,e,t),this.i&&4!=e&&rb(this))}},jg.cancel=function(){this.I=!0,ub(this)},jg.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Rw(3),Ow(17)),ub(this),this.o=2,ob(this)):ib(this,this.Y-e)},(jg=lb.prototype).R=function(){fb(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},jg.T=function(){return fb(this),this.g.concat()},jg.get=function(e,t){return hb(this.h,e)?this.h[e]:t},jg.set=function(e,t){hb(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},jg.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var db=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pb(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof pb){this.g=void 0!==t?t:e.g,yb(this,e.j),this.s=e.s,mb(this,e.i),gb(this,e.m),this.l=e.l,t=e.h;var n=new Ab;n.i=t.i,t.g&&(n.g=new lb(t.g),n.h=t.h),kb(this,n),this.o=e.o}else e&&(n=String(e).match(db))?(this.g=!!t,yb(this,n[1]||"",!0),this.s=_b(n[2]||""),mb(this,n[3]||"",!0),gb(this,n[4]),this.l=_b(n[5]||"",!0),kb(this,n[6]||"",!0),this.o=_b(n[7]||"")):(this.g=!!t,this.h=new Ab(null,this.g))}function vb(e){return new pb(e)}function yb(e,t,n){e.j=n?_b(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mb(e,t,n){e.i=n?_b(t,!0):t}function gb(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function kb(e,t,n){t instanceof Ab?(e.h=t,function(e,t){t&&!e.j&&(Pb(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Rb(this,t),Ob(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=xb(t,Cb)),e.h=new Ab(t,e.g))}function wb(e,t,n){e.h.set(t,n)}function bb(e){return wb(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _b(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xb(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Eb),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Eb(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}pb.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xb(t,Ib,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(xb(t,Ib,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(xb(n,"/"==n.charAt(0)?Tb:Sb,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xb(n,Nb)),e.join("")};var Ib=/[#\/\?@]/g,Sb=/[#\?:]/g,Tb=/[#\?]/g,Cb=/[#\?@]/g,Nb=/#/g;function Ab(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pb(e){e.g||(e.g=new lb,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Rb(e,t){Pb(e),t=Lb(e,t),hb(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,hb((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&fb(e)))}function Db(e,t){return Pb(e),t=Lb(e,t),hb(e.g.h,t)}function Ob(e,t,n){Rb(e,t),0<n.length&&(e.i=null,e.g.set(Lb(e,t),ak(n)),e.h+=n.length)}function Lb(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(jg=Ab.prototype).add=function(e,t){Pb(this),this.i=null,e=Lb(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},jg.forEach=function(e,t){Pb(this),this.g.forEach((function(n,r){rk(n,(function(n){e.call(t,n,r,this)}),this)}),this)},jg.T=function(){Pb(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},jg.R=function(e){Pb(this);var t=[];if("string"===typeof e)Db(this,e)&&(t=ik(t,this.g.get(Lb(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ik(t,e[n])}return t},jg.set=function(e,t){return Pb(this),this.i=null,Db(this,e=Lb(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},jg.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},jg.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Mb=ye((function e(t,n){pe(this,e),this.h=t,this.g=n}));function Fb(e){this.l=e||jb,zg.PerformanceNavigationTiming?e=0<(e=zg.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(zg.g&&zg.g.Ea&&zg.g.Ea()&&zg.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ub,jb=10;function Vb(e){return!!e.h||!!e.g&&e.g.size>=e.j}function qb(e){return e.h?1:e.g?e.g.size:0}function Bb(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function zb(e,t){e.g?e.g.add(t):e.h=t}function Wb(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Kb(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=nn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ak(e.i)}function Hb(){}function Gb(){this.g=new Hb}function Qb(e,t,n){var r=n||"";try{cb(e,(function(e,n){var i=e;Hg(e)&&(i=ow(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(mF){throw t.push(r+"type="+encodeURIComponent("_badmap")),mF}}function Zb(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Yb(e){this.l=e.$b||null,this.j=e.ib||!1}function $b(e,t){rw.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Jb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fb.prototype.cancel=function(){if(this.i=Kb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=nn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Hb.prototype.stringify=function(e){return zg.JSON.stringify(e,void 0)},Hb.prototype.parse=function(e){return zg.JSON.parse(e,void 0)},Xg(Yb,jw),Yb.prototype.g=function(){return new $b(this.l,this.j)},Yb.prototype.i=(Ub={},function(){return Ub}),Xg($b,rw);var Jb=0;function Xb(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function e_(e){e.readyState=4,e.l=null,e.j=null,e.A=null,t_(e)}function t_(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(jg=$b.prototype).open=function(e,t){if(this.readyState!=Jb)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,t_(this)},jg.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||zg).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},jg.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,e_(this)),this.readyState=Jb},jg.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,t_(this)),this.g&&(this.readyState=3,t_(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof zg.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xb(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},jg.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?e_(this):t_(this),3==this.readyState&&Xb(this)}},jg.Ua=function(e){this.g&&(this.response=this.responseText=e,e_(this))},jg.Ta=function(e){this.g&&(this.response=e,e_(this))},jg.ha=function(){this.g&&e_(this)},jg.setRequestHeader=function(e,t){this.v.append(e,t)},jg.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},jg.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($b.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var n_=zg.JSON.parse;function r_(e){rw.call(this),this.headers=new lb,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=i_,this.K=this.L=!1}Xg(r_,rw);var i_="",a_=/^https?$/i,o_=["POST","PUT"];function u_(e){return"content-type"==e.toLowerCase()}function s_(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,c_(e),f_(e)}function c_(e){e.D||(e.D=!0,iw(e,"complete"),iw(e,"error"))}function l_(e){if(e.h&&"undefined"!=typeof Bg&&(!e.C[1]||4!=d_(e)||2!=e.ba()))if(e.v&&4==d_(e))kw(e.Fa,0,e);else if(iw(e,"readystatechange"),4==d_(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(db)[1]||null;if(!a&&zg.self&&zg.self.location){var o=zg.self.location.protocol;a=o.substr(0,o.length-1)}i=!a_.test(a?a.toLowerCase():"")}t=i}if(t)iw(e,"complete"),iw(e,"success");else{e.m=6;try{var u=2<d_(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",c_(e)}}finally{f_(e)}}}function f_(e,t){if(e.g){h_(e);var n=e.g,r=e.C[0]?Wg:null;e.g=null,e.C=null,t||iw(e,"ready");try{n.onreadystatechange=r}catch(mF){}}}function h_(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(zg.clearTimeout(e.A),e.A=null)}function d_(e){return e.g?e.g.readyState:0}function p_(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case i_:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function v_(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return dk(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wb(e,t,n))}function y_(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function m_(e){this.za=0,this.l=[],this.h=new Sw,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=y_("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=y_("baseRetryDelayMs",5e3,e),this.$a=y_("retryDelaySeedMs",1e4,e),this.Ya=y_("forwardChannelMaxRetries",2,e),this.ra=y_("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Fb(e&&e.concurrentRequestLimit),this.Ca=new Gb,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function g_(e){if(w_(e),3==e.G){var t=e.V++,n=vb(e.F);wb(n,"SID",e.J),wb(n,"RID",t),wb(n,"TYPE","terminate"),E_(e,n),(t=new Gw(e,e.h,t,void 0)).K=2,t.v=bb(vb(n)),n=!1,zg.navigator&&zg.navigator.sendBeacon&&(n=zg.navigator.sendBeacon(t.v.toString(),"")),!n&&zg.Image&&((new Image).src=t.v,n=!0),n||(t.g=M_(t.l,null),t.g.ea(t.v)),t.F=Date.now(),rb(t)}O_(e)}function k_(e){e.g&&(C_(e),e.g.cancel(),e.g=null)}function w_(e){k_(e),e.u&&(zg.clearTimeout(e.u),e.u=null),A_(e),e.i.cancel(),e.m&&("number"===typeof e.m&&zg.clearTimeout(e.m),e.m=null)}function b_(e,t){e.l.push(new Mb(e.Za++,t)),3==e.G&&__(e)}function __(e){Vb(e.i)||e.m||(e.m=!0,dw(e.Ha,e),e.C=0)}function x_(e,t){var n;n=t?t.m:e.V++;var r=vb(e.F);wb(r,"SID",e.J),wb(r,"RID",n),wb(r,"AID",e.U),E_(e,r),e.o&&e.s&&v_(r,e.o,e.s),n=new Gw(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=I_(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),zb(e.i,n),Jw(n,r,t)}function E_(e,t){e.j&&cb({},(function(e,n){wb(t,n,e)}))}function I_(e,t,n){n=Math.min(e.l.length,n);var r=e.j?$g(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Qb(l,o,"req"+c+"_")}catch(lx){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function S_(e){e.g||e.u||(e.Y=1,dw(e.Ga,e),e.A=0)}function T_(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Mw($g(e.Ga,e),R_(e,e.A)),e.A++,!0)}function C_(e){null!=e.B&&(zg.clearTimeout(e.B),e.B=null)}function N_(e){e.g=new Gw(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=vb(e.oa);wb(t,"RID","rpc"),wb(t,"SID",e.J),wb(t,"CI",e.N?"0":"1"),wb(t,"AID",e.U),E_(e,t),wb(t,"TYPE","xmlhttp"),e.o&&e.s&&v_(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=bb(vb(t)),n.s=null,n.U=!0,Xw(n,e)}function A_(e){null!=e.v&&(zg.clearTimeout(e.v),e.v=null)}function P_(e,t){var n=null;if(e.g==t){A_(e),C_(e),e.g=null;var r=2}else{if(!Bb(e.i,t))return;n=t.D,Wb(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;iw(r=Aw(),new Lw(r,n,t,i)),__(e)}else S_(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(qb(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Mw($g(e.Ha,e,t),R_(e,e.C)),e.C++,!0))}(e,t)||2==r&&T_(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:D_(e,5);break;case 4:D_(e,10);break;case 3:D_(e,6);break;default:D_(e,2)}}function R_(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function D_(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=$g(e.jb,e);n||(n=new pb("//www.google.com/images/cleardot.gif"),zg.location&&"http"==zg.location.protocol||yb(n,"https"),bb(n)),function(e,t){var n=new Sw;if(zg.Image){var r=new Image;r.onload=Jg(Zb,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Jg(Zb,n,r,"TestLoadImage: error",!1,t),r.onabort=Jg(Zb,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Jg(Zb,n,r,"TestLoadImage: timeout",!1,t),zg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ow(2);e.G=0,e.j&&e.j.va(t),O_(e),w_(e)}function O_(e){e.G=0,e.I=-1,e.j&&(0==Kb(e.i).length&&0==e.l.length||(e.i.i.length=0,ak(e.l),e.l.length=0),e.j.ua())}function L_(e,t,n){var r=function(e){return e instanceof pb?vb(e):new pb(e,void 0)}(n);if(""!=r.i)t&&mb(r,t+"."+r.i),gb(r,r.m);else{var i=zg.location;r=function(e,t,n,r){var i=new pb(null,void 0);return e&&yb(i,e),t&&mb(i,t),n&&gb(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&dk(e.aa,(function(e,t){wb(r,t,e)})),t=e.D,n=e.sa,t&&n&&wb(r,t,n),wb(r,"VER",e.ma),E_(e,r),r}function M_(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new r_(new Yb({ib:!0})):new r_(e.qa)).L=e.H,t}function F_(){}function U_(){if(wk&&!(10<=Number(Dk)))throw Error("Environmental error: no available transport.")}function j_(e,t){rw.call(this),this.g=new m_(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ok(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ok(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new B_(this)}function V_(e){Ww.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function q_(){Kw.call(this),this.status=1}function B_(e){this.g=e}(jg=r_.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Bw.g(),this.C=this.u?Vw(this.u):Vw(Bw),this.g.onreadystatechange=$g(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void s_(this,a)}e=n||"";var i=new lb(this.headers);r&&cb(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=u_,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=zg.FormData&&e instanceof zg.FormData,!(0<=nk(o_,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{h_(this),0<this.B&&((this.K=function(e){return wk&&Pk()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$g(this.pa,this)):this.A=kw(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){s_(this,a)}},jg.pa=function(){"undefined"!=typeof Bg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,iw(this,"timeout"),this.abort(8))},jg.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,iw(this,"complete"),iw(this,"abort"),f_(this))},jg.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),f_(this,!0)),r_.Z.M.call(this)},jg.Fa=function(){this.s||(this.F||this.v||this.l?l_(this):this.cb())},jg.cb=function(){l_(this)},jg.ba=function(){try{return 2<d_(this)?this.g.status:-1}catch(Ub){return-1}},jg.ga=function(){try{return this.g?this.g.responseText:""}catch(Ub){return""}},jg.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),n_(t)}},jg.Da=function(){return this.m},jg.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(jg=m_.prototype).ma=8,jg.G=1,jg.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},jg.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Gw(this,this.h,e,void 0),n=this.s;if(this.P&&(n?yk(n=pk(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=I_(this,t,r),wb(i=vb(this.F),"RID",e),wb(i,"CVER",22),this.D&&wb(i,"X-HTTP-Session-Id",this.D),E_(this,i),this.o&&n&&v_(i,this.o,n),zb(this.i,t),this.Ra&&wb(i,"TYPE","init"),this.ja?(wb(i,"$req",r),wb(i,"SID","null"),t.$=!0,Jw(t,i,null)):Jw(t,i,r),this.G=2}}else 3==this.G&&(e?x_(this,e):0==this.l.length||Vb(this.i)||x_(this))},jg.Ga=function(){if(this.u=null,N_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Mw($g(this.bb,this),e)}},jg.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ow(10),k_(this),N_(this))},jg.ab=function(){null!=this.v&&(this.v=null,k_(this),T_(this),Ow(19))},jg.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ow(2)):(this.h.info("Failed to ping google.com"),Ow(1))},(jg=F_.prototype).xa=function(){},jg.wa=function(){},jg.va=function(){},jg.ua=function(){},jg.Oa=function(){},U_.prototype.g=function(e,t){return new j_(e,t)},Xg(j_,rw),j_.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),dw($g(e.hb,e,t))),Ow(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=L_(e,null,e.W),__(e)},j_.prototype.close=function(){g_(this.g)},j_.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,b_(this.g,t)}else this.v?((t={}).__data__=ow(e),b_(this.g,t)):b_(this.g,e)},j_.prototype.M=function(){this.g.j=null,delete this.j,g_(this.g),delete this.g,j_.Z.M.call(this)},Xg(V_,Ww),Xg(q_,Kw),Xg(B_,F_),B_.prototype.xa=function(){iw(this.g,"a")},B_.prototype.wa=function(e){iw(this.g,new V_(e))},B_.prototype.va=function(e){iw(this.g,new q_(e))},B_.prototype.ua=function(){iw(this.g,"b")},U_.prototype.createWebChannel=U_.prototype.g,j_.prototype.send=j_.prototype.u,j_.prototype.open=j_.prototype.m,j_.prototype.close=j_.prototype.close,Fw.NO_ERROR=0,Fw.TIMEOUT=8,Fw.HTTP_ERROR=6,Uw.COMPLETE="complete",qw.EventType=zw,zw.OPEN="a",zw.CLOSE="b",zw.ERROR="c",zw.MESSAGE="d",rw.prototype.listen=rw.prototype.N,r_.prototype.listenOnce=r_.prototype.O,r_.prototype.getLastError=r_.prototype.La,r_.prototype.getLastErrorCode=r_.prototype.Da,r_.prototype.getStatus=r_.prototype.ba,r_.prototype.getResponseJson=r_.prototype.Qa,r_.prototype.getResponseText=r_.prototype.ga,r_.prototype.send=r_.prototype.ea;var z_=qg.createWebChannelTransport=function(){return new U_},W_=qg.getStatEventTarget=function(){return Aw()},K_=qg.ErrorCode=Fw,H_=qg.EventType=Uw,G_=qg.Event=Cw,Q_=qg.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Z_=qg.FetchXmlHttpFactory=Yb,Y_=qg.WebChannel=qw,$_=qg.XhrIo=r_,J_="@firebase/firestore",X_=function(){function e(t){pe(this,e),this.uid=t}return ye(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();X_.UNAUTHENTICATED=new X_(null),X_.GOOGLE_CREDENTIALS=new X_("google-credentials-uid"),X_.FIRST_PARTY=new X_("first-party-uid"),X_.MOCK_USER=new X_("mock-user");var ex="9.8.3",tx=new dr("@firebase/firestore");function nx(){return tx.logLevel}function rx(e){if(tx.logLevel<=or.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ox);tx.debug.apply(tx,["Firestore (".concat(ex,"): ").concat(e)].concat(he(i)))}}function ix(e){if(tx.logLevel<=or.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ox);tx.error.apply(tx,["Firestore (".concat(ex,"): ").concat(e)].concat(he(i)))}}function ax(e){if(tx.logLevel<=or.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ox);tx.warn.apply(tx,["Firestore (".concat(ex,"): ").concat(e)].concat(he(i)))}}function ox(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ux(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ex,") INTERNAL ASSERTION FAILED: ")+e;throw ix(t),new Error(t)}function sx(e,t){e||ux()}function cx(e,t){return e}var lx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fx=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ye(n)}(Tn),hx=ye((function e(){var t=this;pe(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),dx=ye((function e(t,n){pe(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),px=function(){function e(){pe(this,e)}return ye(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(X_.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),vx=function(){function e(t){pe(this,e),this.token=t,this.changeListener=null}return ye(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yx=function(){function e(t){pe(this,e),this.t=t,this.currentUser=X_.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ye(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new hx;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new hx,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){rx("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(rx("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hx)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(rx("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(sx("string"==typeof n.accessToken),new dx(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return sx(null===e||"string"==typeof e),new X_(e)}}]),e}(),mx=ye((function e(t,n,r){pe(this,e),this.type="FirstParty",this.user=X_.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),gx=function(){function e(t,n,r){pe(this,e),this.h=t,this.l=n,this.m=r}return ye(e,[{key:"getToken",value:function(){return Promise.resolve(new mx(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(X_.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),kx=ye((function e(t){pe(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),wx=function(){function e(t){pe(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ye(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&rx("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,rx("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){rx("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):rx("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(sx("string"==typeof t.token),e.p=t.token,new kx(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function bx(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var _x=function(){function e(){pe(this,e)}return ye(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=bx(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function xx(e,t){return e<t?-1:e>t?1:0}function Ex(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ix(e){return e+"\0"}var Sx=function(){function e(t,n){if(pe(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new fx(lx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fx(lx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new fx(lx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fx(lx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ye(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?xx(this.nanoseconds,e.nanoseconds):xx(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Tx=function(){function e(t){pe(this,e),this.timestamp=t}return ye(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Sx(0,0))}},{key:"max",value:function(){return new e(new Sx(253402300799,999999999))}}]),e}(),Cx=function(){function e(t,n,r){pe(this,e),void 0===n?n=0:n>t.length&&ux(),void 0===r?r=t.length-n:r>t.length-n&&ux(),this.segments=t,this.offset=n,this.len=r}return ye(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Nx=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new fx(lx.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,he(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cx),Ax=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Px=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ax.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new fx(lx.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new fx(lx.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new fx(lx.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new fx(lx.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cx),Rx=function(){function e(t){pe(this,e),this.path=t}return ye(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Nx.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Nx.fromString(t))}},{key:"fromName",value:function(t){return new e(Nx.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Nx.emptyPath())}},{key:"comparator",value:function(e,t){return Nx.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Nx(t.slice()))}}]),e}(),Dx=ye((function e(t,n,r,i){pe(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ox(e){return e.fields.find((function(e){return 2===e.kind}))}function Lx(e){return e.fields.filter((function(e){return 2!==e.kind}))}Dx.UNKNOWN_ID=-1;var Mx=ye((function e(t,n){pe(this,e),this.fieldPath=t,this.kind=n})),Fx=function(){function e(t,n){pe(this,e),this.sequenceNumber=t,this.offset=n}return ye(e,null,[{key:"empty",value:function(){return new e(0,Vx.min())}}]),e}();function Ux(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Tx.fromTimestamp(1e9===r?new Sx(n+1,0):new Sx(n,r));return new Vx(i,Rx.empty(),t)}function jx(e){return new Vx(e.readTime,e.key,-1)}var Vx=function(){function e(t,n,r){pe(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ye(e,null,[{key:"min",value:function(){return new e(Tx.min(),Rx.empty(),-1)}},{key:"max",value:function(){return new e(Tx.max(),Rx.empty(),-1)}}]),e}();function qx(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Rx.comparator(e.documentKey,t.documentKey))?n:xx(e.largestBatchId,t.largestBatchId)}var Bx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zx=function(){function e(){pe(this,e),this.onCommittedListeners=[]}return ye(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Wx(e){return Kx.apply(this,arguments)}function Kx(){return Kx=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===lx.FAILED_PRECONDITION&&t.message===Bx){e.next=2;break}throw t;case 2:rx("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Kx.apply(this,arguments)}var Hx=function(){function e(t){var n=this;pe(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ye(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ux(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=nn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Gx=function(){function e(t,n){var r=this;pe(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new hx,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Yx(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=tE(e.target.error);r.T.reject(new Yx(t,n))}}return ye(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(rx("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Jx(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Yx(n,t)}}}]),e}(),Qx=function(){function e(t,n,r){pe(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(kn())&&ix("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ye(e,[{key:"k",value:function(){var e=tr(Xn().mark((function e(t){var n=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return rx("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Yx(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fx(lx.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new fx(lx.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Yx(t,n))},i.onupgradeneeded=function(e){rx("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){rx("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=tr(Xn().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Xn().mark((function e(){var n,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.k(t);case 2:return c.db=e.sent,n=Gx.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Hx.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,rx("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return rx("SimpleDb","Removing database:",e),Xx(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!Sn())return!1;if(e.S())return!0;var t=kn(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/chipadmin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Zx=function(){function e(t){pe(this,e),this.$=t,this.B=!1,this.L=null}return ye(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Xx(this.$.delete())}}]),e}(),Yx=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,lx.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ye(n)}(fx);function $x(e){return"IndexedDbTransactionError"===e.name}var Jx=function(){function e(t){pe(this,e),this.store=t}return ye(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(rx("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(rx("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Xx(n)}},{key:"add",value:function(e){return rx("SimpleDb","ADD",this.store.name,e,e),Xx(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Xx(this.store.get(e)).next((function(n){return void 0===n&&(n=null),rx("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return rx("SimpleDb","DELETE",this.store.name,e),Xx(this.store.delete(e))}},{key:"count",value:function(){return rx("SimpleDb","COUNT",this.store.name),Xx(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Hx((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Hx((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){rx("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Hx((function(n,r){t.onerror=function(e){var t=tE(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Hx((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Zx(i),o=t(i.primaryKey,i.value,a);if(o instanceof Hx){var u=o.catch((function(e){return a.done(),Hx.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Hx.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Xx(e){return new Hx((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=tE(e.target.error);n(t)}}))}var eE=!1;function tE(e){var t=Qx.v(kn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new fx("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return eE||(eE=!0,setTimeout((function(){throw r}),0)),r}}return e}var nE=function(){function e(t,n){pe(this,e),this.asyncQueue=t,this.X=n,this.task=null}return ye(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;rx("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=rx,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!$x(e.t4)){e.next=17;break}rx("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Wx(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),rE=function(){function e(t,n){pe(this,e),this.localStore=t,this.persistence=n}return ye(e,[{key:"tt",value:function(){var e=tr(Xn().mark((function e(){var t,n=this,r=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Hx.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return rx("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return rx("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=jx(t);qx(r,n)>0&&(n=r)})),new Vx(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),iE=function(){function e(t,n){var r=this;pe(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return ye(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function aE(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function oE(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uE(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}iE.ot=-1;var sE=function(){function e(t,n){pe(this,e),this.comparator=t,this.root=n||lE.EMPTY}return ye(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,lE.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,lE.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new cE(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new cE(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new cE(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new cE(this.root,e,this.comparator,!0)}}]),e}(),cE=function(){function e(t,n,r,i){pe(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ye(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),lE=function(){function e(t,n,r,i,a){pe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ye(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ux();if(this.right.isRed())throw ux();var e=this.left.check();if(e!==this.right.check())throw ux();return e+(this.isRed()?0:1)}}]),e}();lE.EMPTY=null,lE.RED=!0,lE.BLACK=!1,lE.EMPTY=new(function(){function e(){pe(this,e),this.size=0}return ye(e,[{key:"key",get:function(){throw ux()}},{key:"value",get:function(){throw ux()}},{key:"color",get:function(){throw ux()}},{key:"left",get:function(){throw ux()}},{key:"right",get:function(){throw ux()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new lE(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var fE=function(){function e(t){pe(this,e),this.comparator=t,this.data=new sE(this.comparator)}return ye(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new hE(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new hE(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),hE=function(){function e(t){pe(this,e),this.iter=t}return ye(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function dE(e){return e.hasNext()?e.getNext():void 0}var pE=function(){function e(t){pe(this,e),this.fields=t,t.sort(Px.comparator)}return ye(e,[{key:"unionWith",value:function(t){var n,r=new fE(Px.comparator),i=nn(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=nn(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=nn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ex(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var vE=function(e){function t(e){pe(this,t),this.binaryString=e}return ye(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return xx(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();vE.EMPTY_BYTE_STRING=new vE("");var yE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mE(e){if(sx(!!e),"string"==typeof e){var t=0,n=yE.exec(e);if(sx(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:gE(e.seconds),nanos:gE(e.nanos)}}function gE(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function kE(e){return"string"==typeof e?vE.fromBase64String(e):vE.fromUint8Array(e)}function wE(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function bE(e){var t=e.mapValue.fields.__previous_value__;return wE(t)?bE(t):t}function _E(e){var t=mE(e.mapValue.fields.__local_write_time__.timestampValue);return new Sx(t.seconds,t.nanos)}var xE=ye((function e(t,n,r,i,a,o,u,s){pe(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),EE=function(){function e(t,n){pe(this,e),this.projectId=t,this.database=n||"(default)"}return ye(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function IE(e){return null==e}function SE(e){return 0===e&&1/e==-1/0}function TE(e){return"number"==typeof e&&Number.isInteger(e)&&!SE(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var CE={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},NE={nullValue:"NULL_VALUE"};function AE(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wE(e)?4:WE(e)?9007199254740991:10:ux()}function PE(e,t){if(e===t)return!0;var n=AE(e);if(n!==AE(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _E(e).isEqual(_E(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=mE(e.timestampValue),r=mE(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return kE(e.bytesValue).isEqual(kE(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gE(e.geoPointValue.latitude)===gE(t.geoPointValue.latitude)&&gE(e.geoPointValue.longitude)===gE(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gE(e.integerValue)===gE(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=gE(e.doubleValue),r=gE(t.doubleValue);return n===r?SE(n)===SE(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ex(e.arrayValue.values||[],t.arrayValue.values||[],PE);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(aE(n)!==aE(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!PE(n[i],r[i])))return!1;return!0}(e,t);default:return ux()}}function RE(e,t){return void 0!==(e.values||[]).find((function(e){return PE(e,t)}))}function DE(e,t){if(e===t)return 0;var n=AE(e),r=AE(t);if(n!==r)return xx(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xx(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=gE(e.integerValue||e.doubleValue),r=gE(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return OE(e.timestampValue,t.timestampValue);case 4:return OE(_E(e),_E(t));case 5:return xx(e.stringValue,t.stringValue);case 6:return function(e,t){var n=kE(e),r=kE(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=xx(n[i],r[i]);if(0!==a)return a}return xx(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=xx(gE(e.latitude),gE(t.latitude));return 0!==n?n:xx(gE(e.longitude),gE(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=DE(n[i],r[i]);if(a)return a}return xx(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===CE.mapValue&&t===CE.mapValue)return 0;if(e===CE.mapValue)return 1;if(t===CE.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=xx(r[o],a[o]);if(0!==u)return u;var s=DE(n[r[o]],i[a[o]]);if(0!==s)return s}return xx(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ux()}}function OE(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xx(e,t);var n=mE(e),r=mE(t),i=xx(n.seconds,r.seconds);return 0!==i?i:xx(n.nanos,r.nanos)}function LE(e){return ME(e)}function ME(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=mE(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?kE(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Rx.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=nn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ME(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=nn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ME(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ux();var t,n}function FE(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function UE(e){return!!e&&"integerValue"in e}function jE(e){return!!e&&"arrayValue"in e}function VE(e){return!!e&&"nullValue"in e}function qE(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function BE(e){return!!e&&"mapValue"in e}function zE(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return oE(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=zE(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=zE(e.arrayValue.values[r]);return n}return Object.assign({},e)}function WE(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function KE(e){return"nullValue"in e?NE:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?FE(EE.empty(),Rx.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ux()}function HE(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?FE(EE.empty(),Rx.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?CE:ux()}function GE(e,t){var n=DE(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function QE(e,t){var n=DE(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ZE=function(){function e(t){pe(this,e),this.value=t}return ye(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!BE(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zE(t)}},{key:"setAll",value:function(e){var t=this,n=Px.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=zE(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());BE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return PE(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];BE(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){oE(t,(function(t,n){return e[t]=n}));var r,i=nn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(zE(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function YE(e){var t=[];return oE(e.fields,(function(e,n){var r=new Px([e]);if(BE(n)){var i=YE(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=nn(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new pE(t)}var $E=function(){function e(t,n,r,i,a,o){pe(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ye(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ZE.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ZE.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Tx.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Tx.min(),Tx.min(),ZE.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Tx.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Tx.min(),ZE.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Tx.min(),ZE.empty(),2)}}]),e}(),JE=ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;pe(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function XE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new JE(e,t,n,r,i,a,o)}function eI(e){var t=cx(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+LE(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),IE(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return LE(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return LE(e)})).join(",")),t.ut=n}return t.ut}function tI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!mI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!PE(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!kI(e.startAt,t.startAt)&&kI(e.endAt,t.endAt)}function nI(e){return Rx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function rI(e,t){return e.filters.filter((function(e){return e instanceof oI&&e.field.isEqual(t)}))}function iI(e,t,n){var r,i=NE,a=!0,o=nn(rI(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=NE,c=!0;switch(u.op){case"<":case"<=":s=KE(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=NE}GE({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];GE({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function aI(e,t,n){var r,i=CE,a=!0,o=nn(rI(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=CE,c=!0;switch(u.op){case">=":case">":s=HE(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=CE}QE({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];QE({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var oI=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(DE(t,this.value)):null!==t&&AE(this.value)===AE(t)&&this.at(DE(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ux()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new uI(e,t,r):"array-contains"===t?new fI(e,r):"in"===t?new hI(e,r):"not-in"===t?new dI(e,r):"array-contains-any"===t?new pI(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new sI(e,n):new cI(e,n)}}]),n}(function(){return ye((function e(){pe(this,e)}))}()),uI=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this,e,r,i)).key=Rx.fromName(i.referenceValue),a}return ye(n,[{key:"matches",value:function(e){var t=Rx.comparator(e.key,this.key);return this.at(t)}}]),n}(oI),sI=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,"in",r)).keys=lI("in",r),i}return ye(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(oI),cI=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,"not-in",r)).keys=lI("not-in",r),i}return ye(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(oI);function lI(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Rx.fromName(e.referenceValue)}))}var fI=function(e){Oe(n,e);var t=je(n);function n(e,r){return pe(this,n),t.call(this,e,"array-contains",r)}return ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return jE(t)&&RE(t.arrayValue,this.value)}}]),n}(oI),hI=function(e){Oe(n,e);var t=je(n);function n(e,r){return pe(this,n),t.call(this,e,"in",r)}return ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&RE(this.value.arrayValue,t)}}]),n}(oI),dI=function(e){Oe(n,e);var t=je(n);function n(e,r){return pe(this,n),t.call(this,e,"not-in",r)}return ye(n,[{key:"matches",value:function(e){if(RE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!RE(this.value.arrayValue,t)}}]),n}(oI),pI=function(e){Oe(n,e);var t=je(n);function n(e,r){return pe(this,n),t.call(this,e,"array-contains-any",r)}return ye(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!jE(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return RE(t.value.arrayValue,e)}))}}]),n}(oI),vI=ye((function e(t,n){pe(this,e),this.position=t,this.inclusive=n})),yI=ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";pe(this,e),this.field=t,this.dir=n}));function mI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function gI(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Rx.comparator(Rx.fromName(o.referenceValue),n.key):DE(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function kI(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!PE(e.position[n],t.position[n]))return!1;return!0}var wI=ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;pe(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function bI(e,t,n,r,i,a,o,u){return new wI(e,t,n,r,i,a,o,u)}function _I(e){return new wI(e)}function xI(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function EI(e){var t,n=nn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function II(e){return null!==e.collectionGroup}function SI(e){var t=cx(e);if(null===t.lt){t.lt=[];var n=EI(t),r=xI(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new yI(n)),t.lt.push(new yI(Px.keyField(),"asc"));else{var i,a=!1,o=nn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new yI(Px.keyField(),s))}}}return t.lt}function TI(e){var t=cx(e);if(!t.ft)if("F"===t.limitType)t.ft=XE(t.path,t.collectionGroup,SI(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=nn(SI(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new yI(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new vI(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new vI(t.startAt.position,t.startAt.inclusive):null;t.ft=XE(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function CI(e,t,n){return new wI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function NI(e,t){return tI(TI(e),TI(t))&&e.limitType===t.limitType}function AI(e){return"".concat(eI(TI(e)),"|lt:").concat(e.limitType)}function PI(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(LE(t.value));var t})).join(", "),"]")),IE(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return LE(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return LE(e)})).join(",")),"Target(".concat(t,")")}(TI(e)),"; limitType=").concat(e.limitType,")")}function RI(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Rx.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=nn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=nn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=gI(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,SI(e),t))&&!(e.endAt&&!function(e,t,n){var r=gI(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,SI(e),t))}(e,t)}function DI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function OI(e){return function(t,n){var r,i=!1,a=nn(SI(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=LI(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function LI(e,t,n){var r=e.field.isKeyField()?Rx.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?DE(r,i):ux()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ux()}}function MI(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:SE(t)?"-0":t}}function FI(e){return{integerValue:""+e}}function UI(e,t){return TE(t)?FI(t):MI(e,t)}var jI=ye((function e(){pe(this,e),this._=void 0}));function VI(e,t,n){return e instanceof zI?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof WI?KI(e,t):e instanceof HI?GI(e,t):function(e,t){var n=BI(e,t),r=ZI(n)+ZI(e._t);return UE(n)&&UE(e._t)?FI(r):MI(e.wt,r)}(e,t)}function qI(e,t,n){return e instanceof WI?KI(e,t):e instanceof HI?GI(e,t):n}function BI(e,t){return e instanceof QI?UE(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var zI=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n)}(jI),WI=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this)).elements=e,r}return ye(n)}(jI);function KI(e,t){var n,r=YI(t),i=nn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return PE(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var HI=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this)).elements=e,r}return ye(n)}(jI);function GI(e,t){var n,r=YI(t),i=nn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!PE(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var QI=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).wt=e,i._t=r,i}return ye(n)}(jI);function ZI(e){return gE(e.integerValue||e.doubleValue)}function YI(e){return jE(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var $I=ye((function e(t,n){pe(this,e),this.field=t,this.transform=n}));var JI=ye((function e(t,n){pe(this,e),this.version=t,this.transformResults=n})),XI=function(){function e(t,n){pe(this,e),this.updateTime=t,this.exists=n}return ye(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function eS(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var tS=ye((function e(){pe(this,e)}));function nS(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new pS(e.key,XI.none()):new uS(e.key,e.data,XI.none());var n,r=e.data,i=ZE.empty(),a=new fE(Px.comparator),o=nn(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new sS(e.key,i,new pE(a.toArray()),XI.none())}function rS(e,t,n){e instanceof uS?function(e,t,n){var r=e.value.clone(),i=lS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof sS?function(e,t,n){if(eS(e.precondition,t)){var r=lS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(cS(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function iS(e,t,n,r){return e instanceof uS?function(e,t,n,r){if(!eS(e.precondition,t))return n;var i=e.value.clone(),a=fS(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof sS?function(e,t,n,r){if(!eS(e.precondition,t))return n;var i=fS(e.fieldTransforms,r,t),a=t.data;return a.setAll(cS(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return eS(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function aS(e,t){var n,r=null,i=nn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=BI(a.transform,o||null);null!=u&&(null===r&&(r=ZE.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function oS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ex(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof WI&&t instanceof WI||e instanceof HI&&t instanceof HI?Ex(e.elements,t.elements,PE):e instanceof QI&&t instanceof QI?PE(e._t,t._t):e instanceof zI&&t instanceof zI}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var uS=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return pe(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ye(n,[{key:"getFieldMask",value:function(){return null}}]),n}(tS),sS=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return pe(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ye(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(tS);function cS(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function lS(e,t,n){var r=new Map;sx(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,qI(o,u,n[i]))}return r}function fS(e,t,n){var r,i=new Map,a=nn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,VI(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var hS,dS,pS=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ye(n,[{key:"getFieldMask",value:function(){return null}}]),n}(tS),vS=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ye(n,[{key:"getFieldMask",value:function(){return null}}]),n}(tS),yS=ye((function e(t){pe(this,e),this.count=t}));function mS(e){switch(e){default:return ux();case lx.CANCELLED:case lx.UNKNOWN:case lx.DEADLINE_EXCEEDED:case lx.RESOURCE_EXHAUSTED:case lx.INTERNAL:case lx.UNAVAILABLE:case lx.UNAUTHENTICATED:return!1;case lx.INVALID_ARGUMENT:case lx.NOT_FOUND:case lx.ALREADY_EXISTS:case lx.PERMISSION_DENIED:case lx.FAILED_PRECONDITION:case lx.ABORTED:case lx.OUT_OF_RANGE:case lx.UNIMPLEMENTED:case lx.DATA_LOSS:return!0}}function gS(e){if(void 0===e)return ix("GRPC error has no .code"),lx.UNKNOWN;switch(e){case hS.OK:return lx.OK;case hS.CANCELLED:return lx.CANCELLED;case hS.UNKNOWN:return lx.UNKNOWN;case hS.DEADLINE_EXCEEDED:return lx.DEADLINE_EXCEEDED;case hS.RESOURCE_EXHAUSTED:return lx.RESOURCE_EXHAUSTED;case hS.INTERNAL:return lx.INTERNAL;case hS.UNAVAILABLE:return lx.UNAVAILABLE;case hS.UNAUTHENTICATED:return lx.UNAUTHENTICATED;case hS.INVALID_ARGUMENT:return lx.INVALID_ARGUMENT;case hS.NOT_FOUND:return lx.NOT_FOUND;case hS.ALREADY_EXISTS:return lx.ALREADY_EXISTS;case hS.PERMISSION_DENIED:return lx.PERMISSION_DENIED;case hS.FAILED_PRECONDITION:return lx.FAILED_PRECONDITION;case hS.ABORTED:return lx.ABORTED;case hS.OUT_OF_RANGE:return lx.OUT_OF_RANGE;case hS.UNIMPLEMENTED:return lx.UNIMPLEMENTED;case hS.DATA_LOSS:return lx.DATA_LOSS;default:return ux()}}(dS=hS||(hS={}))[dS.OK=0]="OK",dS[dS.CANCELLED=1]="CANCELLED",dS[dS.UNKNOWN=2]="UNKNOWN",dS[dS.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dS[dS.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dS[dS.NOT_FOUND=5]="NOT_FOUND",dS[dS.ALREADY_EXISTS=6]="ALREADY_EXISTS",dS[dS.PERMISSION_DENIED=7]="PERMISSION_DENIED",dS[dS.UNAUTHENTICATED=16]="UNAUTHENTICATED",dS[dS.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dS[dS.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dS[dS.ABORTED=10]="ABORTED",dS[dS.OUT_OF_RANGE=11]="OUT_OF_RANGE",dS[dS.UNIMPLEMENTED=12]="UNIMPLEMENTED",dS[dS.INTERNAL=13]="INTERNAL",dS[dS.UNAVAILABLE=14]="UNAVAILABLE",dS[dS.DATA_LOSS=15]="DATA_LOSS";var kS=function(){function e(t,n){pe(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ye(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=nn(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){oE(this.inner,(function(t,n){var r,i=nn(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return uE(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),wS=new sE(Rx.comparator);function bS(){return wS}var _S=new sE(Rx.comparator);function xS(){for(var e=_S,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ES(e){var t=_S;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function IS(){return TS()}function SS(){return TS()}function TS(){return new kS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var CS=new sE(Rx.comparator),NS=new fE(Rx.comparator);function AS(){for(var e=NS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var PS=new fE(xx);function RS(){return PS}var DS=function(){function e(t,n,r,i,a){pe(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ye(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,OS.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Tx.min(),r,RS(),bS(),AS())}}]),e}(),OS=function(){function e(t,n,r,i,a){pe(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ye(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(vE.EMPTY_BYTE_STRING,n,AS(),AS(),AS())}}]),e}(),LS=ye((function e(t,n,r,i){pe(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),MS=ye((function e(t,n){pe(this,e),this.targetId=t,this.It=n})),FS=ye((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vE.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;pe(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),US=function(){function e(){pe(this,e),this.Tt=0,this.Et=qS(),this.At=vE.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return ye(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=AS(),t=AS(),n=AS();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ux()}})),new OS(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=qS()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),jS=function(){function e(t){pe(this,e),this.Mt=t,this.Ft=new Map,this.$t=bS(),this.Bt=VS(),this.Lt=new fE(xx)}return ye(e,[{key:"Ut",value:function(e){var t,n=nn(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=nn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:ux()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(nI(i))if(0===n){var a=new Rx(i.path);this.Kt(t,a,$E.newNoDocument(a,Tx.min()))}else sx(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&nI(a.target)){var o=new Rx(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,$E.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=AS();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new DS(e,n,this.Lt,this.$t,r);return this.$t=bS(),this.Bt=VS(),this.Lt=new fE(xx),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new US,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new fE(xx),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||rx("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new US),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function VS(){return new sE(Rx.comparator)}function qS(){return new sE(Rx.comparator)}var BS={asc:"ASCENDING",desc:"DESCENDING"},zS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WS=ye((function e(t,n){pe(this,e),this.databaseId=t,this.dt=n}));function KS(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function HS(e,t){return e.dt?t.toBase64():t.toUint8Array()}function GS(e,t){return KS(e,t.toTimestamp())}function QS(e){return sx(!!e),Tx.fromTimestamp(function(e){var t=mE(e);return new Sx(t.seconds,t.nanos)}(e))}function ZS(e,t){return function(e){return new Nx(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function YS(e){var t=Nx.fromString(e);return sx(kT(t)),t}function $S(e,t){return ZS(e.databaseId,t.path)}function JS(e,t){var n=YS(t);if(n.get(1)!==e.databaseId.projectId)throw new fx(lx.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fx(lx.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rx(nT(n))}function XS(e,t){return ZS(e.databaseId,t)}function eT(e){var t=YS(e);return 4===t.length?Nx.emptyPath():nT(t)}function tT(e){return new Nx(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nT(e){return sx(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function rT(e,t,n){return{name:$S(e,t),fields:n.value.mapValue.fields}}function iT(e,t,n){var r=JS(e,t.name),i=QS(t.updateTime),a=new ZE({mapValue:{fields:t.fields}}),o=$E.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function aT(e,t){return"found"in t?function(e,t){sx(!!t.found),t.found.name,t.found.updateTime;var n=JS(e,t.found.name),r=QS(t.found.updateTime),i=new ZE({mapValue:{fields:t.found.fields}});return $E.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){sx(!!t.missing),sx(!!t.readTime);var n=JS(e,t.missing),r=QS(t.readTime);return $E.newNoDocument(n,r)}(e,t):ux()}function oT(e,t){var n;if(t instanceof uS)n={update:rT(e,t.key,t.value)};else if(t instanceof pS)n={delete:$S(e,t.key)};else if(t instanceof sS)n={update:rT(e,t.key,t.data),updateMask:gT(t.fieldMask)};else{if(!(t instanceof vS))return ux();n={verify:$S(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof zI)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof WI)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof HI)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof QI)return{fieldPath:t.field.canonicalString(),increment:n._t};throw ux()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:GS(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ux()}(e,t.precondition)),n}function uT(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?XI.updateTime(QS(e.updateTime)):void 0!==e.exists?XI.exists(e.exists):XI.none()}(t.currentDocument):XI.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)sx("REQUEST_TIME"===t.setToServerValue),n=new zI;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new WI(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new HI(i)}else"increment"in t?n=new QI(e,t.increment):ux();var a=Px.fromServerFormat(t.fieldPath);return new $I(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=JS(e,t.update.name),a=new ZE({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new pE(t.map((function(e){return Px.fromServerFormat(e)})))}(t.updateMask);return new sS(i,a,o,n,r)}return new uS(i,a,n,r)}if(t.delete){var u=JS(e,t.delete);return new pS(u,n)}if(t.verify){var s=JS(e,t.verify);return new vS(s,n)}return ux()}function sT(e,t){return{documents:[XS(e,t.path)]}}function cT(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=XS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=XS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(qE(e.value))return{unaryFilter:{field:pT(e.field),op:"IS_NAN"}};if(VE(e.value))return{unaryFilter:{field:pT(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qE(e.value))return{unaryFilter:{field:pT(e.field),op:"IS_NOT_NAN"}};if(VE(e.value))return{unaryFilter:{field:pT(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pT(e.field),op:dT(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:pT(e.field),direction:hT(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||IE(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function lT(e){var t=eT(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){sx(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=fT(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new yI(vT(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return IE(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new vI(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new vI(n,t)}(n.endAt)),bI(t,i,u,o,s,"F",c,l)}function fT(e){return e?void 0!==e.unaryFilter?[mT(e)]:void 0!==e.fieldFilter?[yT(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return fT(e)})).reduce((function(e,t){return e.concat(t)})):ux():[]}function hT(e){return BS[e]}function dT(e){return zS[e]}function pT(e){return{fieldPath:e.canonicalString()}}function vT(e){return Px.fromServerFormat(e.fieldPath)}function yT(e){return oI.create(vT(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ux()}}(e.fieldFilter.op),e.fieldFilter.value)}function mT(e){switch(e.unaryFilter.op){case"IS_NAN":var t=vT(e.unaryFilter.field);return oI.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=vT(e.unaryFilter.field);return oI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vT(e.unaryFilter.field);return oI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=vT(e.unaryFilter.field);return oI.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ux()}}function gT(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function kT(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function wT(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=_T(t)),t=bT(e.get(n),t);return _T(t)}function bT(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function _T(e){return e+"\x01\x01"}function xT(e){var t=e.length;if(sx(t>=2),2===t)return sx("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Nx.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ux(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ux()}a=o+2}return new Nx(r)}var ET=["userId","batchId"];function IT(e,t){return[e,wT(t)]}function ST(e,t,n){return[e,wT(t),n]}var TT={},CT=["prefixPath","collectionGroup","readTime","documentId"],NT=["prefixPath","collectionGroup","documentId"],AT=["collectionGroup","readTime","prefixPath","documentId"],PT=["canonicalId","targetId"],RT=["targetId","path"],DT=["path","targetId"],OT=["collectionId","parent"],LT=["indexId","uid"],MT=["uid","sequenceNumber"],FT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UT=["indexId","uid","orderedDocumentKey"],jT=["userId","collectionPath","documentId"],VT=["userId","collectionPath","largestBatchId"],qT=["userId","collectionGroup","largestBatchId"],BT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),zT=[].concat(he(BT),["documentOverlays"]),WT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KT=WT,HT=[].concat(KT,["indexConfiguration","indexState","indexEntries"]),GT=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return ye(n)}(zx);function QT(e,t){var n=cx(e);return Qx.N(n.ee,t)}var ZT=function(){function e(t,n,r,i){pe(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ye(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&rS(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=nn(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=iS(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=nn(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=iS(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=SS();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=nS(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Tx.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),AS())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ex(this.mutations,e.mutations,(function(e,t){return oS(e,t)}))&&Ex(this.baseMutations,e.baseMutations,(function(e,t){return oS(e,t)}))}}]),e}(),YT=function(){function e(t,n,r,i){pe(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ye(e,null,[{key:"from",value:function(t,n,r){sx(t.mutations.length===r.length);for(var i=CS,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),$T=function(){function e(t,n){pe(this,e),this.largestBatchId=t,this.mutation=n}return ye(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),JT=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tx.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tx.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vE.EMPTY_BYTE_STRING;pe(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return ye(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),XT=ye((function e(t){pe(this,e),this.ne=t}));function eC(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:tC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:$S(e,t.key),fields:t.data.value.mapValue.fields,updateTime:KS(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:nC(t.version)};else{if(!t.isUnknownDocument())return ux();r.unknownDocument={path:n.path.toArray(),version:nC(t.version)}}return r}function tC(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function nC(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function rC(e){var t=new Sx(e.seconds,e.nanoseconds);return Tx.fromTimestamp(t)}function iC(e,t){for(var n=(t.baseMutations||[]).map((function(t){return uT(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return uT(e.ne,t)})),u=Sx.fromMillis(t.localWriteTimeMs);return new ZT(t.batchId,u,n,o)}function aC(e){var t,n,r=rC(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?rC(e.lastLimboFreeSnapshotVersion):Tx.min();return void 0!==e.query.documents?(sx(1===(n=e.query).documents.length),t=TI(_I(eT(n.documents[0])))):t=function(e){return TI(lT(e))}(e.query),new JT(t,e.targetId,0,e.lastListenSequenceNumber,r,i,vE.fromBase64String(e.resumeToken))}function oC(e,t){var n,r=nC(t.snapshotVersion),i=nC(t.lastLimboFreeSnapshotVersion);n=nI(t.target)?sT(e.ne,t.target):cT(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:eI(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function uC(e){var t=lT({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?CI(t,t.limit,"L"):t}function sC(e,t){return new $T(t.largestBatchId,uT(e.ne,t.overlayMutation))}function cC(e,t){var n=t.path.lastSegment();return[e,wT(t.path.popLast()),n]}function lC(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:nC(r.readTime),documentKey:wT(r.documentKey.path),largestBatchId:r.largestBatchId}}var fC=function(){function e(){pe(this,e)}return ye(e,[{key:"getBundleMetadata",value:function(e,t){return hC(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:rC(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return hC(e).put({bundleId:(n=t).id,createTime:nC(QS(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return dC(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:uC(t.bundledQuery),readTime:rC(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return dC(e).put(function(e){return{name:e.name,readTime:nC(QS(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function hC(e){return QT(e,"bundles")}function dC(e){return QT(e,"namedQueries")}var pC=function(){function e(t,n){pe(this,e),this.wt=t,this.userId=n}return ye(e,[{key:"getOverlay",value:function(e,t){var n=this;return vC(e).get(cC(this.userId,t)).next((function(e){return e?sC(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=IS();return Hx.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new $T(t,a);i.push(r.ie(e,o))})),Hx.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(wT(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(vC(e).W("collectionPathOverlayIndex",i))})),Hx.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=IS(),a=wT(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return vC(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=nn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=sC(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=IS(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vC(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=sC(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return vC(e).put(function(e,t,n){var r=s(cC(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:oT(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function vC(e){return QT(e,"documentOverlays")}var yC=function(){function e(){pe(this,e)}return ye(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(gE(e.integerValue));else if("doubleValue"in e){var n=gE(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),SE(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(kE(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?WE(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ux()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=nn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Rx.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function mC(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function gC(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=mC(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}yC.ye=new yC;var kC=function(){function e(){pe(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ye(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=nn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=nn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=gC(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=gC(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),wC=function(){function e(t){pe(this,e),this.Me=t}return ye(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),bC=function(){function e(t){pe(this,e),this.Me=t}return ye(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),_C=function(){function e(){pe(this,e),this.Me=new kC,this.Fe=new wC(this.Me),this.$e=new bC(this.Me)}return ye(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),xC=function(){function e(t,n,r,i){pe(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ye(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function EC(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=IC(e.arrayValue,t.arrayValue))?n:0!==(n=IC(e.directionalValue,t.directionalValue))?n:Rx.comparator(e.documentKey,t.documentKey)}function IC(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var SC=function(){function e(t){pe(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=nn(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ye(e,[{key:"Ge",value:function(e){var t=Ox(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Lx(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=nn(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),TC=function(){function e(){pe(this,e),this.ze=new CC}return ye(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Hx.resolve()}},{key:"getCollectionParents",value:function(e,t){return Hx.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Hx.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Hx.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Hx.resolve(null)}},{key:"getIndexType",value:function(e,t){return Hx.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Hx.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Hx.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Hx.resolve(Vx.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Hx.resolve(Vx.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Hx.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Hx.resolve()}}]),e}(),CC=function(){function e(){pe(this,e),this.index={}}return ye(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fE(Nx.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new fE(Nx.comparator)).toArray()}}]),e}(),NC=new Uint8Array(0),AC=function(){function e(t,n){pe(this,e),this.user=t,this.databaseId=n,this.He=new CC,this.Je=new kS((function(e){return eI(e)}),(function(e,t){return tI(e,t)})),this.uid=t.uid||""}return ye(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:wT(i)};return PC(e).put(a)}return Hx.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ix(t),""],!1,!0);return PC(e).K(r).next((function(e){var r,i=nn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(xT(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=DC(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=OC(e);return a.next((function(e){o.put(lC(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=DC(e),r=OC(e),i=RC(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=RC(e),i=!0,a=new Map;return Hx.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=AS(),o=[];return Hx.forEach(a,(function(i,a){var u;rx("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(eI(t)));var s=function(e,t){var n=Ox(t);if(void 0===n)return null;var r,i=nn(rI(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=nn(Lx(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=nn(rI(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=nn(Lx(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?iI(e,o.fieldPath,e.startAt):aI(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new vI(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=nn(Lx(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?aI(e,o.fieldPath,e.endAt):iI(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new vI(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Hx.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Rx.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Hx.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):NC,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,he(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new xC(e,Rx.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new xC(e,Rx.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new SC(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=nn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Hx.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new fE(Px.comparator),r=!1,i=nn(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=nn(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new _C,i=nn(Lx(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);yC.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new _C;return yC.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new _C;return yC.ye.re(FE(this.databaseId,t),n.Be(function(e){var t=Lx(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new _C);var i,a=0,o=nn(Lx(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=nn(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&jE(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);yC.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=he(e),a=[],o=nn(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=nn(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new _C;f.seed(l.Oe()),yC.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof oI&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=DC(e),i=OC(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Hx.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Fx(t.sequenceNumber,new Vx(rC(t.readTime),new Rx(xT(t.documentKey)),t.largestBatchId)):Fx.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Mx(Px.fromServerFormat(n),r)}));return new Dx(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:xx(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=DC(e),a=OC(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Hx.forEach(t,(function(t){return a.put(lC(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Hx.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Hx.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Hx.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Hx.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return RC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return RC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=RC(e),i=new fE(EC);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new xC(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new fE(EC),r=this.on(t,e);if(null==r)return n;var i=Ox(t);if(null!=i){var a=e.data.field(i.fieldPath);if(jE(a)){var o,u=nn(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new xC(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new xC(t.indexId,e.key,NC,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;rx("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=dE(a),s=dE(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=dE(o)):l?(i(u),u=dE(a)):(u=dE(a),s=dE(o))}}(r,i,EC,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Hx.waitFor(o)}},{key:"ln",value:function(e){var t=1;return OC(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return EC(e,t)})).filter((function(e,t,n){return!t||0!==EC(e,n[t-1])}));var r=[];r.push(e);var i,a=nn(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=EC(o,e),s=EC(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,NC,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,NC,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(LC)}},{key:"getMinOffset",value:function(e,t){var n=this;return Hx.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||ux()}))})).next(LC)}}]),e}();function PC(e){return QT(e,"collectionParents")}function RC(e){return QT(e,"indexEntries")}function DC(e){return QT(e,"indexConfiguration")}function OC(e){return QT(e,"indexState")}function LC(e){sx(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;qx(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Vx(t.readTime,t.documentKey,n)}var MC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FC=function(){function e(t,n,r){pe(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ye(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function UC(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){sx(1===u)})));var c,l=[],f=nn(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ST(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Hx.waitFor(a).next((function(){return l}))}function jC(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ux();t=e.noDocument}return JSON.stringify(t).length}FC.DEFAULT_COLLECTION_PERCENTILE=10,FC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,FC.DEFAULT=new FC(41943040,FC.DEFAULT_COLLECTION_PERCENTILE,FC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),FC.DISABLED=new FC(-1,0,0);var VC=function(){function e(t,n,r,i){pe(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return ye(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return BC(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=zC(e),o=BC(e);return o.add({}).next((function(u){sx("number"==typeof u);var s,c=new ZT(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return oT(e.ne,t)})),i=n.mutations.map((function(t){return oT(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new fE((function(e,t){return xx(e.canonicalString(),t.canonicalString())})),d=nn(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ST(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,TT))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Hx.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return BC(e).get(t).next((function(e){return e?(sx(e.userId===n.userId),iC(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Hx.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return BC(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(sx(t.batchId>=r),a=iC(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return BC(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return BC(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return iC(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=IT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return zC(e).J({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=xT(l);if(c===n.userId&&t.path.isEqual(h))return BC(e).get(f).next((function(e){if(!e)throw ux();sx(e.userId===n.userId),a.push(iC(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new fE(xx),i=[];return t.forEach((function(t){var a=IT(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=zC(e).J({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=xT(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Hx.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=IT(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new fE(xx);return zC(e).J({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=xT(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(BC(e).get(t).next((function(e){if(null===e)throw ux();sx(e.userId===n.userId),r.push(iC(n.wt,e))})))})),Hx.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return UC(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Hx.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Hx.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return zC(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=xT(e[1]);i.push(a)}else r.done()})).next((function(){sx(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return qC(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return WC(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return sx(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function qC(e,t,n){var r=IT(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return zC(e).J({range:a,H:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function BC(e){return QT(e,"mutations")}function zC(e){return QT(e,"documentMutations")}function WC(e){return QT(e,"mutationQueues")}var KC=function(){function e(t){pe(this,e),this.En=t}return ye(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),HC=function(){function e(t,n){pe(this,e),this.referenceDelegate=t,this.wt=n}return ye(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new KC(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Tx.fromTimestamp(new Sx(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return GC(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return sx(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return GC(e).J((function(o,u){var s=aC(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Hx.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return GC(e).J((function(e,n){var r=aC(n);t(r)}))}},{key:"bn",value:function(e){return QC(e).get("targetGlobalKey").next((function(e){return sx(null!==e),e}))}},{key:"Pn",value:function(e,t){return QC(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return GC(e).put(oC(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=eI(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return GC(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=aC(n);tI(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=ZC(e);return t.forEach((function(t){var o=wT(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Hx.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=ZC(e);return Hx.forEach(t,(function(t){var a=wT(t.path);return Hx.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=ZC(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ZC(e),i=AS();return r.J({range:n,H:!0},(function(e,t,n){var r=xT(e[1]),a=new Rx(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=wT(t.path),r=IDBKeyRange.bound([n],[Ix(n)],!1,!0),i=0;return ZC(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return GC(e).get(t).next((function(e){return e?aC(e):null}))}}]),e}();function GC(e){return QT(e,"targets")}function QC(e){return QT(e,"targetGlobal")}function ZC(e){return QT(e,"targetDocuments")}function YC(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=xx(r,o);return 0===c?xx(i,u):c}var $C=function(){function e(t){pe(this,e),this.Sn=t,this.buffer=new fE(YC),this.Dn=0}return ye(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();YC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),JC=function(){function e(t,n,r){pe(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return ye(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;rx("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!$x(e.t0)){e.next=12;break}rx("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Wx(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),XC=function(){function e(t,n){pe(this,e),this.On=t,this.params=n}return ye(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Hx.resolve(iE.ot);var r=new $C(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(rx("LruGarbageCollector","Garbage collection skipped; disabled"),Hx.resolve(MC)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(rx("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),MC):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(rx("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),nx()<=or.DEBUG&&rx("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Hx.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),eN=function(){function e(t,n){pe(this,e),this.db=t,this.garbageCollector=function(e,t){return new XC(e,t)}(this,n)}return ye(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return tN(e,n)}},{key:"removeReference",value:function(e,t,n){return tN(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return tN(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return WC(e).Y((function(r){return qC(e,r,t).next((function(e){return e&&(n=!0),Hx.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Tx.min()),ZC(e).delete([0,wT(o.path)])}))}));i.push(s)}})).next((function(){return Hx.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return tN(e,t)}},{key:"Ln",value:function(e,t){var n,r=ZC(e),i=iE.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==iE.ot&&t(new Rx(xT(n)),i),i=c,n=u):i=iE.ot})).next((function(){i!==iE.ot&&t(new Rx(xT(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function tN(e,t){return ZC(e).put(function(e,t){return{targetId:0,path:wT(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var nN=function(){function e(){pe(this,e),this.changes=new kS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ye(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,$E.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Hx.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),rN=function(){function e(t){pe(this,e),this.wt=t}return ye(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return uN(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return uN(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],tC(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=$E.newInvalidDocument(t);return uN(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sN(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:$E.newInvalidDocument(t)};return uN(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sN(t))},(function(e,i){r={document:n.Kn(t,i),size:jC(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=bS();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=bS(),i=new sE(Rx.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,jC(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Hx.resolve();var r=new fE(lN);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(sN(r.first()),sN(r.last())),a=r.getIterator(),o=a.getNext();return uN(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Rx.fromSegments([].concat(he(t.prefixPath),[t.collectionGroup,t.documentId]));o&&lN(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(sN(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),tC(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uN(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=bS(),i=nn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(Rx.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=bS(),o=cN(t,n),u=cN(t,Vx.max());return uN(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(Rx.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new aN(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return oN(e).get("remoteDocumentGlobalKey").next((function(e){return sx(!!e),e}))}},{key:"qn",value:function(e,t){return oN(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=iT(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Rx.fromSegments(t.noDocument.path),i=rC(t.noDocument.readTime);n=$E.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ux();var a=Rx.fromSegments(t.unknownDocument.path),o=rC(t.unknownDocument.version);n=$E.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Sx(e[0],e[1]);return Tx.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Tx.min()))return n}return $E.newInvalidDocument(e)}}]),e}();function iN(e){return new rN(e)}var aN=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new kS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ye(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new fE((function(e,t){return xx(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=eC(t.zn.wt,o);i=i.add(a.path.popLast());var c=jC(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=eC(t.zn.wt,o.convertToNoDocument(Tx.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Hx.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(nN);function oN(e){return QT(e,"remoteDocumentGlobal")}function uN(e){return QT(e,"remoteDocumentsV14")}function sN(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cN(e,t){var n=t.documentKey.path.toArray();return[e,tC(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lN(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=xx(n[a],r[a]))return i;return(i=xx(n.length,r.length))||((i=xx(n[n.length-2],r[r.length-2]))||xx(n[n.length-1],r[r.length-1]))}var fN=ye((function e(t,n){pe(this,e),this.overlayedDocument=t,this.mutatedFields=n})),hN=function(){function e(t,n,r,i){pe(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ye(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&iS(r.mutation,e,pE.empty(),Sx.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,AS()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AS(),i=IS();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=xS();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=IS();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,AS())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=bS(),a=TS(),o=TS();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof sS)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),iS(o.mutation,t,o.mutation.getFieldMask(),Sx.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new fN(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=TS(),i=new sE((function(e,t){return e-t})),a=AS();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=nn(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||pE.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||AS()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=SS();c.forEach((function(e){if(!a.has(e)){var n=nS(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Hx.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Rx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):II(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Hx.resolve(IS()),u=-1,s=a;return o.next((function(t){return Hx.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Hx.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,AS())})).next((function(e){return{batchId:u,changes:ES(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Rx(t)).next((function(e){var t=xS();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=xS();return this.indexManager.getCollectionParents(e,i).next((function(o){return Hx.forEach(o,(function(o){var u=function(e,t){return new wI(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,$E.newInvalidDocument(n)))}));var n=xS();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&iS(a.mutation,i,pE.empty(),Sx.now()),RI(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Hx.resolve($E.newInvalidDocument(t))}}]),e}(),dN=function(){function e(t){pe(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return ye(e,[{key:"getBundleMetadata",value:function(e,t){return Hx.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:QS(n.createTime)}),Hx.resolve()}},{key:"getNamedQuery",value:function(e,t){return Hx.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:uC(e.bundledQuery),readTime:QS(e.readTime)}}(t)),Hx.resolve()}}]),e}(),pN=function(){function e(){pe(this,e),this.overlays=new sE(Rx.comparator),this.Xn=new Map}return ye(e,[{key:"getOverlay",value:function(e,t){return Hx.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=IS();return Hx.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Hx.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Hx.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=IS(),i=t.length+1,a=new Rx(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Hx.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new sE((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=IS(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=IS(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Hx.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new $T(t,n));var a=this.Xn.get(t);void 0===a&&(a=AS(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),vN=function(){function e(){pe(this,e),this.Zn=new fE(yN.ts),this.es=new fE(yN.ns)}return ye(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new yN(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new yN(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Rx(new Nx([])),r=new yN(n,e),i=new yN(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Rx(new Nx([])),n=new yN(t,e),r=new yN(t,e+1),i=AS();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new yN(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),yN=function(){function e(t,n){pe(this,e),this.key=t,this.ls=n}return ye(e,null,[{key:"ts",value:function(e,t){return Rx.comparator(e.key,t.key)||xx(e.ls,t.ls)}},{key:"ns",value:function(e,t){return xx(e.ls,t.ls)||Rx.comparator(e.key,t.key)}}]),e}(),mN=function(){function e(t,n){pe(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new fE(yN.ts)}return ye(e,[{key:"checkEmpty",value:function(e){return Hx.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ZT(i,t,n,r);this.mutationQueue.push(a);var o,u=nn(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new yN(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Hx.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Hx.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Hx.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Hx.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Hx.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new yN(t,0),i=new yN(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Hx.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new fE(xx);return t.forEach((function(e){var t=new yN(e,0),i=new yN(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Hx.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Rx.isDocumentKey(i)||(i=i.child(""));var a=new yN(new Rx(i),0),o=new fE(xx);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Hx.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;sx(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Hx.forEach(t.mutations,(function(i){var a=new yN(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new yN(t,0),r=this.ds.firstAfterOrEqual(n);return Hx.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Hx.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),gN=function(){function e(t){pe(this,e),this.ps=t,this.docs=new sE(Rx.comparator),this.size=0}return ye(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Hx.resolve(n?n.document.mutableCopy():$E.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=bS();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():$E.newInvalidDocument(e))})),Hx.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=bS(),i=new Rx(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||qx(jx(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Hx.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ux()}},{key:"Is",value:function(e,t){return Hx.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new kN(this)}},{key:"getSize",value:function(e){return Hx.resolve(this.size)}}]),e}(),kN=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this)).zn=e,r}return ye(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Hx.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(nN),wN=function(){function e(t){pe(this,e),this.persistence=t,this.Ts=new kS((function(e){return eI(e)}),tI),this.lastRemoteSnapshotVersion=Tx.min(),this.highestTargetId=0,this.Es=0,this.As=new vN,this.targetCount=0,this.Rs=KC.An()}return ye(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Hx.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Hx.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Hx.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Hx.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Hx.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new KC(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Hx.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Hx.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Hx.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Hx.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Hx.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Hx.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Hx.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Hx.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Hx.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Hx.resolve(n)}},{key:"containsKey",value:function(e,t){return Hx.resolve(this.As.containsKey(t))}}]),e}(),bN=function(){function e(t,n){var r=this;pe(this,e),this.bs={},this.overlays={},this.Ps=new iE(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new wN(this),this.indexManager=new TC,this.remoteDocumentCache=new gN((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new XT(n),this.Ds=new dN(this.wt)}return ye(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new pN,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new mN(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;rx("MemoryPersistence","Starting transaction:",e);var i=new _N(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Hx.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),_N=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ye(n)}(zx),xN=function(){function e(t){pe(this,e),this.persistence=t,this.ks=new vN,this.Os=null}return ye(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw ux()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Hx.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Hx.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Hx.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hx.forEach(this.Fs,(function(r){var i=Rx.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Tx.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Hx.or([function(){return Hx.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),EN=function(){function e(t){pe(this,e),this.wt=t}return ye(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Gx("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ET,{unique:!0}),e.createObjectStore("documentMutations")}(e),IN(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Hx.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),IN(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tx.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ET,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Hx.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:jT});t.createIndex("collectionPathOverlayIndex",VT,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",qT,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:CT});t.createIndex("documentKeyIndex",NT),t.createIndex("collectionGroupIndex",AT)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:LT}).createIndex("sequenceNumberIndex",MT,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:FT}).createIndex("documentKeyIndex",UT,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=jC(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Hx.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Hx.forEach(r,(function(r){sx(r.userId===n.userId);var i=iC(t.wt,r);return UC(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new Nx(n),o=function(e){return[0,wT(e)]}(a);r.push(t.get(o).next((function(n){return n?Hx.resolve():function(n){return t.put({targetId:0,path:wT(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Hx.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:OT});var n=t.store("collectionParents"),r=new CC,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:wT(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new Nx(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],xT(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=aC(r),a=oC(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Rx(Nx.fromString(i.document.name).popFirst(5)):i.noDocument?Rx.fromSegments(i.noDocument.path):i.unknownDocument?Rx.fromSegments(i.unknownDocument.path):ux()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Hx.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=iN(this.wt),a=new bN(xN.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:AS();iC(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Hx.forEach(r,(function(e,r){var o=new X_(r),u=pC.se(n.wt,o),s=a.getIndexManager(o),c=VC.se(o,n.wt,s,a.referenceDelegate);return new hN(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new GT(t,iE.ot),e).next()}))}))}}]),e}();function IN(e){e.createObjectStore("targetDocuments",{keyPath:RT}).createIndex("documentTargetsIndex",DT,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PT,{unique:!0}),e.createObjectStore("targetGlobal")}var SN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",TN=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(pe(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new fx(lx.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eN(this,i),this.ei=n+"main",this.wt=new XT(s),this.ni=new Qx(this.ei,this.Hs,new EN(this.wt)),this.Vs=new HC(this.referenceDelegate,this.wt),this.remoteDocumentCache=iN(this.wt),this.Ds=new fC,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&ix("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ye(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new fx(lx.FAILED_PRECONDITION,SN);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new iE(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=tr(Xn().mark((function n(r){return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=tr(Xn().mark((function t(n){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return NN(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if($x(t))return rx("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return rx("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return CN(e).get("owner").next((function(e){return Hx.resolve(t.di(e))}))}},{key:"_i",value:function(e){return NN(e).delete(this.clientId)}},{key:"wi",value:function(){var e=tr(Xn().mark((function e(){var t,n,r,i,a=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=QT(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Hx.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=nn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Hx.resolve(!0):CN(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new fx(lx.FAILED_PRECONDITION,SN);return!1}}return!(!t.networkEnabled||!t.inForeground)||NN(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&rx("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=tr(Xn().mark((function e(){var t=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new GT(e,iE.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return NN(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return VC.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new AC(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return pC.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;rx("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?HT:14===i?KT:13===i?WT:12===i?zT:11===i?BT:void ux();return this.ni.runTransaction(e,o,u,(function(i){return a=new GT(i,r.Ps?r.Ps.next():iE.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw ix("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new fx(lx.FAILED_PRECONDITION,Bx);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return CN(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new fx(lx.FAILED_PRECONDITION,SN)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return CN(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=CN(e);return n.get("owner").next((function(e){return t.di(e)?(rx("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Hx.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ix("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!bn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return rx("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ix("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(Xg){ix("Failed to set zombie client id.",Xg)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(Xg){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Qx.V()}}]),e}();function CN(e){return QT(e,"owner")}function NN(e){return QT(e,"clientMetadata")}function AN(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var PN=function(){function e(t,n,r,i){pe(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return ye(e,null,[{key:"Vi",value:function(t,n){var r,i=AS(),a=AS(),o=nn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),RN=function(){function e(){pe(this,e),this.Si=!1}return ye(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return Hx.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Tx.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(nx()<=or.DEBUG&&rx("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),PI(t)),i.Mi(e,o,t,Ux(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new fE(OI(e));return t.forEach((function(t,r){RI(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return nx()<=or.DEBUG&&rx("QueryEngine","Using full collection scan to execute query:",PI(t)),this.Di.getDocumentsMatchingQuery(e,t,Vx.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),DN=function(){function e(t,n,r,i){pe(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new sE(xx),this.Bi=new kS((function(e){return eI(e)}),tI),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return ye(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hN(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function ON(e,t,n,r){return new DN(e,t,n,r)}function LN(e,t){return MN.apply(this,arguments)}function MN(){return MN=tr(Xn().mark((function e(t,n){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cx(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=AS(),s=nn(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=nn(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=nn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=nn(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),MN.apply(this,arguments)}function FN(e,t){var n=cx(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Hx.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);sx(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=AS(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function UN(e){var t=cx(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function jN(e,t){var n=cx(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(vE.EMPTY_BYTE_STRING,Tx.min()).withLastLimboFreeSnapshotVersion(Tx.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=bS(),s=AS();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(VN(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Tx.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Hx.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function VN(e,t,n){var r=AS(),i=AS();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=bS();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Tx.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):rx("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function qN(e,t){var n=cx(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function BN(e,t){var n=cx(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Hx.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new JT(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function zN(e,t,n){return WN.apply(this,arguments)}function WN(){return WN=tr(Xn().mark((function e(t,n,r){var i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cx(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),$x(e.t1)){e.next=12;break}throw e.t1;case 12:rx("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),WN.apply(this,arguments)}function KN(e,t,n){var r=cx(e),i=Tx.min(),a=AS();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=cx(e),i=r.Bi.get(n);return void 0!==i?Hx.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,TI(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Tx.min(),n?a:AS())})).next((function(e){return QN(r,DI(t),e),{documents:e,ji:a}}))}))}function HN(e,t){var n=cx(e),r=cx(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function GN(e,t){var n=cx(e),r=n.Li.get(t)||Tx.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,Ux(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return QN(n,t,e),e}))}function QN(e,t,n){var r=Tx.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function ZN(e,t,n,r){return YN.apply(this,arguments)}function YN(){return YN=tr(Xn().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=cx(t),o=AS(),u=bS(),s=nn(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,BN(a,function(e){return TI(_I(Nx.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return VN(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),YN.apply(this,arguments)}function $N(e,t){return JN.apply(this,arguments)}function JN(){return JN=tr(Xn().mark((function e(t,n){var r,i,a,o=arguments;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:AS(),e.next=3,BN(t,TI(uC(n.bundledQuery)));case 3:return i=e.sent,a=cx(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=QS(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(vE.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),JN.apply(this,arguments)}function XN(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function eA(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function tA(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var nA=function(){function e(t,n,r,i){pe(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ye(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new fx(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ix("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),rA=function(){function e(t,n,r){pe(this,e),this.targetId=t,this.state=n,this.error=r}return ye(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fx(i.error.code,i.error.message))),a?new e(t,i.state,r):(ix("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),iA=function(){function e(t,n){pe(this,e),this.clientId=t,this.activeTargetIds=n}return ye(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=RS(),o=0;i&&o<r.activeTargetIds.length;++o)i=TE(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ix("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),aA=function(){function e(t,n){pe(this,e),this.clientId=t,this.onlineState=n}return ye(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ix("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),oA=function(){function e(){pe(this,e),this.activeTargetIds=RS()}return ye(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),uA=function(){function e(t,n,r,i,a){pe(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new sE(xx),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=XN(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new oA),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ye(e,[{key:"start",value:function(){var e=tr(Xn().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=nn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(XN(this.persistenceKey,i)))&&(o=iA.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=nn(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(tA(this.persistenceKey,e));if(n){var r=rA.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(tA(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return rx("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){rx("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){rx("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(rx("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void ix("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(tr(Xn().mark((function e(){var r,i,a,o,u,s,c;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=iE.ot;if(null!=e)try{var n=JSON.parse(e);sx("number"==typeof n),t=n}catch(e){ix("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==iE.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new nA(this.currentUser,e,t,n),i=eA(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=eA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=tA(this.persistenceKey,e),i=new rA(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return iA.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return nA.Ji(new X_(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return rA.Ji(r,t)}},{key:"wr",value:function(e){return aA.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:rx("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=RS();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),sA=function(){function e(){pe(this,e),this.Fr=new oA,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ye(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new oA,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),cA=function(){function e(){pe(this,e)}return ye(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),lA=function(){function e(){var t=this;pe(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return ye(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){rx("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=nn(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){rx("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=nn(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),fA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},hA=function(){function e(t){pe(this,e),this.jr=t.jr,this.Wr=t.Wr}return ye(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),dA=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ye(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new $_;o.listenOnce(H_.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case K_.NO_ERROR:var t=o.getResponseJson();rx("Connection","XHR received:",JSON.stringify(t)),i(t);break;case K_.TIMEOUT:rx("Connection",'RPC "'+e+'" timed out'),a(new fx(lx.DEADLINE_EXCEEDED,"Request time out"));break;case K_.HTTP_ERROR:var n=o.getStatus();if(rx("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(lx).indexOf(t)>=0?t:lx.UNKNOWN}(r.status);a(new fx(u,r.message))}else a(new fx(lx.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new fx(lx.UNAVAILABLE,"Connection failed."));break;default:ux()}}finally{rx("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=z_(),a=W_(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Z_({})),this.uo(o.initMessageHeaders,t,n),wn()||xn()||kn().indexOf("Electron/")>=0||En()||kn().indexOf("MSAppHost/")>=0||_n()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");rx("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new hA({jr:function(e){l?rx("Connection","Not sending because WebChannel is closed:",e):(c||(rx("Connection","Opening WebChannel transport."),s.open(),c=!0),rx("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Y_.EventType.OPEN,(function(){l||rx("Connection","WebChannel transport opened.")})),h(s,Y_.EventType.CLOSE,(function(){l||(l=!0,rx("Connection","WebChannel transport closed"),f.eo())})),h(s,Y_.EventType.ERROR,(function(e){l||(l=!0,ax("Connection","WebChannel transport errored:",e),f.eo(new fx(lx.UNAVAILABLE,"The operation could not be completed")))})),h(s,Y_.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];sx(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){rx("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=hS[e];if(void 0!==t)return gS(t)}(a),u=i.message;void 0===o&&(o=lx.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new fx(o,u)),s.close()}else rx("Connection","WebChannel received:",n),f.no(n)}})),h(a,G_.STAT_EVENT,(function(e){e.stat===Q_.PROXY?rx("Connection","Detected buffering proxy"):e.stat===Q_.NOPROXY&&rx("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){pe(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ye(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);rx("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return rx("RestConnection","Received: ",e),e}),(function(t){throw ax("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ex,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=fA[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function pA(){return"undefined"!=typeof window?window:null}function vA(){return"undefined"!=typeof document?document:null}function yA(e){return new WS(e,!0)}var mA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;pe(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ye(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&rx("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),gA=function(){function e(t,n,r,i,a,o,u,s){pe(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new mA(t,n)}return ye(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===lx.RESOURCE_EXHAUSTED?(ix(n.toString()),ix("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===lx.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new fx(lx.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(tr(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return rx("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(rx("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),kA=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a,o,u){var s;return pe(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return ye(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ux()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(sx(void 0===t||"string"==typeof t),vE.fromBase64String(t||"")):(sx(void 0===t||t instanceof Uint8Array),vE.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?lx.UNKNOWN:gS(e.code);return new fx(t,e.message||"")}(o);n=new FS(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=JS(e,s.document.name),l=QS(s.document.updateTime),f=new ZE({mapValue:{fields:s.document.fields}}),h=$E.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new LS(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=JS(e,v.document),m=v.readTime?QS(v.readTime):Tx.min(),g=$E.newNoDocument(y,m),k=v.removedTargetIds||[];n=new LS([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=JS(e,w.document),_=w.removedTargetIds||[];n=new LS([],_,b,null)}else{if(!("filter"in t))return ux();t.filter;var x=t.filter;x.targetId;var E=x.count||0,I=new yS(E),S=x.targetId;n=new MS(S,I)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Tx.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Tx.min():t.readTime?QS(t.readTime):Tx.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=tT(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=nI(r)?{documents:sT(e,r)}:{query:cT(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=HS(e,t.resumeToken):t.snapshotVersion.compareTo(Tx.min())>0&&(n.readTime=KS(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ux()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=tT(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(gA),wA=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a,o,u){var s;return pe(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return ye(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Re(Ae(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(sx(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(sx(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?QS(e.updateTime):QS(t);return n.isEqual(Tx.min())&&(n=QS(t)),new JI(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=QS(e.commitTime);return this.listener.Jo(n,t)}return sx(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=tT(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return oT(t.wt,e)}))};this.Mo(n)}}]),n}(gA),bA=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a){var o;return pe(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return ye(n,[{key:"tu",value:function(){if(this.Zo)throw new fx(lx.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lx.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fx(lx.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.bo.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lx.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fx(lx.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ye((function e(){pe(this,e)}))}()),_A=function(){function e(t,n){pe(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ye(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(ix(t),this.su=!1):rx("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),xA=ye((function e(t,n,r,i,a){var o=this;pe(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=OA(o),!e.t0){e.next=5;break}return rx("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cx(t)).lu.add(4),e.next=4,SA(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,EA(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new _A(r,i)}));function EA(e){return IA.apply(this,arguments)}function IA(){return IA=tr(Xn().mark((function e(t){var n,r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!OA(t)){e.next=18;break}n=nn(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),IA.apply(this,arguments)}function SA(e){return TA.apply(this,arguments)}function TA(){return TA=tr(Xn().mark((function e(t){var n,r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nn(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),TA.apply(this,arguments)}function CA(e,t){var n=cx(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),DA(n)?RA(n):cP(n).Co()&&AA(n,t))}function NA(e,t){var n=cx(e),r=cP(n);n.hu.delete(t),r.Co()&&PA(n,t),0===n.hu.size&&(r.Co()?r.ko():OA(n)&&n._u.set("Unknown"))}function AA(e,t){e.wu.Nt(t.targetId),cP(e).Qo(t)}function PA(e,t){e.wu.Nt(t),cP(e).jo(t)}function RA(e){e.wu=new jS({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),cP(e).start(),e._u.iu()}function DA(e){return OA(e)&&!cP(e).Do()&&e.hu.size>0}function OA(e){return 0===cx(e).lu.size}function LA(e){e.wu=void 0}function MA(e){return FA.apply(this,arguments)}function FA(){return FA=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){AA(t,e)}));case 1:case"end":return e.stop()}}),e)}))),FA.apply(this,arguments)}function UA(e,t){return jA.apply(this,arguments)}function jA(){return jA=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:LA(t),DA(t)?(t._u.uu(n),RA(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),jA.apply(this,arguments)}function VA(e,t,n){return qA.apply(this,arguments)}function qA(){return qA=tr(Xn().mark((function e(t,n,r){var i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof FS&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=tr(Xn().mark((function e(t,n){var r,i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=nn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),rx("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,BA(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof LS?t.wu.Ut(n):n instanceof MS?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Tx.min())){e.next=29;break}return e.prev=14,e.next=17,UN(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(vE.EMPTY_BYTE_STRING,n.snapshotVersion)),PA(e,t);var r=new JT(n.target,t,1,n.sequenceNumber);AA(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),rx("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,BA(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),qA.apply(this,arguments)}function BA(e,t,n){return zA.apply(this,arguments)}function zA(){return zA=tr(Xn().mark((function e(t,n,r){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($x(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,SA(t);case 5:t._u.set("Offline"),r||(r=function(){return UN(t.localStore)}),t.asyncQueue.enqueueRetryable(tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rx("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,EA(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),zA.apply(this,arguments)}function WA(e,t){return t().catch((function(n){return BA(e,n,t)}))}function KA(e){return HA.apply(this,arguments)}function HA(){return HA=tr(Xn().mark((function e(t){var n,r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=cx(t),r=lP(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!GA(n)){e.next=19;break}return e.prev=3,e.next=6,qN(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,QA(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,BA(n,e.t0);case 17:e.next=2;break;case 19:ZA(n)&&YA(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),HA.apply(this,arguments)}function GA(e){return OA(e)&&e.au.length<10}function QA(e,t){e.au.push(t);var n=lP(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function ZA(e){return OA(e)&&!lP(e).Do()&&e.au.length>0}function YA(e){lP(e).start()}function $A(e){return JA.apply(this,arguments)}function JA(){return JA=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lP(t).Xo();case 1:case"end":return e.stop()}}),e)}))),JA.apply(this,arguments)}function XA(e){return eP.apply(this,arguments)}function eP(){return eP=tr(Xn().mark((function e(t){var n,r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=lP(t),r=nn(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),eP.apply(this,arguments)}function tP(e,t,n){return nP.apply(this,arguments)}function nP(){return nP=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=YT.from(i,n,r),e.next=3,WA(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,KA(t);case 5:case"end":return e.stop()}}),e)}))),nP.apply(this,arguments)}function rP(e,t){return iP.apply(this,arguments)}function iP(){return iP=tr(Xn().mark((function e(t,n){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&lP(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=tr(Xn().mark((function e(t,n){var r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mS(i=n.code)||i===lx.ABORTED){e.next=7;break}return r=t.au.shift(),lP(t).No(),e.next=5,WA(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,KA(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:ZA(t)&&YA(t);case 5:case"end":return e.stop()}}),e)}))),iP.apply(this,arguments)}function aP(e,t){return oP.apply(this,arguments)}function oP(){return oP=tr(Xn().mark((function e(t,n){var r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=cx(t)).asyncQueue.verifyOperationInProgress(),rx("RemoteStore","RemoteStore received new credentials"),i=OA(r),r.lu.add(3),e.next=6,SA(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,EA(r);case 12:case"end":return e.stop()}}),e)}))),oP.apply(this,arguments)}function uP(e,t){return sP.apply(this,arguments)}function sP(){return sP=tr(Xn().mark((function e(t,n){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cx(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,EA(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,SA(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),sP.apply(this,arguments)}function cP(e){return e.mu||(e.mu=function(e,t,n){var r=cx(e);return r.tu(),new kA(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:MA.bind(null,e),Jr:UA.bind(null,e),Go:VA.bind(null,e)}),e.fu.push(function(){var t=tr(Xn().mark((function t(n){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),DA(e)?RA(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:LA(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function lP(e){return e.gu||(e.gu=function(e,t,n){var r=cx(e);return r.tu(),new wA(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:$A.bind(null,e),Jr:rP.bind(null,e),Yo:XA.bind(null,e),Jo:tP.bind(null,e)}),e.fu.push(function(){var t=tr(Xn().mark((function t(n){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,KA(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(rx("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var fP=function(){function e(t,n,r,i,a){pe(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hx,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ye(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fx(lx.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function hP(e,t){if(ix("AsyncQueue","".concat(t,": ").concat(e)),$x(e))return new fx(lx.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var dP=function(){function e(t){pe(this,e),this.comparator=t?function(e,n){return t(e,n)||Rx.comparator(e.key,n.key)}:function(e,t){return Rx.comparator(e.key,t.key)},this.keyedMap=xS(),this.sortedSet=new sE(this.comparator)}return ye(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),pP=function(){function e(){pe(this,e),this.yu=new sE(Rx.comparator)}return ye(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ux():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),vP=function(){function e(t,n,r,i,a,o,u,s){pe(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ye(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&NI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,dP.emptySet(n),a,r,i,!0,!1)}}]),e}(),yP=ye((function e(){pe(this,e),this.Iu=void 0,this.listeners=[]})),mP=ye((function e(){pe(this,e),this.queries=new kS((function(e){return AI(e)}),NI),this.onlineState="Unknown",this.Tu=new Set}));function gP(e,t){return kP.apply(this,arguments)}function kP(){return kP=tr(Xn().mark((function e(t,n){var r,i,a,o,u;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cx(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new yP),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=hP(e.t0,"Initialization of query '".concat(PI(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&EP(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),kP.apply(this,arguments)}function wP(e,t){return bP.apply(this,arguments)}function bP(){return bP=tr(Xn().mark((function e(t,n){var r,i,a,o,u;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cx(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),bP.apply(this,arguments)}function _P(e,t){var n,r=cx(e),i=!1,a=nn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=nn(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&EP(r)}function xP(e,t,n){var r=cx(e),i=r.queries.get(t);if(i){var a,o=nn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function EP(e){e.Tu.forEach((function(e){e.next()}))}var IP=function(){function e(t,n,r){pe(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ye(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=nn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new vP(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=vP.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),SP=function(){function e(t,n){pe(this,e),this.payload=t,this.byteLength=n}return ye(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),TP=function(){function e(t){pe(this,e),this.wt=t}return ye(e,[{key:"Wi",value:function(e){return JS(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?iT(this.wt,e.document,!1):$E.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return QS(e)}}]),e}(),CP=function(){function e(t,n,r){pe(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NP(t)}return ye(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Nx.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new TP(this.wt),i=nn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=nn(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||AS()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=tr(Xn().mark((function e(){var t,n,r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZN(this.localStore,new TP(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=nn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,$N(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function NP(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var AP=ye((function e(t){pe(this,e),this.key=t})),PP=ye((function e(t){pe(this,e),this.key=t})),RP=function(){function e(t,n){pe(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=AS(),this.mutatedKeys=AS(),this.Lu=OI(t),this.Uu=new dP(this.Lu)}return ye(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new pP,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=RI(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ux()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new vP(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new pP,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=AS(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new PP(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new AP(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=AS();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return vP.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),DP=ye((function e(t,n,r){pe(this,e),this.query=t,this.targetId=n,this.view=r})),OP=ye((function e(t){pe(this,e),this.key=t,this.Xu=!1})),LP=function(){function e(t,n,r,i,a,o){pe(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new kS((function(e){return AI(e)}),NI),this.ec=new Map,this.nc=new Set,this.sc=new sE(Rx.comparator),this.ic=new Map,this.rc=new vN,this.oc={},this.uc=new Map,this.cc=KC.Rn(),this.onlineState="Unknown",this.ac=void 0}return ye(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function MP(e,t){return FP.apply(this,arguments)}function FP(){return FP=tr(Xn().mark((function e(t,n){var r,i,a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=NR(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,BN(r.localStore,TI(n));case 8:return u=e.sent,r.isPrimaryClient&&CA(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,UP(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),FP.apply(this,arguments)}function UP(e,t,n,r){return jP.apply(this,arguments)}function jP(){return jP=tr(Xn().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=tr(Xn().mark((function e(t,n,r,i){var a,o,u;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,KN(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(aR(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,KN(t.localStore,n,!0);case 3:return a=e.sent,o=new RP(n,a.ji),u=o.Ku(a.documents),s=OS.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),aR(t,r,c.zu),l=new DP(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),jP.apply(this,arguments)}function VP(e,t){return qP.apply(this,arguments)}function qP(){return qP=tr(Xn().mark((function e(t,n){var r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cx(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!NI(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,zN(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),NA(r.remoteStore,i.targetId),rR(r,i.targetId)})).catch(Wx);case 9:e.next=14;break;case 11:return rR(r,i.targetId),e.next=14,zN(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),qP.apply(this,arguments)}function BP(e,t,n){return zP.apply(this,arguments)}function zP(){return zP=tr(Xn().mark((function e(t,n,r){var i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=AR(t),e.prev=1,e.next=4,function(e,t){var n,r,i=cx(e),a=Sx.now(),o=t.reduce((function(e,t){return e.add(t.key)}),AS());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=bS(),s=AS();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=nn(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=aS(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new sS(c.key,l,YE(l.value.mapValue),XI.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:ES(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new sE(xx)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,sR(i,a.changes);case 9:return e.next=11,KA(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=hP(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),zP.apply(this,arguments)}function WP(e,t){return KP.apply(this,arguments)}function KP(){return KP=tr(Xn().mark((function e(t,n){var r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cx(t),e.prev=1,e.next=4,jN(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(sx(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?sx(n.Xu):e.removedDocuments.size>0&&(sx(n.Xu),n.Xu=!1))})),e.next=8,sR(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Wx(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),KP.apply(this,arguments)}function HP(e,t,n){var r=cx(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=cx(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=nn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&EP(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function GP(e,t,n){return QP.apply(this,arguments)}function QP(){return QP=tr(Xn().mark((function e(t,n,r){var i,a,o,u,s,c;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=cx(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new sE(Rx.comparator)).insert(o,$E.newNoDocument(o,Tx.min())),s=AS().add(o),c=new DS(Tx.min(),new Map,new fE(xx),u,s),e.next=9,WP(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),uR(i),e.next=16;break;case 14:return e.next=16,zN(i.localStore,n,!1).then((function(){return rR(i,n,r)})).catch(Wx);case 16:case"end":return e.stop()}}),e)}))),QP.apply(this,arguments)}function ZP(e,t){return YP.apply(this,arguments)}function YP(){return YP=tr(Xn().mark((function e(t,n){var r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cx(t),i=n.batch.batchId,e.prev=1,e.next=4,FN(r.localStore,n);case 4:return a=e.sent,nR(r,i,null),tR(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,sR(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Wx(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),YP.apply(this,arguments)}function $P(e,t,n){return JP.apply(this,arguments)}function JP(){return JP=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cx(t),e.prev=1,e.next=4,function(e,t){var n=cx(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return sx(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,nR(i,n,r),tR(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,sR(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Wx(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),JP.apply(this,arguments)}function XP(e,t){return eR.apply(this,arguments)}function eR(){return eR=tr(Xn().mark((function e(t,n){var r,i,a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return OA((r=cx(t)).remoteStore)||rx("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=cx(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=hP(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),eR.apply(this,arguments)}function tR(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function nR(e,t,n){var r=cx(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function rR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=nn(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||iR(e,t)}))}function iR(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(NA(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),uR(e))}function aR(e,t,n){var r,i=nn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof AP?(e.rc.addReference(a.key,t),oR(e,a)):a instanceof PP?(rx("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||iR(e,a.key)):ux()}}catch(o){i.e(o)}finally{i.f()}}function oR(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(rx("SyncEngine","New document in limbo: "+n),e.nc.add(r),uR(e))}function uR(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Rx(Nx.fromString(t)),r=e.cc.next();e.ic.set(r,new OP(n)),e.sc=e.sc.insert(n,r),CA(e.remoteStore,new JT(TI(_I(n.path)),r,2,iE.ot))}}function sR(e,t,n){return cR.apply(this,arguments)}function cR(){return cR=tr(Xn().mark((function e(t,n,r){var i,a,o,u;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cx(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=PN.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=tr(Xn().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cx(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Hx.forEach(n,(function(t){return Hx.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Hx.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),$x(e.t0)){e.next=10;break}throw e.t0;case 10:rx("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=nn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),cR.apply(this,arguments)}function lR(e,t){return fR.apply(this,arguments)}function fR(){return fR=tr(Xn().mark((function e(t,n){var r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=cx(t)).currentUser.isEqual(n)){e.next=11;break}return rx("SyncEngine","User change. New user:",n.toKey()),e.next=5,LN(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new fx(lx.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,sR(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),fR.apply(this,arguments)}function hR(e,t){var n=cx(e),r=n.ic.get(t);if(r&&r.Xu)return AS().add(r.key);var i=AS(),a=n.ec.get(t);if(!a)return i;var o,u=nn(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function dR(e,t){return pR.apply(this,arguments)}function pR(){return pR=tr(Xn().mark((function e(t,n){var r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cx(t),e.next=3,KN(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&aR(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),pR.apply(this,arguments)}function vR(e,t){return yR.apply(this,arguments)}function yR(){return yR=tr(Xn().mark((function e(t,n){var r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cx(t),e.abrupt("return",GN(r.localStore,n).then((function(e){return sR(r,e)})));case 2:case"end":return e.stop()}}),e)}))),yR.apply(this,arguments)}function mR(e,t,n,r){return gR.apply(this,arguments)}function gR(){return gR=tr(Xn().mark((function e(t,n,r,i){var a,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cx(t),e.next=3,function(e,t){var n=cx(e),r=cx(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Hx.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,KA(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(nR(a,n,i||null),tR(a,n),function(e,t){cx(cx(e).mutationQueue).In(t)}(a.localStore,n)):ux();case 11:return e.next=13,sR(a,o);case 13:e.next=16;break;case 15:rx("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),gR.apply(this,arguments)}function kR(e,t){return wR.apply(this,arguments)}function wR(){return wR=tr(Xn().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(NR(r=cx(t)),AR(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,bR(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,uP(r.remoteStore,!0);case 9:o=nn(a);try{for(o.s();!(u=o.n()).done;)s=u.value,CA(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return rR(r,t),zN(r.localStore,t,!0)})),NA(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,bR(r,c);case 21:return function(e){var t=cx(e);t.ic.forEach((function(e,n){NA(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new sE(Rx.comparator)}(r),r.ac=!1,e.next=25,uP(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),wR.apply(this,arguments)}function bR(e,t,n){return _R.apply(this,arguments)}function _R(){return _R=tr(Xn().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=cx(t),a=[],o=[],u=nn(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,BN(i.localStore,TI(f[0]));case 11:l=e.sent,h=nn(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,dR(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,HN(i.localStore,c);case 36:return m=e.sent,e.next=39,BN(i.localStore,m);case 39:return l=e.sent,e.next=42,UP(i,xR(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),_R.apply(this,arguments)}function xR(e){return bI(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ER(e){var t=cx(e);return cx(cx(t.localStore).persistence).Ri()}function IR(e,t,n,r){return SR.apply(this,arguments)}function SR(){return SR=tr(Xn().mark((function e(t,n,r,i){var a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=cx(t)).ac){e.next=3;break}return e.abrupt("return",void rx("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,GN(a.localStore,DI(o[0]));case 10:return u=e.sent,s=DS.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,sR(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,zN(a.localStore,n,!0);case 17:return rR(a,n,i),e.abrupt("break",20);case 19:ux();case 20:case"end":return e.stop()}}),e)}))),SR.apply(this,arguments)}function TR(e,t,n){return CR.apply(this,arguments)}function CR(){return CR=tr(Xn().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=NR(t)).ac){e.next=45;break}a=nn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return rx("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,HN(i.localStore,u);case 12:return s=e.sent,e.next=15,BN(i.localStore,s);case 15:return c=e.sent,e.next=18,UP(i,xR(s),c.targetId,!1);case 18:CA(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=nn(r),e.prev=30,h=Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,zN(i.localStore,t,!1).then((function(){NA(i.remoteStore,t),rR(i,t)})).catch(Wx);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),CR.apply(this,arguments)}function NR(e){var t=cx(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=WP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GP.bind(null,t),t.Zu.Go=_P.bind(null,t.eventManager),t.Zu.lc=xP.bind(null,t.eventManager),t}function AR(e){var t=cx(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ZP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$P.bind(null,t),t}function PR(e,t,n){var r=cx(e);(function(){var e=tr(Xn().mark((function e(t,n,r){var i,a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=cx(e),r=QS(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(NP(i)),a=new CP(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,sR(t,s.Mu,void 0);case 31:return e.next=33,function(e,t){var n=cx(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ax("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var RR=function(){function e(){pe(this,e),this.synchronizeTabs=!1}return ye(e,[{key:"initialize",value:function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=yA(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return ON(this.persistence,new RN,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new bN(xN.Ms,this.wt)}},{key:"dc",value:function(e){return new sA}},{key:"terminate",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),DR=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ye(n,[{key:"initialize",value:function(){var e=tr(Xn().mark((function e(t){var r=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(Ae(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,AR(this.yc.syncEngine);case 6:return e.next=8,KA(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return ON(this.persistence,new RN,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new JC(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new rE(t,this.persistence);return new nE(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=AN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?FC.withCacheSize(this.cacheSizeBytes):FC.DEFAULT;return new TN(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,pA(),vA(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new sA}}]),n}(RR),OR=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ye(n,[{key:"initialize",value:function(){var e=tr(Xn().mark((function e(t){var r,i=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(Ae(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof uA,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:mR.bind(null,r),Or:IR.bind(null,r),Mr:TR.bind(null,r),Ri:ER.bind(null,r),Nr:vR.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kR(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=pA();if(!uA.V(t))throw new fx(lx.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=AN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uA(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(DR),LR=function(){function e(){pe(this,e)}return ye(e,[{key:"initialize",value:function(){var e=tr(Xn().mark((function e(t,n){var r=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return HP(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=lR.bind(null,this.syncEngine),e.next=12,uP(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new mP}},{key:"createDatastore",value:function(e){var t,n=yA(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new dA(t));return function(e,t,n,r){return new bA(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return HP(o.syncEngine,e,0)},a=lA.V()?new lA:new cA,new xA(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new LP(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cx(t),rx("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,SA(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function MR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return tr(Xn().mark((function r(){var i;return Xn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var FR=function(){function e(t){pe(this,e),this.observer=t,this.muted=!1}return ye(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),UR=function(){function e(t,n){var r=this;pe(this,e),this.Ec=t,this.wt=n,this.metadata=new hx,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ye(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=tr(Xn().mark((function e(){var t,n,r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new SP(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=tr(Xn().mark((function e(){var t,n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=tr(Xn().mark((function e(){var t,n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jR=function(){function e(t){pe(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ye(e,[{key:"lookup",value:function(){var e=tr(Xn().mark((function e(t){var n,r=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new fx(lx.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=tr(Xn().mark((function e(t,n){var r,i,a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cx(t),i=tT(r.wt)+"/documents",a={documents:n.map((function(e){return $S(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=aT(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());sx(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new pS(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=tr(Xn().mark((function e(){var t,n=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Rx.fromPath(t);n.mutations.push(new vS(r,n.precondition(r)))})),e.next=7,function(){var e=tr(Xn().mark((function e(t,n){var r,i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cx(t),i=tT(r.wt)+"/documents",a={writes:n.map((function(e){return oT(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ux();t=Tx.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new fx(lx.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?XI.updateTime(t):XI.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tx.min()))throw new fx(lx.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return XI.updateTime(t)}return XI.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),VR=function(){function e(t,n,r,i,a){pe(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new mA(this.asyncQueue,"transaction_retry")}return ye(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(tr(Xn().mark((function t(){var n,r;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new jR(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!IE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!mS(t)}return!1}}]),e}(),qR=function(){function e(t,n,r,i){var a=this;pe(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=X_.UNAUTHENTICATED,this.clientId=_x.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rx("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return rx("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ye(e,[{key:"getConfiguration",value:function(){var e=tr(Xn().mark((function e(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fx(lx.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new hx;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(tr(Xn().mark((function n(){var r;return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=hP(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function BR(e,t){return zR.apply(this,arguments)}function zR(){return zR=tr(Xn().mark((function e(t,n){var r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),rx("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,LN(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),zR.apply(this,arguments)}function WR(e,t){return KR.apply(this,arguments)}function KR(){return KR=tr(Xn().mark((function e(t,n){var r,i;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,HR(t);case 3:return r=e.sent,rx("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return aP(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return aP(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),KR.apply(this,arguments)}function HR(e){return GR.apply(this,arguments)}function GR(){return GR=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return rx("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,BR(t,new RR);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),GR.apply(this,arguments)}function QR(e){return ZR.apply(this,arguments)}function ZR(){return ZR=tr(Xn().mark((function e(t){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return rx("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,WR(t,new LR);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),ZR.apply(this,arguments)}function YR(e){return HR(e).then((function(e){return e.persistence}))}function $R(e){return HR(e).then((function(e){return e.localStore}))}function JR(e){return QR(e).then((function(e){return e.remoteStore}))}function XR(e){return QR(e).then((function(e){return e.syncEngine}))}function eD(e){return tD.apply(this,arguments)}function tD(){return tD=tr(Xn().mark((function e(t){var n,r;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QR(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=MP.bind(null,n.syncEngine),r.onUnlisten=VP.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),tD.apply(this,arguments)}function nD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hx;return e.asyncQueue.enqueueAndForget(tr(Xn().mark((function i(){return Xn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new FR({next:function(a){t.enqueueAndForget((function(){return wP(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new fx(lx.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new fx(lx.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new IP(_I(n.path),a,{includeMetadataChanges:!0,Du:!0});return gP(e,o)},i.next=3,eD(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function rD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hx;return e.asyncQueue.enqueueAndForget(tr(Xn().mark((function i(){return Xn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new FR({next:function(n){t.enqueueAndForget((function(){return wP(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fx(lx.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new IP(n,a,{includeMetadataChanges:!0,Du:!0});return gP(e,o)},i.next=3,eD(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var iD=new Map;function aD(e,t,n){if(!n)throw new fx(lx.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function oD(e,t,n,r){if(!0===t&&!0===r)throw new fx(lx.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function uD(e){if(!Rx.isDocumentKey(e))throw new fx(lx.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function sD(e){if(Rx.isDocumentKey(e))throw new fx(lx.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function cD(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ux()}function lD(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fx(lx.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=cD(e);throw new fx(lx.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function fD(e,t){if(t<=0)throw new fx(lx.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var hD=function(){function e(t){var n;if(pe(this,e),void 0===t.host){if(void 0!==t.ssl)throw new fx(lx.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fx(lx.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,oD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ye(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),dD=function(){function e(t,n,r){pe(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hD({}),this._settingsFrozen=!1,t instanceof EE?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fx(lx.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new EE(e.options.projectId)}(t))}return ye(e,[{key:"app",get:function(){if(!this._app)throw new fx(lx.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fx(lx.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hD(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new px;switch(e.type){case"gapi":var t=e.client;return sx(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new gx(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new fx(lx.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=iD.get(e);t&&(rx("ComponentProvider","Removing Datastore"),iD.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function pD(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=lD(e,dD))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ax("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=X_.MOCK_USER;else{o=gn(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new fx(lx.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new X_(s)}e._authCredentials=new vx(new dx(o,u))}}var vD=function(){function e(t,n,r){pe(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ye(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new mD(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),yD=function(){function e(t,n,r){pe(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ye(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),mD=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this,e,r,_I(i)))._path=i,a.type="collection",a}return ye(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new vD(this.firestore,null,new Rx(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(yD);function gD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Jn(e),aD("collection","path",t),e instanceof dD){var a=Nx.fromString.apply(Nx,[t].concat(r));return sD(a),new mD(e,null,a)}if(!(e instanceof vD||e instanceof mD))throw new fx(lx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Nx.fromString.apply(Nx,[t].concat(r)));return sD(o),new mD(e.firestore,null,o)}function kD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Jn(e),1===arguments.length&&(t=_x.I()),aD("doc","path",t),e instanceof dD){var a=Nx.fromString.apply(Nx,[t].concat(r));return uD(a),new vD(e,null,new Rx(a))}if(!(e instanceof vD||e instanceof mD))throw new fx(lx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Nx.fromString.apply(Nx,[t].concat(r)));return uD(o),new vD(e.firestore,e instanceof mD?e.converter:null,new Rx(o))}function wD(e,t){return e=Jn(e),t=Jn(t),(e instanceof vD||e instanceof mD)&&(t instanceof vD||t instanceof mD)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function bD(e,t){return e=Jn(e),t=Jn(t),e instanceof yD&&t instanceof yD&&e.firestore===t.firestore&&NI(e._query,t._query)&&e.converter===t.converter}var _D=function(){function e(){var t=this;pe(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new mA(this,"async_queue_retry"),this.Kc=function(){var e=vA();e&&rx("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=vA();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return ye(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=vA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new hx;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=tr(Xn().mark((function e(){var t=this;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),$x(e.t0)){e.next=12;break}throw e.t0;case 12:rx("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ix("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=fP.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&ux()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=tr(Xn().mark((function e(){var t;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=nn(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=nn(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function xD(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=nn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var ED=function(){function e(){pe(this,e),this._progressObserver={},this._taskCompletionResolver=new hx,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ye(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),ID=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new _D,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ye(n,[{key:"_terminate",value:function(){return this._firestoreClient||TD(this),this._firestoreClient.terminate()}}]),n}(dD);function SD(e){return e._firestoreClient||TD(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function TD(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new xE(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new qR(e._authCredentials,e._appCheckCredentials,e._queue,r)}function CD(e,t,n){var r=new hx;return e.asyncQueue.enqueue(tr(Xn().mark((function i(){return Xn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,BR(e,n);case 3:return i.next=5,WR(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===lx.FAILED_PRECONDITION||e.code===lx.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function ND(e){return function(e){return e.asyncQueue.enqueue(tr(Xn().mark((function t(){var n,r;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,YR(e);case 2:return n=t.sent,t.next=5,JR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=cx(e);return t.lu.delete(0),EA(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(SD(e=lD(e,ID)))}function AD(e){return function(e){return e.asyncQueue.enqueue(tr(Xn().mark((function t(){var n,r;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,YR(e);case 2:return n=t.sent,t.next=5,JR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cx(t)).lu.add(0),e.next=4,SA(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(SD(e=lD(e,ID)))}function PD(e,t){var n=SD(e=lD(e,ID)),r=new ED;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new UR(e,t)}(function(e,t){if(e instanceof Uint8Array)return MR(e,t);if(e instanceof ArrayBuffer)return MR(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,yA(t));e.asyncQueue.enqueueAndForget(tr(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=PR,t.next=3,XR(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function RD(e,t){return function(e,t){return e.asyncQueue.enqueue(tr(Xn().mark((function n(){return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=cx(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,$R(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(SD(e=lD(e,ID)),t).then((function(t){return t?new yD(e,null,t.query):null}))}function DD(e){if(e._initialized||e._terminated)throw new fx(lx.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var OD=function(){function e(){pe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new fx(lx.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Px(n)}return ye(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var LD=function(){function e(t){pe(this,e),this._byteString=t}return ye(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(vE.fromBase64String(t))}catch(t){throw new fx(lx.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(vE.fromUint8Array(t))}}]),e}(),MD=ye((function e(t){pe(this,e),this._methodName=t})),FD=function(){function e(t,n){if(pe(this,e),!isFinite(t)||t<-90||t>90)throw new fx(lx.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new fx(lx.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ye(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return xx(this._lat,e._lat)||xx(this._long,e._long)}}]),e}(),UD=/^__.*__$/,jD=function(){function e(t,n,r){pe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ye(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new sS(e,this.data,this.fieldMask,t,this.fieldTransforms):new uS(e,this.data,t,this.fieldTransforms)}}]),e}(),VD=function(){function e(t,n,r){pe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ye(e,[{key:"toMutation",value:function(e,t){return new sS(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function qD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ux()}}var BD=function(){function e(t,n,r,i,a,o){pe(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ye(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return sO(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(qD(this.Zc)&&UD.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),zD=function(){function e(t,n,r){pe(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||yA(t)}return ye(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new BD({Zc:e,methodName:t,ca:n,path:Px.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function WD(e){var t=e._freezeSettings(),n=yA(e._databaseId);return new zD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function KD(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);iO("Data must be an object, but it was:",o,r);var u,s,c=nO(r,o);if(a.merge)u=new pE(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=nn(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=aO(t,d,n);if(!o.contains(p))throw new fx(lx.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));cO(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new pE(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new jD(new ZE(c),u,s)}var HD=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(MD);function GD(e,t,n){return new BD({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var QD=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"_toFieldTransform",value:function(e){return new $I(e.path,new zI)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(MD),ZD=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e)).ha=r,i}return ye(n,[{key:"_toFieldTransform",value:function(e){var t=GD(this,e,!0),n=this.ha.map((function(e){return tO(e,t)})),r=new WI(n);return new $I(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(MD),YD=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e)).ha=r,i}return ye(n,[{key:"_toFieldTransform",value:function(e){var t=GD(this,e,!0),n=this.ha.map((function(e){return tO(e,t)})),r=new HI(n);return new $I(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(MD),$D=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e)).la=r,i}return ye(n,[{key:"_toFieldTransform",value:function(e){var t=new QI(e.wt,UI(e.wt,this.la));return new $I(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(MD);function JD(e,t,n,r){var i=e.aa(1,t,n);iO("Data must be an object, but it was:",i,r);var a=[],o=ZE.empty();oE(r,(function(e,r){var u=uO(t,e,n);r=Jn(r);var s=i.ia(u);if(r instanceof HD)a.push(u);else{var c=tO(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new pE(a);return new VD(o,u,i.fieldTransforms)}function XD(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[aO(t,r,n)],s=[i];if(a.length%2!=0)throw new fx(lx.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(aO(t,a[c])),s.push(a[c+1]);for(var l=[],f=ZE.empty(),h=u.length-1;h>=0;--h)if(!cO(l,u[h])){var d=u[h],p=s[h];p=Jn(p);var v=o.ia(d);if(p instanceof HD)l.push(d);else{var y=tO(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new pE(l);return new VD(f,m,o.fieldTransforms)}function eO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return tO(n,e.aa(r?4:3,t))}function tO(e,t){if(rO(e=Jn(e)))return iO("Unsupported field value:",t,e),nO(e,t);if(e instanceof MD)return function(e,t){if(!qD(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=nn(e);try{for(a.s();!(n=a.n()).done;){var o=tO(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Jn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return UI(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Sx.fromDate(e);return{timestampValue:KS(t.wt,n)}}if(e instanceof Sx){var r=new Sx(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:KS(t.wt,r)}}if(e instanceof FD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof LD)return{bytesValue:HS(t.wt,e._byteString)};if(e instanceof vD){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ZS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(cD(e)))}(e,t)}function nO(e,t){var n={};return uE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oE(e,(function(e,r){var i=tO(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function rO(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Sx||e instanceof FD||e instanceof LD||e instanceof vD||e instanceof MD)}function iO(e,t,n){if(!rO(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=cD(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function aO(e,t,n){if((t=Jn(t))instanceof OD)return t._internalPath;if("string"==typeof t)return uO(e,t);throw sO("Field path arguments must be of type string or ",e,!1,void 0,n)}var oO=new RegExp("[~\\*/\\[\\]]");function uO(e,t,n){if(t.search(oO)>=0)throw sO("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return rn(OD,he(t.split(".")))._internalPath}catch(r){throw sO("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function sO(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new fx(lx.INVALID_ARGUMENT,u+e+s)}function cO(e,t){return e.some((function(e){return e.isEqual(t)}))}var lO=function(){function e(t,n,r,i,a){pe(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ye(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new vD(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new fO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(hO("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),fO=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"data",value:function(){return Re(Ae(n.prototype),"data",this).call(this)}}]),n}(lO);function hO(e,t){return"string"==typeof t?uO(e,t):t instanceof OD?t._internalPath:t._delegate._internalPath}var dO=function(){function e(t,n){pe(this,e),this.hasPendingWrites=t,this.fromCache=n}return ye(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),pO=function(e){Oe(n,e);var t=je(n);function n(e,r,i,a,o,u){var s;return pe(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ye(n,[{key:"exists",value:function(){return Re(Ae(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new vO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(hO("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(lO),vO=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Re(Ae(n.prototype),"data",this).call(this,e)}}]),n}(pO),yO=function(){function e(t,n,r,i){pe(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new dO(i.hasPendingWrites,i.fromCache),this.query=r}return ye(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new vO(n._firestore,n._userDataWriter,r.key,r,new dO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fx(lx.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new vO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new vO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:mO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function mO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ux()}}function gO(e,t){return e instanceof pO&&t instanceof pO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof yO&&t instanceof yO&&e._firestore===t._firestore&&bD(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function kO(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fx(lx.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wO=ye((function e(){pe(this,e)}));function bO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var _O=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return ye(n,[{key:"_apply",value:function(e){var t=WD(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fx(lx.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){DO(o,a);var s,c=[],l=nn(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(RO(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=RO(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||DO(o,a),u=eO(n,"where",o,"in"===a||"not-in"===a);var h=oI.create(i,a,u);return function(e,t){if(t.ht()){var n=EI(e);if(null!==n&&!n.isEqual(t.field))throw new fx(lx.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=xI(e);null!==r&&OO(e,t.field,r)}var i=function(e,t){var n,r=nn(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new fx(lx.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fx(lx.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new yD(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new wI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(wO);var xO=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return ye(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new fx(lx.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fx(lx.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new yI(t,n);return function(e,t){if(null===xI(e)){var n=EI(e);null!==n&&OO(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new yD(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new wI(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(wO);var EO=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return ye(n,[{key:"_apply",value:function(e){return new yD(e.firestore,e.converter,CI(e._query,this.ma,this.ga))}}]),n}(wO);var IO=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ye(n,[{key:"_apply",value:function(e){var t=PO(e,this.type,this.ya,this.pa);return new yD(e.firestore,e.converter,function(e,t){return new wI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(wO);function SO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new IO("startAt",t,!0)}function TO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new IO("startAfter",t,!1)}var CO=function(e){Oe(n,e);var t=je(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ye(n,[{key:"_apply",value:function(e){var t=PO(e,this.type,this.ya,this.pa);return new yD(e.firestore,e.converter,function(e,t){return new wI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(wO);function NO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new CO("endBefore",t,!1)}function AO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new CO("endAt",t,!0)}function PO(e,t,n,r){if(n[0]=Jn(n[0]),n[0]instanceof lO)return function(e,t,n,r,i){if(!r)throw new fx(lx.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=nn(SI(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(FE(t,r.key));else{var c=r.data.field(s.field);if(wE(c))throw new fx(lx.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new fx(lx.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new vI(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=WD(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new fx(lx.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new fx(lx.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!II(e)&&-1!==c.indexOf("/"))throw new fx(lx.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Nx.fromString(c));if(!Rx.isDocumentKey(l))throw new fx(lx.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Rx(l);u.push(FE(t,f))}else{var h=eO(n,r,c);u.push(h)}}return new vI(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function RO(e,t,n){if("string"==typeof(n=Jn(n))){if(""===n)throw new fx(lx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!II(t)&&-1!==n.indexOf("/"))throw new fx(lx.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Nx.fromString(n));if(!Rx.isDocumentKey(r))throw new fx(lx.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return FE(e,new Rx(r))}if(n instanceof vD)return FE(e,n._key);throw new fx(lx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(cD(n),"."))}function DO(e,t){if(!Array.isArray(e)||0===e.length)throw new fx(lx.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new fx(lx.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function OO(e,t,n){if(!n.isEqual(t))throw new fx(lx.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var LO={maxAttempts:5},MO=function(){function e(){pe(this,e)}return ye(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(AE(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gE(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kE(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ux()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return oE(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new FD(gE(e.latitude),gE(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=bE(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_E(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=mE(e);return new Sx(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Nx.fromString(e);sx(kT(n));var r=new EE(n.get(1),n.get(3)),i=new Rx(n.popFirst(5));return r.isEqual(t)||ix("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function FO(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var UO=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this)).firestore=e,r}return ye(n,[{key:"convertBytes",value:function(e){return new LD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new vD(this.firestore,null,t)}}]),n}(MO),jO=function(){function e(t,n){pe(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=WD(t)}return ye(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=VO(e,this._firestore),i=FO(r.converter,t,n),a=KD(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,XI.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=VO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Jn(t))||t instanceof OD?XD(this._dataReader,"WriteBatch.update",i._key,t,n,o):JD(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,XI.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=VO(e,this._firestore);return this._mutations=this._mutations.concat(new pS(t._key,XI.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new fx(lx.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function VO(e,t){if((e=Jn(e)).firestore!==t)throw new fx(lx.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var qO=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this)).firestore=e,r}return ye(n,[{key:"convertBytes",value:function(e){return new LD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new vD(this.firestore,null,t)}}]),n}(MO);function BO(e){e=lD(e,vD);var t=lD(e.firestore,ID),n=SD(t),r=new qO(t);return function(e,t){var n=new hx;return e.asyncQueue.enqueueAndForget(tr(Xn().mark((function r(){return Xn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=tr(Xn().mark((function e(t,n,r){var i,a;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=cx(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new fx(lx.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=hP(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,$R(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new pO(t,r,e._key,n,new dO(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function zO(e){e=lD(e,yD);var t=lD(e.firestore,ID),n=SD(t),r=new qO(t);return function(e,t){var n=new hx;return e.asyncQueue.enqueueAndForget(tr(Xn().mark((function r(){return Xn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=tr(Xn().mark((function e(t,n,r){var i,a,o,u,s;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,KN(t,n,!0);case 3:i=e.sent,a=new RP(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=hP(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,$R(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new yO(t,r,e,n)}))}function WO(e,t,n){e=lD(e,vD);var r=lD(e.firestore,ID),i=FO(e.converter,t,n);return QO(r,[KD(WD(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,XI.none())])}function KO(e,t,n){e=lD(e,vD);for(var r=lD(e.firestore,ID),i=WD(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return QO(r,[("string"==typeof(t=Jn(t))||t instanceof OD?XD(i,"updateDoc",e._key,t,n,o):JD(i,"updateDoc",e._key,t)).toMutation(e._key,XI.exists(!0))])}function HO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Jn(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||xD(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(xD(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof vD)l=lD(e.firestore,ID),f=_I(e._key.path),c={next:function(t){n[s]&&n[s](ZO(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=lD(e,yD);l=lD(p.firestore,ID),f=p._query;var v=new qO(l);c={next:function(e){n[s]&&n[s](new yO(l,v,p,e))},error:n[s+1],complete:n[s+2]},kO(e._query)}return function(e,t,n,r){var i=new FR(r),a=new IP(t,i,n);return e.asyncQueue.enqueueAndForget(tr(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gP,t.next=3,eD(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(tr(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=wP,t.next=3,eD(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(SD(l),f,h,c)}function GO(e,t){return function(e,t){var n=new FR(t);return e.asyncQueue.enqueueAndForget(tr(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cx(e).Tu.add(t),t.next()},t.next=3,eD(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(tr(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cx(e).Tu.delete(t)},t.next=3,eD(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(SD(e=lD(e,ID)),xD(t)?t:{next:t})}function QO(e,t){return function(e,t){var n=new hx;return e.asyncQueue.enqueueAndForget(tr(Xn().mark((function r(){return Xn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=BP,r.next=3,XR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(SD(e),t)}function ZO(e,t,n){var r=n.docs.get(t._key),i=new qO(e);return new pO(e,i,t._key,r,new dO(n.hasPendingWrites,n.fromCache),t.converter)}var YO=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,r))._firestore=e,i}return ye(n,[{key:"get",value:function(e){var t=this,r=VO(e,this._firestore),i=new qO(this._firestore);return Re(Ae(n.prototype),"get",this).call(this,e).then((function(e){return new pO(t._firestore,i,r._key,e._document,new dO(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){pe(this,e),this._firestore=t,this._transaction=n,this._dataReader=WD(t)}return ye(e,[{key:"get",value:function(e){var t=this,n=VO(e,this._firestore),r=new UO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ux();var i=e[0];if(i.isFoundDocument())return new lO(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new lO(t._firestore,r,n._key,null,n.converter);throw ux()}))}},{key:"set",value:function(e,t,n){var r=VO(e,this._firestore),i=FO(r.converter,t,n),a=KD(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=VO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Jn(t))||t instanceof OD?XD(this._dataReader,"Transaction.update",i._key,t,n,o):JD(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=VO(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function $O(e,t,n){e=lD(e,ID);var r=Object.assign(Object.assign({},LO),n);return function(e){if(e.maxAttempts<1)throw new fx(lx.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new hx;return e.asyncQueue.enqueueAndForget(tr(Xn().mark((function i(){var a;return Xn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return QR(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new VR(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(SD(e),(function(n){return t(new YO(e,n))}),r)}function JO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZD("arrayUnion",t)}function XO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new YD("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ex=e}(Zr),Br(new nr("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new ID(i,new yx(e.getProvider("auth-internal")),new wx(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),ti(J_,"3.4.10",e),ti(J_,"3.4.10","esm2017")}();function eL(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new fx("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function tL(){if("undefined"===typeof Uint8Array)throw new fx("unimplemented","Uint8Arrays are not available in this environment.")}function nL(){if("undefined"==typeof atob)throw new fx("unimplemented","Blobs are unavailable in Firestore in this environment.")}var rL=function(){function e(t){pe(this,e),this._delegate=t}return ye(e,[{key:"toBase64",value:function(){return nL(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return tL(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return nL(),new e(LD.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return tL(),new e(LD.fromUint8Array(t))}}]),e}();function iL(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=nn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var aL=function(){function e(){pe(this,e)}return ye(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){DD(e=lD(e,ID));var n=SD(e),r=e._freezeSettings(),i=new LR;return CD(n,i,new DR(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){DD(e=lD(e,ID));var t=SD(e),n=e._freezeSettings(),r=new LR;return CD(t,r,new OR(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new fx(lx.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new hx;return e._queue.enqueueAndForgetEvenWhileRestricted(tr(Xn().mark((function n(){return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=tr(Xn().mark((function e(t){var n;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qx.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Qx.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(AN(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),oL=function(){function e(t,n,r){var i=this;pe(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof EE||(this._appCompat=t)}return ye(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ax("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};pD(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ND(this._delegate)}},{key:"disableNetwork",value:function(){return AD(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&oD("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new hx;return e.asyncQueue.enqueueAndForget(tr(Xn().mark((function n(){return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=XP,n.next=3,XR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(SD(e=lD(e,ID)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return GO(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new fx("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new wL(this,gD(this._delegate,e))}catch(mF){throw hL(mF,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new fL(this,kD(this._delegate,e))}catch(mF){throw hL(mF,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new mL(this,function(e,t){if(e=lD(e,dD),aD("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new fx(lx.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new yD(e,null,function(e){return new wI(Nx.emptyPath(),e)}(t))}(this._delegate,e))}catch(mF){throw hL(mF,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return $O(this._delegate,(function(n){return e(new sL(t,n))}))}},{key:"batch",value:function(){var e=this;return SD(this._delegate),new cL(new jO(this._delegate,(function(t){return QO(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return PD(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return RD(this._delegate,e).then((function(e){return e?new mL(t,e):null}))}}]),e}(),uL=function(e){Oe(n,e);var t=je(n);function n(e){var r;return pe(this,n),(r=t.call(this)).firestore=e,r}return ye(n,[{key:"convertBytes",value:function(e){return new rL(new LD(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return fL.forKey(t,this.firestore,null)}}]),n}(MO);var sL=function(){function e(t,n){pe(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new uL(t)}return ye(e,[{key:"get",value:function(e){var t=this,n=bL(e);return this._delegate.get(n).then((function(e){return new vL(t._firestore,new pO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=bL(e);return n?(eL("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=bL(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bL(e);return this._delegate.delete(t),this}}]),e}(),cL=function(){function e(t){pe(this,e),this._delegate=t}return ye(e,[{key:"set",value:function(e,t,n){var r=bL(e);return n?(eL("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=bL(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bL(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),lL=function(){function e(t,n,r){pe(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ye(e,[{key:"fromFirestore",value:function(e,t){var n=new vO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yL(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new uL(t),n),i.set(n,a)),a}}]),e}();lL.INSTANCES=new WeakMap;var fL=function(){function e(t,n){pe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new uL(t)}return ye(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new wL(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new wL(this.firestore,gD(this._delegate,e))}catch(mF){throw hL(mF,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Jn(e))instanceof vD&&wD(this._delegate,e)}},{key:"set",value:function(e,t){t=eL("DocumentReference.set",t);try{return t?WO(this._delegate,e,t):WO(this._delegate,e)}catch(mF){throw hL(mF,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?KO(this._delegate,e):KO.apply(void 0,[this._delegate,e,t].concat(r))}catch(mF){throw hL(mF,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return QO(lD(e.firestore,ID),[new pS(e._key,XI.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=dL(n),a=pL(n,(function(t){return new vL(e.firestore,new pO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return HO(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?BO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=lD(e,vD);var t=lD(e.firestore,ID);return nD(SD(t),e._key,{source:"server"}).then((function(n){return ZO(t,e,n)}))}(this._delegate):function(e){e=lD(e,vD);var t=lD(e.firestore,ID);return nD(SD(t),e._key).then((function(n){return ZO(t,e,n)}))}(this._delegate),t.then((function(e){return new vL(n.firestore,new pO(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(lL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new fx("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new vD(n._delegate,r,new Rx(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new vD(n._delegate,r,t))}}]),e}();function hL(e,t,n){return e.message=e.message.replace(t,n),e}function dL(e){var t,n=nn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!iL(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function pL(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=iL(e[0])?e[0]:iL(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var vL=function(){function e(t,n){pe(this,e),this._firestore=t,this._delegate=n}return ye(e,[{key:"ref",get:function(){return new fL(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return gO(this._delegate,e._delegate)}}]),e}(),yL=function(e){Oe(n,e);var t=je(n);function n(){return pe(this,n),t.apply(this,arguments)}return ye(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ux()}(void 0!==t),t}}]),n}(vL),mL=function(){function e(t,n){pe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new uL(t)}return ye(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,bO(this._delegate,function(e,t,n){var r=t,i=hO("where",e);return new _O(i,r,n)}(t,n,r)))}catch(mF){throw hL(mF,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,bO(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=hO("orderBy",e);return new xO(n,t)}(t,n)))}catch(mF){throw hL(mF,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,bO(this._delegate,function(e){return fD("limit",e),new EO("limit",e,"F")}(t)))}catch(mF){throw hL(mF,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,bO(this._delegate,function(e){return fD("limitToLast",e),new EO("limitToLast",e,"L")}(t)))}catch(mF){throw hL(mF,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,bO(this._delegate,SO.apply(void 0,arguments)))}catch(mF){throw hL(mF,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,bO(this._delegate,TO.apply(void 0,arguments)))}catch(mF){throw hL(mF,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,bO(this._delegate,NO.apply(void 0,arguments)))}catch(mF){throw hL(mF,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,bO(this._delegate,AO.apply(void 0,arguments)))}catch(mF){throw hL(mF,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return bD(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?zO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=lD(e,yD);var t=lD(e.firestore,ID),n=SD(t),r=new qO(t);return rD(n,e._query,{source:"server"}).then((function(n){return new yO(t,r,e,n)}))}(this._delegate):function(e){e=lD(e,yD);var t=lD(e.firestore,ID),n=SD(t),r=new qO(t);return kO(e._query),rD(n,e._query).then((function(n){return new yO(t,r,e,n)}))}(this._delegate),t.then((function(e){return new kL(n.firestore,new yO(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=dL(n),a=pL(n,(function(t){return new kL(e.firestore,new yO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return HO(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(lL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),gL=function(){function e(t,n){pe(this,e),this._firestore=t,this._delegate=n}return ye(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new yL(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),kL=function(){function e(t,n){pe(this,e),this._firestore=t,this._delegate=n}return ye(e,[{key:"query",get:function(){return new mL(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new yL(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new gL(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new yL(n._firestore,r))}))}},{key:"isEqual",value:function(e){return gO(this._delegate,e._delegate)}}]),e}(),wL=function(e){Oe(n,e);var t=je(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ye(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new fL(this.firestore,e):null}},{key:"doc",value:function(e){try{return new fL(this.firestore,void 0===e?kD(this._delegate):kD(this._delegate,e))}catch(mF){throw hL(mF,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=lD(e.firestore,ID),r=kD(e),i=FO(e.converter,t);return QO(n,[KD(WD(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,XI.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new fL(t.firestore,e)}))}},{key:"isEqual",value:function(e){return wD(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(lL.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(mL);function bL(e){return lD(e,vD)}var _L=function(){function e(){pe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=rn(OD,n)}return ye(e,[{key:"isEqual",value:function(e){return(e=Jn(e))instanceof OD&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Px.keyField().canonicalString())}}]),e}(),xL=function(){function e(t){pe(this,e),this._delegate=t}return ye(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new QD("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new HD("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=JO.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=XO.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new $D("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),EL={Firestore:oL,GeoPoint:FD,Timestamp:Sx,Blob:rL,Transaction:sL,WriteBatch:cL,DocumentReference:fL,DocumentSnapshot:vL,Query:mL,QueryDocumentSnapshot:yL,QuerySnapshot:kL,CollectionReference:wL,FieldPath:_L,FieldValue:xL,setLogLevel:function(e){!function(e){tx.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new nr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},EL)))}(e,(function(e,t){return new oL(e,t,new aL)})),e.registerVersion("@firebase/firestore-compat","0.1.19")}(Ii);var IL=n(9969),SL=Ii.initializeApp({apiKey:"AIzaSyA6dMwmkj7sz7jzG9bQT-ghmTv-NMb9nMc",authDomain:"chip-839e3.firebaseapp.com",projectId:"chip-839e3",storageBucket:"chip-839e3.appspot.com",messagingSenderId:"128190436280",appId:"1:128190436280:web:df19261112d7a7ed80b54d",measurementId:"G-XWW6K3B2V8"}),TL=new IL.Z(SL),CL={products:[],loading:!0};var NL=function(e){var n=N(),r=s((0,t.useState)(""),2),i=r[0],a=r[1],o=s((0,t.useState)(""),2),u=o[0],c=o[1],l=s((0,t.useState)(""),2),f=l[0],h=l[1],d=s((0,t.useState)(""),2),p=d[0],v=d[1],y=s((0,t.useState)(""),2),m=y[0],g=y[1],k=s((0,t.useState)(""),2),b=k[0],_=k[1],x=s((0,t.useState)(""),2),E=x[0],I=x[1],S=s((0,t.useState)(""),2),T=S[0],C=S[1],P=s((0,t.useState)(""),2),R=P[0],L=P[1],M=s((0,t.useState)(""),2),F=M[0],U=M[1],j=s((0,t.useState)(0),2),V=j[0],q=j[1],B=s((0,t.useState)(""),2),z=B[0],W=B[1],K=s((0,t.useState)(""),2),H=K[0],G=K[1],Q=s((0,t.useState)(""),2),Z=Q[0],Y=Q[1],$=s((0,t.useState)(""),2),J=$[0],X=$[1],ee=s((0,t.useState)(""),2),te=ee[0],ne=ee[1],re=s((0,t.useState)(""),2),ie=re[0],ae=re[1],oe=s((0,t.useState)(""),2),ue=oe[0],se=oe[1],ce=s((0,t.useState)(""),2),le=ce[0],fe=ce[1],he=w((function(e){return e.order.loading})),de=w((function(e){return e.order.done})),pe=s((0,t.useState)(!1),2),ve=pe[0],ye=pe[1];return(0,Ie.jsxs)("div",{className:"row p-0 m-0",children:[(0,Ie.jsx)("div",{className:"col-xl-6",children:(0,Ie.jsxs)("div",{className:"d-flex flex-column p-5",children:[(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img1"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:i,onChange:function(e){return a(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img2"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:u,onChange:function(e){return c(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img3"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:f,onChange:function(e){return h(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img4"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:p,onChange:function(e){return v(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img5"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:m,onChange:function(e){return g(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img6"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:b,onChange:function(e){return _(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img7"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:E,onChange:function(e){return I(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img8"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:T,onChange:function(e){return C(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img9"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:R,onChange:function(e){return L(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"img10"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:F,onChange:function(e){return U(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"price"}),(0,Ie.jsx)("input",{className:"mb-3",type:"number",value:V,onChange:function(e){return q(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"brand"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:z,onChange:function(e){return W(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"model"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:H,onChange:function(e){return G(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"chip"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:Z,onChange:function(e){return Y(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"manufacture"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:J,onChange:function(e){return X(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"classificationKey"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:te,onChange:function(e){return ne(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"classificationBoard"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:ie,onChange:function(e){return ae(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"keyBlade"}),(0,Ie.jsx)("input",{className:"mb-3",type:"text",value:ue,onChange:function(e){return se(e.target.value)}}),(0,Ie.jsx)("p",{className:"m-0 p-0",children:"description"}),(0,Ie.jsx)("textarea",{rows:"5",cols:"80",id:"TITLE",value:le,onChange:function(e){return fe(e.target.value)}})]})}),(0,Ie.jsxs)("div",{className:"col-xl-6",children:[(0,Ie.jsx)("button",{onClick:function(){n({type:A,img1:i,img2:u,img3:f,img4:p,img5:m,img6:b,img7:E,img8:T,img9:R,img10:F,price:V,brand:z,model:H,chip:Z,manufacture:J,classificationKey:te,classificationBoard:ie,keyBlade:ue,description:le}),ye(!0)},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),(0,Ie.jsxs)("div",{className:"row",children:[(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:i,alt:""})}),(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:u,alt:""})}),(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:f,alt:""})}),(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:p,alt:""})}),(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:m,alt:""})}),(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:b,alt:""})}),(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:E,alt:""})}),(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:T,alt:""})}),(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:R,alt:""})}),(0,Ie.jsx)("div",{className:"col-xl-2",children:(0,Ie.jsx)("img",{className:"img-fluid mt-2",src:F,alt:""})})]}),(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)("p",{children:V}),(0,Ie.jsx)("p",{children:z}),(0,Ie.jsx)("p",{children:H}),(0,Ie.jsx)("p",{children:Z}),(0,Ie.jsx)("p",{children:J}),(0,Ie.jsx)("p",{children:te}),(0,Ie.jsx)("p",{children:ie}),(0,Ie.jsx)("p",{children:ue}),(0,Ie.jsx)("p",{children:le})]})]}),(0,Ie.jsx)(Gt,{show:ve,children:he?(0,Ie.jsx)(Yt,{animation:"border",role:"status",children:(0,Ie.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):de?(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)("p",{children:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"}),(0,Ie.jsx)("button",{onClick:function(){ye(!1),n(D()),n(O()),a(""),c(""),h(""),v(""),g(""),_(""),I(""),C(""),L(""),U(""),q(0),W(""),G(""),Y(""),X(""),ne(""),ae(""),se(""),fe("")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439"})]}):""})]})},AL=n(7462);n(2176);function PL(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function RL(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function DL(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],u=a[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&o!==n&&u(n),[s?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),u(e)}),[r])]}function OL(e,t){return Object.keys(t).reduce((function(n,r){var i,a=n,o=a[PL(r)],u=a[r],s=(0,L.Z)(a,[PL(r),r].map(RL)),c=t[r],l=DL(u,o,e[c]),f=l[0],h=l[1];return(0,AL.Z)({},s,((i={})[r]=f,i[c]=h,i))}),e)}function LL(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function ML(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function FL(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}LL.__suppressDeprecationWarning=!0,ML.__suppressDeprecationWarning=!0,FL.__suppressDeprecationWarning=!0;function UL(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var jL={};UL(jL,"SSRProvider",(function(){return BL})),UL(jL,"useSSRSafeId",(function(){return WL})),UL(jL,"useIsSSR",(function(){return KL}));var VL={prefix:String(Math.round(1e10*Math.random())),current:0},qL=t.createContext(VL);function BL(e){var n=(0,t.useContext)(qL),r=(0,t.useMemo)((function(){return{prefix:n===VL?"":"".concat(n.prefix,"-").concat(++n.current),current:0}}),[n]);return t.createElement(qL.Provider,{value:r},e.children)}var zL=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);function WL(e){var n=(0,t.useContext)(qL);return n!==VL||zL||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."),(0,t.useMemo)((function(){return e||"react-aria".concat(n.prefix,"-").concat(++n.current)}),[e])}function KL(){var e=(0,t.useContext)(qL)!==VL,n=s((0,t.useState)(e),2),r=n[0],i=n[1];return"undefined"!==typeof window&&e&&(0,t.useLayoutEffect)((function(){i(!1)}),[]),r}var HL=t.createContext(null),GL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},QL=t.createContext(null);var ZL=function(e){var n=e.children,r=e.in,i=e.mountOnEnter,a=e.unmountOnExit,o=(0,t.useRef)(r);return(0,t.useEffect)((function(){r&&(o.current=!0)}),[r]),r?n:a||!o.current&&i?null:n},YL=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],$L=["activeKey","getControlledId","getControllerId"],JL=["as"];function XL(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function eM(e){var n=e.active,r=e.eventKey,i=e.mountOnEnter,a=e.transition,o=e.unmountOnExit,u=e.role,s=void 0===u?"tabpanel":u,c=e.onEnter,l=e.onEntering,f=e.onEntered,h=e.onExit,d=e.onExiting,p=e.onExited,v=XL(e,YL),y=(0,t.useContext)(HL);if(!y)return[Object.assign({},v,{role:s}),{eventKey:r,isActive:n,mountOnEnter:i,transition:a,unmountOnExit:o,onEnter:c,onEntering:l,onEntered:f,onExit:h,onExiting:d,onExited:p}];var m=y.activeKey,g=y.getControlledId,k=y.getControllerId,w=XL(y,$L),b=GL(r);return[Object.assign({},v,{role:s,id:g(r),"aria-labelledby":k(r)}),{eventKey:r,isActive:null==n&&null!=b?GL(m)===b:n,transition:a||w.transition,mountOnEnter:null!=i?i:w.mountOnEnter,unmountOnExit:null!=o?o:w.unmountOnExit,onEnter:c,onEntering:l,onEntered:f,onExit:h,onExiting:d,onExited:p}]}var tM=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=s(eM(XL(e,JL)),2),a=i[0],o=i[1],u=o.isActive,c=o.onEnter,l=o.onEntering,f=o.onEntered,h=o.onExit,d=o.onExiting,p=o.onExited,v=o.mountOnEnter,y=o.unmountOnExit,m=o.transition,g=void 0===m?ZL:m;return(0,Ie.jsx)(HL.Provider,{value:null,children:(0,Ie.jsx)(QL.Provider,{value:null,children:(0,Ie.jsx)(g,{in:u,onEnter:c,onEntering:l,onEntered:f,onExit:h,onExiting:d,onExited:p,mountOnEnter:v,unmountOnExit:y,children:(0,Ie.jsx)(r,Object.assign({},a,{ref:t,hidden:!u,"aria-hidden":!u}))})})})}));tM.displayName="TabPanel";var nM=function(e){var n=e.id,r=e.generateChildId,i=e.onSelect,a=e.activeKey,o=e.defaultActiveKey,u=e.transition,c=e.mountOnEnter,l=e.unmountOnExit,f=e.children,h=s(DL(a,o,i),2),d=h[0],p=h[1],v=WL(n),y=(0,t.useMemo)((function(){return r||function(e,t){return v?"".concat(v,"-").concat(t,"-").concat(e):null}}),[v,r]),m=(0,t.useMemo)((function(){return{onSelect:p,activeKey:d,transition:u,mountOnEnter:c||!1,unmountOnExit:l||!1,getControlledId:function(e){return y(e,"tabpane")},getControllerId:function(e){return y(e,"tab")}}}),[p,d,u,c,l,y]);return(0,Ie.jsx)(HL.Provider,{value:m,children:(0,Ie.jsx)(QL.Provider,{value:p||null,children:f})})};nM.Panel=tM;var rM=nM;n(3573);var iM=t.createContext(null);iM.displayName="NavContext";var aM=iM,oM=["as","disabled"];function uM(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.onClick,u=e.tabIndex,s=void 0===u?0:u,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:s,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},l]}var sM=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,oM),a=s(uM(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,Ie.jsx)(u,Object.assign({},i,o,{ref:t}))}));sM.displayName="Button";var cM=sM,lM=["as","active","eventKey"];function fM(e){var n=e.key,r=e.onClick,i=e.active,a=e.id,o=e.role,u=e.disabled,s=(0,t.useContext)(QL),c=(0,t.useContext)(aM),l=(0,t.useContext)(HL),f=i,h={role:o};if(c){o||"tablist"!==c.role||(h.role="tab");var d=c.getControllerId(null!=n?n:null),p=c.getControlledId(null!=n?n:null);h[me("event-key")]=n,h.id=d||a,!(f=null==i&&null!=n?c.activeKey===n:i)&&(null!=l&&l.unmountOnExit||null!=l&&l.mountOnEnter)||(h["aria-controls"]=p)}return"tab"===h.role&&(u&&(h.tabIndex=-1,h["aria-disabled"]=!0),f?h["aria-selected"]=f:h.tabIndex=-1),h.onClick=Y((function(e){u||(null==r||r(e),null!=n&&s&&!e.isPropagationStopped()&&s(n,e))})),[h,{isActive:f}]}var hM=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?cM:n,i=e.active,a=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,lM),u=s(fM(Object.assign({key:GL(a,o.href),active:i},o)),2),c=u[0],l=u[1];return c[me("active")]=l.isActive,(0,Ie.jsx)(r,Object.assign({},o,c,{ref:t}))}));hM.displayName="NavItem";var dM=hM,pM=["as","onSelect","activeKey","role","onKeyDown"];var vM=function(){},yM=me("event-key"),mM=t.forwardRef((function(e,n){var r,i,a=e.as,o=void 0===a?"div":a,u=e.onSelect,s=e.activeKey,c=e.role,l=e.onKeyDown,f=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,pM),h=(0,t.useReducer)((function(e){return!e}),!1)[1],d=(0,t.useRef)(!1),p=(0,t.useContext)(QL),v=(0,t.useContext)(HL);v&&(c=c||"tablist",s=v.activeKey,r=v.getControlledId,i=v.getControllerId);var y=(0,t.useRef)(null),m=function(e){var t=y.current;if(!t)return null;var n=qe(t,"[".concat(yM,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;var i=n.indexOf(r);if(-1===i)return null;var a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},g=function(e,t){null!=e&&(null==u||u(e,t),null==p||p(e,t))};(0,t.useEffect)((function(){if(y.current&&d.current){var e=y.current.querySelector("[".concat(yM,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));var k=J(n,y);return(0,Ie.jsx)(QL.Provider,{value:g,children:(0,Ie.jsx)(aM.Provider,{value:{role:c,activeKey:GL(s),getControlledId:r||vM,getControllerId:i||vM},children:(0,Ie.jsx)(o,Object.assign({},f,{onKeyDown:function(e){if(null==l||l(e),v){var t,n;switch(e.key){case"ArrowLeft":case"ArrowUp":t=m(-1);break;case"ArrowRight":case"ArrowDown":t=m(1);break;default:return}if(t)e.preventDefault(),g(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,h()}},ref:k,role:c}))})})}));mM.displayName="Nav";var gM=Object.assign(mM,{Item:dM}),kM=t.createContext(null);kM.displayName="NavbarContext";var wM=kM,bM=t.createContext(null);bM.displayName="CardHeaderContext";var _M=bM,xM=wt("nav-item");var EM="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||EM?t.useLayoutEffect:t.useEffect,new WeakMap;var IM=["onKeyDown"];var SM=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,IM),a=s(uM(Object.assign({tagName:"a"},i)),1)[0],o=Y((function(e){a.onKeyDown(e),null==r||r(e)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?(0,Ie.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,Ie.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));SM.displayName="Anchor";var TM=SM,CM=["bsPrefix","className","as","active","eventKey"],NM=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?TM:i,o=e.active,u=e.eventKey,c=M(e,CM);n=mt(n,"nav-link");var l=s(fM((0,F.Z)({key:GL(u,c.href),active:o},c)),2),f=l[0],h=l[1];return(0,Ie.jsx)(a,(0,F.Z)((0,F.Z)((0,F.Z)({},c),f),{},{ref:t,className:j()(r,n,c.disabled&&"disabled",h.isActive&&"active")}))}));NM.displayName="NavLink",NM.defaultProps={disabled:!1};var AM=NM,PM=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],RM=t.forwardRef((function(e,n){var r,i,a,o=OL(e,{activeKey:"onSelect"}),u=o.as,s=void 0===u?"div":u,c=o.bsPrefix,l=o.variant,f=o.fill,h=o.justify,d=o.navbar,p=o.navbarScroll,v=o.className,y=o.activeKey,m=M(o,PM),g=mt(c,"nav"),k=!1,w=(0,t.useContext)(wM),b=(0,t.useContext)(_M);return w?(i=w.bsPrefix,k=null==d||d):b&&(a=b.cardHeaderBsPrefix),(0,Ie.jsx)(gM,(0,F.Z)({as:s,ref:n,activeKey:y,className:j()(v,(r={},(0,de.Z)(r,g,!k),(0,de.Z)(r,"".concat(i,"-nav"),k),(0,de.Z)(r,"".concat(i,"-nav-scroll"),k&&p),(0,de.Z)(r,"".concat(a,"-").concat(l),!!a),(0,de.Z)(r,"".concat(g,"-").concat(l),!!l),(0,de.Z)(r,"".concat(g,"-fill"),f),(0,de.Z)(r,"".concat(g,"-justified"),h),r))},m))}));RM.displayName="Nav",RM.defaultProps={justify:!1,fill:!1};var DM=Object.assign(RM,{Item:xM,Link:AM}),OM=wt("tab-content");function LM(e){return"boolean"===typeof e?e?dt:ZL:e}var MM=["bsPrefix","transition"],FM=["className","as"],UM=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.transition,i=M(e,MM),a=s(eM((0,F.Z)((0,F.Z)({},i),{},{transition:LM(r)})),2),o=a[0],u=o.className,c=o.as,l=void 0===c?"div":c,f=M(o,FM),h=a[1],d=h.isActive,p=h.onEnter,v=h.onEntering,y=h.onEntered,m=h.onExit,g=h.onExiting,k=h.onExited,w=h.mountOnEnter,b=h.unmountOnExit,_=h.transition,x=void 0===_?dt:_,E=mt(n,"tab-pane");return(0,Ie.jsx)(HL.Provider,{value:null,children:(0,Ie.jsx)(QL.Provider,{value:null,children:(0,Ie.jsx)(x,{in:d,onEnter:p,onEntering:v,onEntered:y,onExit:m,onExiting:g,onExited:k,mountOnEnter:w,unmountOnExit:b,children:(0,Ie.jsx)(l,(0,F.Z)((0,F.Z)({},f),{},{ref:t,className:j()(u,E,d&&"active")}))})})})}));UM.displayName="TabPane";var jM=UM;function VM(e,n){var r=0;return t.Children.map(e,(function(e){return t.isValidElement(e)?n(e,r++):e}))}var qM=["id","onSelect","transition","mountOnEnter","unmountOnExit","children","activeKey"];function BM(e){var n;return function(e,n){var r=0;t.Children.forEach(e,(function(e){t.isValidElement(e)&&n(e,r++)}))}(e,(function(e){null==n&&(n=e.props.eventKey)})),n}function zM(e){var t=e.props,n=t.title,r=t.eventKey,i=t.disabled,a=t.tabClassName,o=t.tabAttrs,u=t.id;return null==n?null:(0,Ie.jsx)(xM,{as:"li",role:"presentation",children:(0,Ie.jsx)(AM,(0,F.Z)((0,F.Z)({as:"button",type:"button",eventKey:r,disabled:i,id:u,className:a},o),{},{children:n}))})}var WM=function(e){var t=OL(e,{activeKey:"onSelect"}),n=t.id,r=t.onSelect,i=t.transition,a=t.mountOnEnter,o=t.unmountOnExit,u=t.children,s=t.activeKey,c=void 0===s?BM(u):s,l=M(t,qM);return(0,Ie.jsxs)(rM,{id:n,activeKey:c,onSelect:r,transition:LM(i),mountOnEnter:a,unmountOnExit:o,children:[(0,Ie.jsx)(DM,(0,F.Z)((0,F.Z)({},l),{},{role:"tablist",as:"ul",children:VM(u,zM)})),(0,Ie.jsx)(OM,{children:VM(u,(function(e){var t=(0,F.Z)({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,Ie.jsx)(jM,(0,F.Z)({},t))}))})]})};WM.defaultProps={variant:"tabs",mountOnEnter:!1,unmountOnExit:!1},WM.displayName="Tabs";var KM=WM,HM=["transition"],GM=function(e){var t=e.transition,n=M(e,HM);return(0,Ie.jsx)(rM,(0,F.Z)((0,F.Z)({},n),{},{transition:LM(t)}))};GM.displayName="TabContainer";var QM=GM,ZM={eventKey:Ct().oneOfType([Ct().string,Ct().number]),title:Ct().node.isRequired,disabled:Ct().bool,tabClassName:Ct().string,tabAttrs:Ct().object},YM=function(){throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};YM.propTypes=ZM;var $M=Object.assign(YM,{Container:QM,Content:OM,Pane:jM});var JM=function(){var e=N();return(0,t.useEffect)((function(){e(tn())}),[]),(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(KM,{defaultActiveKey:"home",id:"uncontrolled-tab-example",className:"mb-3",children:[(0,Ie.jsx)($M,{eventKey:"home",title:"Home",children:(0,Ie.jsx)(NL,{})}),(0,Ie.jsx)($M,{eventKey:"profile",title:"Profile"}),(0,Ie.jsx)($M,{eventKey:"contact",title:"Contact",disabled:!0})]})})},XM=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},eF=n(7781),tF=(0,eF.UY)({order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return(0,F.Z)({},e);case P:return(0,F.Z)((0,F.Z)({},e),{},{done:!e.done});case R:return(0,F.Z)((0,F.Z)({},e),{},{loading:!e.loading});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CL,t=arguments.length>1?arguments[1]:void 0;return t.type===Jt?(0,F.Z)((0,F.Z)({},e),{},{products:t.payload}):e}}),nF=n(5484),rF=(0,n(5792).default)(),iF=(0,nF.Uo)((0,eF.md)((function(e){return function(t){return function(n){var r=e.getState();return console.log(n,r),t(n)}}}),(function(e){return function(t){return function(n){var r=e.dispatch,i=e.getState;return"function"===typeof n?n(r,i):t(n)}}}),rF)),aF=n(7780),oF=Xn().mark(sF),uF=Xn().mark(cF);function sF(e){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,aF.call)(TL.firestore.addDocument,"products",{img1:e.img1,img2:e.img2,img3:e.img3,img4:e.img4,img5:e.img5,img6:e.img6,img7:e.img7,img8:e.img8,img9:e.img9,img10:e.img10,price:e.price,brand:e.brand,model:e.model,chip:e.chip,manufacture:e.manufacture,classificationKey:e.classificationKey,classificationBoard:e.classificationBoard,keyBlade:e.keyBlade,description:e.description});case 3:return t.sent,t.next=6,(0,aF.put)(D());case 6:return t.next=8,(0,aF.put)(O());case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("nooooo");case 13:case"end":return t.stop()}}),oF,null,[[0,10]])}function cF(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,aF.takeEvery)(A,sF);case 2:case"end":return e.stop()}}),uF)}var lF=Xn().mark(hF),fF=Xn().mark(dF);function hF(){var e,t;return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,aF.call)(TL.firestore.getCollection,"products");case 2:return e=n.sent,t=e.docs.map((function(e){return(0,F.Z)({id:e.id},e.data())})),n.next=6,(0,aF.put)(en(t));case 6:case"end":return n.stop()}}),lF)}function dF(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,aF.takeEvery)(Xt,hF);case 2:case"end":return e.stop()}}),fF)}var pF=Xn().mark(vF);function vF(){return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,aF.all)([cF(),dF()]);case 2:case"end":return e.stop()}}),pF)}var yF=(0,eF.MT)(tF,iF);rF.run(vF),r.createRoot(document.getElementById("root")).render((0,Ie.jsx)(E,{store:yF,children:(0,Ie.jsx)(JM,{})})),XM()}()}();
//# sourceMappingURL=main.ddc5a70a.js.map